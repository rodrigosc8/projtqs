2025-11-04T12:05:11.141Z  INFO 28829 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 28829 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:05:11.142Z  INFO 28829 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:05:11.150Z DEBUG 28829 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@285583d4
2025-11-04T12:05:11.499Z  INFO 28829 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:05:11.542Z  INFO 28829 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2025-11-04T12:05:11.807Z  INFO 28829 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:05:11.832Z  INFO 28829 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-04T12:05:11.847Z  INFO 28829 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:05:11.900Z  INFO 28829 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:05:11.914Z  INFO 28829 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-04T12:05:12.009Z  INFO 28829 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:05:12.010Z  INFO 28829 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-04T12:05:12.021Z  WARN 28829 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:05:12.031Z  INFO 28829 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:05:12.406Z  INFO 28829 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:05:12.433Z  INFO 28829 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:05:12.606Z  INFO 28829 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-04T12:05:13.028Z  WARN 28829 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:05:13.071Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:05:13.118Z DEBUG 28829 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:05:13.138Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:05:13.166Z DEBUG 28829 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:05:13.246Z  INFO 28829 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:05:13.293Z  INFO 28829 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T12:05:13.293Z  INFO 28829 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T12:05:13.294Z  INFO 28829 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-04T12:05:13.314Z  INFO 28829 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.363 seconds (process running for 3.594)
2025-11-04T12:05:13.348Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:13.376Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@afee49e]
2025-11-04T12:05:13.379Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:13.379Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-20, timeslot=Manhã, description=Booking 1
2025-11-04T12:05:13.383Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-04T12:05:13.383Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:13.435Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:13.438Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:13.771Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:13.772Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:13.775Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:13.775Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:13.821Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-04T12:05:13.848Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 882ac8da-2c7f-4823-ba11-2074888a9b7b
2025-11-04T12:05:13.864Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:13.864Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@35c630af]
2025-11-04T12:05:13.875Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:13.875Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4f1a6259]
2025-11-04T12:05:13.876Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:13.876Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-21, timeslot=Tarde, description=Booking 2
2025-11-04T12:05:13.876Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-21
2025-11-04T12:05:13.876Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:13.876Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:13.876Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:14.188Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:14.189Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:14.191Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:14.191Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:14.193Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-21: 0/5
2025-11-04T12:05:14.194Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 540a3e4d-619c-4390-8f37-cb9d9e7383dd
2025-11-04T12:05:14.195Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.195Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@28220b56]
2025-11-04T12:05:14.196Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:14.197Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2f5823c7]
2025-11-04T12:05:14.197Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:14.197Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-22, timeslot=Noite, description=Booking Porto
2025-11-04T12:05:14.197Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-22
2025-11-04T12:05:14.197Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.197Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.197Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:14.250Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:14.250Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:14.251Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:14.251Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:14.253Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-22: 0/5
2025-11-04T12:05:14.257Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1619e859-d09d-455a-93cd-4004ac311333
2025-11-04T12:05:14.259Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.259Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3d1b97e4]
2025-11-04T12:05:14.261Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:05:14.266Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:05:14.267Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-04T12:05:14.284Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.284Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:05:14.321Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:14.322Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2683fbab]
2025-11-04T12:05:14.322Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:14.322Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-01, timeslot=Manhã, description=Teste integração
2025-11-04T12:05:14.322Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-04T12:05:14.322Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.322Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.323Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:14.376Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:14.377Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:14.378Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:14.378Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:14.381Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-04T12:05:14.386Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 23de7a4d-a9b8-48c9-830e-5e5517682996
2025-11-04T12:05:14.388Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.388Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@290def7d]
2025-11-04T12:05:14.398Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:05:14.398Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-04T12:05:14.398Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-04T12:05:14.400Z ERROR 28829 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-04T12:05:14.401Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.401Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:05:14.406Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:14.407Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5f58ff4f]
2025-11-04T12:05:14.407Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:14.407Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Lisboa, date=2025-12-25, timeslot=Manhã, description=Teste update estado
2025-11-04T12:05:14.407Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-04T12:05:14.407Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.407Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.408Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:14.461Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:14.462Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:14.463Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:14.463Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:14.466Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-04T12:05:14.472Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 26c0dd27-384c-4c2a-ae9a-9026be14e148
2025-11-04T12:05:14.474Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.474Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2e51e263]
2025-11-04T12:05:14.476Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:05:14.478Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-04T12:05:14.479Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/26c0dd27-384c-4c2a-ae9a-9026be14e148/status - Updating status
2025-11-04T12:05:14.479Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: 26c0dd27-384c-4c2a-ae9a-9026be14e148, newStatus: IN_PROGRESS
2025-11-04T12:05:14.479Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 26c0dd27-384c-4c2a-ae9a-9026be14e148
2025-11-04T12:05:14.484Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-04T12:05:14.489Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.489Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@37d88e50]
2025-11-04T12:05:14.497Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:14.498Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@767cacee]
2025-11-04T12:05:14.498Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:14.498Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-15, timeslot=Tarde, description=Teste GET por token
2025-11-04T12:05:14.498Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-04T12:05:14.498Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.498Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.498Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:14.551Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:14.552Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:14.553Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:14.553Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:14.556Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-04T12:05:14.560Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 14bcb117-5e1f-4322-ab52-88883d20f267
2025-11-04T12:05:14.561Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.561Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4337cf96]
2025-11-04T12:05:14.563Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:05:14.564Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/14bcb117-5e1f-4322-ab52-88883d20f267 - Fetching booking
2025-11-04T12:05:14.564Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 14bcb117-5e1f-4322-ab52-88883d20f267
2025-11-04T12:05:14.566Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.566Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@12882698]
2025-11-04T12:05:14.573Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:14.573Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@149b14f6]
2025-11-04T12:05:14.574Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:14.574Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2020-01-01, timeslot=Manhã, description=Data passada
2025-11-04T12:05:14.574Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-04T12:05:14.574Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.574Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.574Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:14.629Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:14.630Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:14.631Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:14.631Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:14.631Z  WARN 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-04T12:05:14.635Z ERROR 28829 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-04T12:05:14.636Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.637Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:05:14.652Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:14.653Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@52997ccc]
2025-11-04T12:05:14.653Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:14.654Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Coimbra, date=2025-12-30, timeslot=Tarde, description=Teste estado inválido
2025-11-04T12:05:14.654Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-04T12:05:14.655Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.655Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.656Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:14.708Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:14.709Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:14.710Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:14.710Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:14.712Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-04T12:05:14.717Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: cffe8dda-887e-4afe-8ad7-441d841176ee
2025-11-04T12:05:14.718Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.719Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@362a2806]
2025-11-04T12:05:14.721Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:05:14.723Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-04T12:05:14.726Z  WARN 28829 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-04T12:05:14.751Z  INFO 28829 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:05:14.765Z  INFO 28829 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-04T12:05:14.774Z  INFO 28829 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:05:14.801Z  INFO 28829 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 28829 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:05:14.802Z  INFO 28829 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:05:14.803Z DEBUG 28829 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@28e7fbc4
2025-11-04T12:05:14.867Z  INFO 28829 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:05:14.871Z  INFO 28829 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T12:05:14.910Z  INFO 28829 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:05:14.911Z  INFO 28829 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:05:14.915Z  INFO 28829 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:05:14.915Z  INFO 28829 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-04T12:05:14.916Z  INFO 28829 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:05:14.916Z  INFO 28829 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-04T12:05:14.917Z  WARN 28829 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:05:14.917Z  INFO 28829 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:05:14.939Z  INFO 28829 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:05:14.944Z  INFO 28829 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:05:14.980Z  WARN 28829 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:05:14.990Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:05:14.997Z DEBUG 28829 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:05:15.000Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:05:15.003Z DEBUG 28829 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:05:15.023Z  INFO 28829 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:05:15.034Z  INFO 28829 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.26 seconds (process running for 5.314)
2025-11-04T12:05:15.200Z  INFO 28829 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:05:15.203Z  INFO 28829 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:05:15.204Z  INFO 28829 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:05:15.214Z  INFO 28829 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 28829 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:05:15.214Z  INFO 28829 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:05:15.275Z  INFO 28829 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:05:15.280Z  INFO 28829 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-04T12:05:15.371Z  INFO 28829 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-04T12:05:15.379Z  INFO 28829 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-04T12:05:15.379Z  INFO 28829 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-04T12:05:15.400Z  INFO 28829 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-04T12:05:15.400Z  INFO 28829 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 185 ms
2025-11-04T12:05:15.430Z  INFO 28829 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:05:15.431Z  INFO 28829 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:05:15.435Z  INFO 28829 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:05:15.435Z  INFO 28829 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-04T12:05:15.436Z  INFO 28829 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:05:15.436Z  INFO 28829 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-04T12:05:15.436Z  WARN 28829 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:05:15.436Z  INFO 28829 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:05:15.454Z  INFO 28829 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:05:15.458Z  INFO 28829 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:05:15.478Z  WARN 28829 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:05:15.486Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:05:15.492Z DEBUG 28829 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:05:15.495Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:05:15.497Z DEBUG 28829 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:05:15.508Z  INFO 28829 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:05:15.539Z  INFO 28829 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-04T12:05:15.541Z  INFO 28829 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.337 seconds (process running for 5.821)
2025-11-04T12:05:15.565Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:05:16.774Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-04T12:05:16.876Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-04T12:05:16.912Z  INFO 28829 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-04T12:05:16.913Z  INFO 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-04T12:05:16.913Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-04T12:05:16.913Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-04T12:05:16.913Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-04T12:05:16.913Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@789c61a3
2025-11-04T12:05:16.913Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@73959127
2025-11-04T12:05:16.914Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-04T12:05:16.914Z  INFO 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-04T12:05:16.916Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:05:16.916Z DEBUG 28829 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:05:16.917Z  INFO 28829 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:16.917Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:16.917Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:16.969Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:16.970Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:16.970Z  INFO 28829 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:16.970Z  INFO 28829 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:16.971Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:16.971Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:05:16.973Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:16.978Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:05:16.979Z DEBUG 28829 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:05:16.979Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:16.979Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:16.980Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:17.033Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:17.034Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:17.035Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:17.035Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:17.036Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:17.037Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:05:17.039Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:18.930Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-04T12:05:18.945Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-04T12:05:18.958Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manhã
2025-11-04T12:05:18.973Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colchão e mobília velha
2025-11-04T12:05:19.004Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:05:19.004Z DEBUG 28829 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:19.006Z DEBUG 28829 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@55cf3dd9]
2025-11-04T12:05:19.006Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:19.006Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2025-11-20, timeslot=Manhã, description=Colchão e mobília velha
2025-11-04T12:05:19.006Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2025-11-20
2025-11-04T12:05:19.006Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:19.007Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:19.007Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:19.060Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:19.061Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:19.062Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:19.062Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:19.072Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2025-11-20: 0/5
2025-11-04T12:05:19.079Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 7a3c9e00-3058-445b-a7f0-22528800e9e4
2025-11-04T12:05:19.084Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:19.084Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2e747962]
2025-11-04T12:05:19.085Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:05:21.015Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-04T12:05:21.019Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-04T12:05:21.019Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:05:21.033Z  INFO 28829 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:05:21.034Z  INFO 28829 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:05:21.038Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:05:21.068Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:05:21.069Z DEBUG 28829 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:21.069Z DEBUG 28829 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5169d139]
2025-11-04T12:05:21.069Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:21.069Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test booking
2025-11-04T12:05:21.070Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:05:21.070Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:21.070Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:21.070Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:21.123Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:21.123Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:21.124Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:21.124Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:21.126Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 0/5
2025-11-04T12:05:21.128Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1961f118-417a-48d8-89de-97f0493158a5
2025-11-04T12:05:21.128Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:21.128Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1e932f5f]
2025-11-04T12:05:21.129Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:05:21.134Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 1961f118-417a-48d8-89de-97f0493158a5
2025-11-04T12:05:21.448Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:05:21.489Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:05:21.520Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: 1961f118-417a-48d8-89de-97f0493158a5
2025-11-04T12:05:21.557Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/1961f118-417a-48d8-89de-97f0493158a5", parameters={}
2025-11-04T12:05:21.557Z DEBUG 28829 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:05:21.558Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/1961f118-417a-48d8-89de-97f0493158a5 - Fetching booking
2025-11-04T12:05:21.558Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 1961f118-417a-48d8-89de-97f0493158a5
2025-11-04T12:05:21.561Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:21.561Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5533fdad]
2025-11-04T12:05:21.563Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:23.060Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:05:23.071Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-04T12:05:23.083Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: 1961f118-417a-48d8-89de-97f0493158a5
2025-11-04T12:05:23.084Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:05:23.101Z  INFO 28829 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:05:23.102Z  INFO 28829 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:05:23.113Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:05:23.143Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:05:23.143Z DEBUG 28829 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:23.144Z DEBUG 28829 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@b2c2637]
2025-11-04T12:05:23.144Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:23.144Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test booking
2025-11-04T12:05:23.144Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:05:23.144Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:23.145Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:23.145Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:23.198Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:23.199Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:23.200Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:23.200Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:23.203Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 1/5
2025-11-04T12:05:23.208Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d7f6748e-112f-4413-9365-2be6ec7895c1
2025-11-04T12:05:23.210Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:23.210Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@75d82615]
2025-11-04T12:05:23.211Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:05:23.214Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: d7f6748e-112f-4413-9365-2be6ec7895c1
2025-11-04T12:05:23.558Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:05:23.595Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:05:23.620Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-04T12:05:23.666Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-04T12:05:23.667Z DEBUG 28829 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:05:23.668Z  INFO 28829 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/INVALID - Fetching booking
2025-11-04T12:05:23.668Z  INFO 28829 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-04T12:05:23.670Z ERROR 28829 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-04T12:05:23.670Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:23.671Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:05:23.671Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-04T12:05:25.171Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:05:25.182Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-04T12:05:25.183Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:05:25.197Z  INFO 28829 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:05:25.198Z  INFO 28829 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:05:25.207Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:05:25.243Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:05:25.243Z DEBUG 28829 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:25.244Z DEBUG 28829 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@80eeb3d]
2025-11-04T12:05:25.244Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:25.244Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test Aveiro
2025-11-04T12:05:25.244Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:05:25.244Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.245Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.245Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:25.298Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:25.298Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:25.299Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:25.299Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:25.301Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 2/5
2025-11-04T12:05:25.307Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1f87574f-3aad-4be0-8c70-a28948a50e9e
2025-11-04T12:05:25.308Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:25.309Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@76f9ca94]
2025-11-04T12:05:25.310Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:05:25.313Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:05:25.318Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:05:25.318Z DEBUG 28829 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:25.319Z DEBUG 28829 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@531ba30b]
2025-11-04T12:05:25.319Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:25.320Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2026-12-13, timeslot=Tarde, description=Test Porto
2025-11-04T12:05:25.320Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:05:25.320Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.320Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.320Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:25.373Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:25.374Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:25.375Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:25.375Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:25.377Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 0/5
2025-11-04T12:05:25.383Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: adfd2059-4663-4b6e-b242-eefc41c29c33
2025-11-04T12:05:25.385Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:25.385Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1ce15d23]
2025-11-04T12:05:25.386Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:05:25.389Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:05:25.519Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:05:25.574Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:05:25.580Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:05:25.580Z DEBUG 28829 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:05:25.580Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:05:25.580Z  INFO 28829 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.580Z DEBUG 28829 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:05:25.581Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.581Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:25.581Z  INFO 28829 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:05:25.581Z  INFO 28829 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:05:25.587Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:25.587Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:05:25.591Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:25.593Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:05:25.593Z DEBUG 28829 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:05:25.594Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:05:25.594Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:05:25.596Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:25.596Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:05:25.598Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:25.633Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:25.633Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:25.633Z  INFO 28829 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:25.634Z  INFO 28829 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:25.634Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:25.634Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:05:25.636Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:25.642Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:05:25.642Z DEBUG 28829 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:05:25.643Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.644Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.644Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:25.697Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:25.697Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:25.698Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:25.698Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:25.699Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:25.699Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:05:25.701Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:27.630Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-04T12:05:27.683Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-04T12:05:27.684Z DEBUG 28829 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:05:27.685Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:05:27.685Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-04T12:05:27.688Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:27.688Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:05:27.690Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:29.210Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:05:29.224Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-04T12:05:29.225Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:05:29.240Z  INFO 28829 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:05:29.242Z  INFO 28829 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:05:29.254Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:05:29.276Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:05:29.276Z DEBUG 28829 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:29.277Z DEBUG 28829 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@50e368fc]
2025-11-04T12:05:29.277Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:29.277Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test Aveiro
2025-11-04T12:05:29.277Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:05:29.277Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.277Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.278Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:29.329Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:29.330Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:29.331Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:29.331Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:29.333Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 3/5
2025-11-04T12:05:29.335Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1ea689e6-2256-4feb-a01c-c15eaa5918f3
2025-11-04T12:05:29.335Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:29.335Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@19f063bc]
2025-11-04T12:05:29.336Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:05:29.338Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:05:29.344Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:05:29.345Z DEBUG 28829 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:29.346Z DEBUG 28829 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@269306b4]
2025-11-04T12:05:29.346Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:29.346Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2026-12-13, timeslot=Tarde, description=Test Porto
2025-11-04T12:05:29.347Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:05:29.347Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.348Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.348Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:29.401Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:29.402Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:29.402Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:29.402Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:29.405Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 1/5
2025-11-04T12:05:29.410Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 35fa20d3-7c89-4e82-97f4-65c8e2d54416
2025-11-04T12:05:29.412Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:29.412Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4f454d6f]
2025-11-04T12:05:29.413Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:05:29.417Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:05:29.727Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:05:29.793Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:05:29.799Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:05:29.799Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:05:29.799Z DEBUG 28829 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:05:29.799Z DEBUG 28829 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:05:29.799Z  INFO 28829 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.800Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:05:29.800Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:05:29.800Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.800Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:29.802Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:29.802Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:05:29.805Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:29.807Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:05:29.807Z DEBUG 28829 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:05:29.808Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:05:29.808Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:05:29.810Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:29.810Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:05:29.813Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:29.820Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-04T12:05:29.851Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-04T12:05:29.851Z DEBUG 28829 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:05:29.851Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:29.852Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:29.852Z  INFO 28829 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:29.852Z  INFO 28829 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:29.852Z  INFO 28829 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:05:29.852Z  INFO 28829 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-04T12:05:29.852Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:29.852Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:05:29.853Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:29.857Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:05:29.858Z DEBUG 28829 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:05:29.858Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:29.858Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:05:29.858Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.859Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.859Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:29.862Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:29.910Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:29.911Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:29.911Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:29.911Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:29.911Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:29.912Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:05:29.912Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:31.356Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:05:31.371Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-04T12:05:31.371Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:05:31.388Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-04T12:05:31.437Z DEBUG 28829 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@285583d4, started on Tue Nov 04 12:05:11 WET 2025
2025-11-04T12:05:31.439Z  INFO 28829 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:05:31.441Z  INFO 28829 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-04T12:05:31.442Z  INFO 28829 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-04T12:05:31.442Z DEBUG 28829 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@28e7fbc4, started on Tue Nov 04 12:05:14 WET 2025
2025-11-04T12:05:31.443Z  INFO 28829 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:05:31.443Z  INFO 28829 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-04T12:05:31.444Z  INFO 28829 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-04T12:05:31.445Z  INFO 28829 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-04T12:05:31.446Z  INFO 28829 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-04T12:05:31.447Z  INFO 28829 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:05:31.448Z  INFO 28829 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-04T12:05:31.449Z  INFO 28829 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-04T12:12:48.341Z  INFO 32387 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 32387 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:12:48.342Z  INFO 32387 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:12:48.350Z DEBUG 32387 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@22bf9122
2025-11-04T12:12:48.693Z  INFO 32387 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:12:48.728Z  INFO 32387 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 28 ms. Found 2 JPA repository interfaces.
2025-11-04T12:12:49.001Z  INFO 32387 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:12:49.025Z  INFO 32387 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-04T12:12:49.040Z  INFO 32387 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:12:49.092Z  INFO 32387 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:12:49.106Z  INFO 32387 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-04T12:12:49.200Z  INFO 32387 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:12:49.202Z  INFO 32387 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-04T12:12:49.213Z  WARN 32387 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:12:49.223Z  INFO 32387 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:12:49.587Z  INFO 32387 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:12:49.613Z  INFO 32387 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:12:49.807Z  INFO 32387 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-04T12:12:50.230Z  WARN 32387 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:12:50.274Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:12:50.322Z DEBUG 32387 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:12:50.341Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:12:50.375Z DEBUG 32387 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:12:50.465Z  INFO 32387 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:12:50.515Z  INFO 32387 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T12:12:50.515Z  INFO 32387 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T12:12:50.517Z  INFO 32387 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-04T12:12:50.535Z  INFO 32387 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.382 seconds (process running for 3.651)
2025-11-04T12:12:50.562Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:50.592Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5e9257b3]
2025-11-04T12:12:50.594Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:50.595Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-20, timeslot=Manhã, description=Booking 1
2025-11-04T12:12:50.598Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-04T12:12:50.598Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:50.649Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:50.653Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:50.939Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:50.941Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:50.946Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:50.946Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:50.993Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-04T12:12:51.023Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ddc19fc5-bf8b-4980-83a5-5c36de02e3db
2025-11-04T12:12:51.039Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.039Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@43f1a188]
2025-11-04T12:12:51.050Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:51.051Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1bba5848]
2025-11-04T12:12:51.051Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:51.051Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-21, timeslot=Tarde, description=Booking 2
2025-11-04T12:12:51.051Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-21
2025-11-04T12:12:51.051Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.051Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.052Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:51.106Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:51.107Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:51.109Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:51.110Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:51.112Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-21: 0/5
2025-11-04T12:12:51.114Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 68a2310b-82d2-49b3-8e48-e295ed60f5c5
2025-11-04T12:12:51.115Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.115Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@60a0094a]
2025-11-04T12:12:51.117Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:51.118Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4a218cc6]
2025-11-04T12:12:51.118Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:51.118Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-22, timeslot=Noite, description=Booking Porto
2025-11-04T12:12:51.119Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-22
2025-11-04T12:12:51.119Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.119Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.120Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:51.173Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:51.174Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:51.176Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:51.176Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:51.179Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-22: 0/5
2025-11-04T12:12:51.185Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ddd0d052-922a-4d6d-9397-64142d9d0659
2025-11-04T12:12:51.188Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.188Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6dad9f5e]
2025-11-04T12:12:51.192Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:12:51.199Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:12:51.200Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-04T12:12:51.220Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.221Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:12:51.260Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:51.261Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4c14b1bd]
2025-11-04T12:12:51.261Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:51.261Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-01, timeslot=Manhã, description=Teste integração
2025-11-04T12:12:51.261Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-04T12:12:51.261Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.261Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.262Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:51.315Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:51.316Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:51.318Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:51.318Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:51.321Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-04T12:12:51.326Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 272601e8-ff5b-4a41-a0d8-de4dfc695265
2025-11-04T12:12:51.328Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.328Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@17ae4b7c]
2025-11-04T12:12:51.338Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:12:51.338Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-04T12:12:51.338Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-04T12:12:51.341Z ERROR 32387 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-04T12:12:51.341Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.341Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:12:51.347Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:51.348Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@70fd1f5c]
2025-11-04T12:12:51.348Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:51.348Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Lisboa, date=2025-12-25, timeslot=Manhã, description=Teste update estado
2025-11-04T12:12:51.348Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-04T12:12:51.348Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.348Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.349Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:51.405Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:51.406Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:51.407Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:51.407Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:51.410Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-04T12:12:51.416Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 90230797-bd58-4b22-85f0-61dcb8fdb0ef
2025-11-04T12:12:51.418Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.418Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4e44f582]
2025-11-04T12:12:51.420Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:12:51.423Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-04T12:12:51.424Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/90230797-bd58-4b22-85f0-61dcb8fdb0ef/status - Updating status
2025-11-04T12:12:51.424Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: 90230797-bd58-4b22-85f0-61dcb8fdb0ef, newStatus: IN_PROGRESS
2025-11-04T12:12:51.424Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 90230797-bd58-4b22-85f0-61dcb8fdb0ef
2025-11-04T12:12:51.429Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-04T12:12:51.435Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.435Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2989e190]
2025-11-04T12:12:51.443Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:51.443Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@171f9f2c]
2025-11-04T12:12:51.443Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:51.444Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-15, timeslot=Tarde, description=Teste GET por token
2025-11-04T12:12:51.444Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-04T12:12:51.444Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.444Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.444Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:51.498Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:51.499Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:51.500Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:51.500Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:51.503Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-04T12:12:51.510Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 81334ed9-eaae-4a5c-9dd0-e53ea52f7b05
2025-11-04T12:12:51.513Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.513Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@217ed737]
2025-11-04T12:12:51.515Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:12:51.516Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/81334ed9-eaae-4a5c-9dd0-e53ea52f7b05 - Fetching booking
2025-11-04T12:12:51.516Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 81334ed9-eaae-4a5c-9dd0-e53ea52f7b05
2025-11-04T12:12:51.519Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.519Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6d2f808d]
2025-11-04T12:12:51.528Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:51.529Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2859b9e6]
2025-11-04T12:12:51.529Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:51.529Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2020-01-01, timeslot=Manhã, description=Data passada
2025-11-04T12:12:51.529Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-04T12:12:51.529Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.530Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.530Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:51.582Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:51.582Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:51.583Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:51.583Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:51.583Z  WARN 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-04T12:12:51.584Z ERROR 32387 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-04T12:12:51.585Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.585Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:12:51.591Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:51.592Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@151fce03]
2025-11-04T12:12:51.592Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:51.592Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Coimbra, date=2025-12-30, timeslot=Tarde, description=Teste estado inválido
2025-11-04T12:12:51.593Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-04T12:12:51.593Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.593Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.593Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:51.647Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:51.649Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:51.650Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:51.650Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:51.653Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-04T12:12:51.657Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ddca0efb-8cb0-4731-99db-057938409a43
2025-11-04T12:12:51.659Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.659Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5ceb9fae]
2025-11-04T12:12:51.661Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:12:51.662Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-04T12:12:51.664Z  WARN 32387 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-04T12:12:51.672Z  INFO 32387 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:12:51.677Z  INFO 32387 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-04T12:12:51.680Z  INFO 32387 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:12:51.693Z  INFO 32387 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 32387 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:12:51.693Z  INFO 32387 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:12:51.694Z DEBUG 32387 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@435e122
2025-11-04T12:12:51.765Z  INFO 32387 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:12:51.770Z  INFO 32387 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-04T12:12:51.813Z  INFO 32387 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:12:51.814Z  INFO 32387 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:12:51.818Z  INFO 32387 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:12:51.818Z  INFO 32387 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-04T12:12:51.819Z  INFO 32387 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:12:51.819Z  INFO 32387 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-04T12:12:51.820Z  WARN 32387 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:12:51.820Z  INFO 32387 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:12:51.841Z  INFO 32387 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:12:51.846Z  INFO 32387 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:12:51.882Z  WARN 32387 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:12:51.892Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:12:51.899Z DEBUG 32387 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:12:51.903Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:12:51.907Z DEBUG 32387 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:12:51.925Z  INFO 32387 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:12:51.935Z  INFO 32387 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.255 seconds (process running for 5.05)
2025-11-04T12:12:52.122Z  INFO 32387 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:12:52.126Z  INFO 32387 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:12:52.128Z  INFO 32387 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:12:52.141Z  INFO 32387 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 32387 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:12:52.141Z  INFO 32387 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:12:52.203Z  INFO 32387 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:12:52.208Z  INFO 32387 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-04T12:12:52.307Z  INFO 32387 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-04T12:12:52.315Z  INFO 32387 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-04T12:12:52.316Z  INFO 32387 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-04T12:12:52.339Z  INFO 32387 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-04T12:12:52.339Z  INFO 32387 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 197 ms
2025-11-04T12:12:52.371Z  INFO 32387 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:12:52.372Z  INFO 32387 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:12:52.376Z  INFO 32387 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:12:52.376Z  INFO 32387 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-04T12:12:52.377Z  INFO 32387 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:12:52.377Z  INFO 32387 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-04T12:12:52.377Z  WARN 32387 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:12:52.378Z  INFO 32387 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:12:52.396Z  INFO 32387 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:12:52.400Z  INFO 32387 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:12:52.422Z  WARN 32387 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:12:52.430Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:12:52.437Z DEBUG 32387 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:12:52.440Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:12:52.442Z DEBUG 32387 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:12:52.453Z  INFO 32387 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:12:52.487Z  INFO 32387 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-04T12:12:52.489Z  INFO 32387 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.36 seconds (process running for 5.604)
2025-11-04T12:12:52.513Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:12:53.695Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-04T12:12:53.794Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-04T12:12:53.837Z  INFO 32387 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-04T12:12:53.837Z  INFO 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-04T12:12:53.837Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-04T12:12:53.837Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-04T12:12:53.837Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-04T12:12:53.838Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@35fdc926
2025-11-04T12:12:53.838Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@72ed4e67
2025-11-04T12:12:53.838Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-04T12:12:53.838Z  INFO 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-04T12:12:53.840Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:12:53.840Z DEBUG 32387 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:12:53.841Z  INFO 32387 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:53.841Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:53.841Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:53.893Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:53.893Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:53.894Z  INFO 32387 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:53.894Z  INFO 32387 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:53.895Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:12:53.895Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:12:53.897Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:12:53.900Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:12:53.900Z DEBUG 32387 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:12:53.901Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:53.901Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:53.901Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:53.955Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:53.956Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:53.957Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:53.957Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:53.958Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:12:53.958Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:12:53.959Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:12:55.849Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-04T12:12:55.869Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-04T12:12:55.882Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manhã
2025-11-04T12:12:55.896Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colchão e mobília velha
2025-11-04T12:12:55.939Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:12:55.939Z DEBUG 32387 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:55.941Z DEBUG 32387 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@66b7fc14]
2025-11-04T12:12:55.941Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:55.941Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2025-11-20, timeslot=Manhã, description=Colchão e mobília velha
2025-11-04T12:12:55.942Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2025-11-20
2025-11-04T12:12:55.942Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:55.942Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:55.942Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:55.996Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:55.997Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:55.998Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:55.998Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:56.010Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2025-11-20: 0/5
2025-11-04T12:12:56.014Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c9e1ac7a-5515-42d8-a7bb-0106b6d4a0fe
2025-11-04T12:12:56.017Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:12:56.018Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7447be81]
2025-11-04T12:12:56.020Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:12:57.950Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-04T12:12:57.964Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-04T12:12:57.965Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:12:57.991Z  INFO 32387 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:12:57.992Z  INFO 32387 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:12:57.999Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:12:58.032Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:12:58.033Z DEBUG 32387 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:58.033Z DEBUG 32387 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5bb72edb]
2025-11-04T12:12:58.033Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:58.033Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test booking
2025-11-04T12:12:58.034Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:12:58.034Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:58.034Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:58.034Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:58.086Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:58.087Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:58.088Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:58.088Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:58.090Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 0/5
2025-11-04T12:12:58.096Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 9ad711a6-45fd-4d2f-adf4-6fb0c0367ea7
2025-11-04T12:12:58.098Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:58.098Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@144dd1e6]
2025-11-04T12:12:58.100Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:12:58.109Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 9ad711a6-45fd-4d2f-adf4-6fb0c0367ea7
2025-11-04T12:12:58.428Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:12:58.467Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:12:58.496Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: 9ad711a6-45fd-4d2f-adf4-6fb0c0367ea7
2025-11-04T12:12:58.540Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/9ad711a6-45fd-4d2f-adf4-6fb0c0367ea7", parameters={}
2025-11-04T12:12:58.540Z DEBUG 32387 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:12:58.541Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/9ad711a6-45fd-4d2f-adf4-6fb0c0367ea7 - Fetching booking
2025-11-04T12:12:58.541Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 9ad711a6-45fd-4d2f-adf4-6fb0c0367ea7
2025-11-04T12:12:58.544Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:12:58.544Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@225a7846]
2025-11-04T12:12:58.546Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:00.042Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:13:00.051Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-04T12:13:00.062Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: 9ad711a6-45fd-4d2f-adf4-6fb0c0367ea7
2025-11-04T12:13:00.063Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:13:00.079Z  INFO 32387 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:13:00.081Z  INFO 32387 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:13:00.088Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:13:00.115Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:13:00.116Z DEBUG 32387 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:13:00.116Z DEBUG 32387 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@75b7388f]
2025-11-04T12:13:00.117Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:13:00.117Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test booking
2025-11-04T12:13:00.117Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:13:00.117Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:00.117Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:00.118Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:00.172Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:00.173Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:00.174Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:00.174Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:00.177Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 1/5
2025-11-04T12:13:00.181Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 90d96382-e838-40a4-acfd-9ed6247cc229
2025-11-04T12:13:00.182Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:13:00.182Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@bbd5ae3]
2025-11-04T12:13:00.183Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:13:00.185Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 90d96382-e838-40a4-acfd-9ed6247cc229
2025-11-04T12:13:00.273Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:13:00.311Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:13:00.336Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-04T12:13:00.381Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-04T12:13:00.381Z DEBUG 32387 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:13:00.382Z  INFO 32387 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/INVALID - Fetching booking
2025-11-04T12:13:00.382Z  INFO 32387 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-04T12:13:00.384Z ERROR 32387 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-04T12:13:00.384Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:00.385Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:13:00.385Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-04T12:13:01.882Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:13:01.886Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-04T12:13:01.886Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:13:01.896Z  INFO 32387 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:13:01.897Z  INFO 32387 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:13:01.902Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:13:01.926Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:13:01.926Z DEBUG 32387 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:13:01.927Z DEBUG 32387 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@74a83d3d]
2025-11-04T12:13:01.927Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:13:01.927Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test Aveiro
2025-11-04T12:13:01.927Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:13:01.927Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:01.927Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:01.927Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:01.981Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:01.982Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:01.982Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:01.982Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:01.984Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 2/5
2025-11-04T12:13:01.987Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 928897d0-79be-49d2-8297-adead949be13
2025-11-04T12:13:01.988Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:13:01.988Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@aa35970]
2025-11-04T12:13:01.989Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:13:01.991Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:13:01.996Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:13:01.996Z DEBUG 32387 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:13:01.998Z DEBUG 32387 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6dbbd7fb]
2025-11-04T12:13:01.998Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:13:01.998Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2026-12-13, timeslot=Tarde, description=Test Porto
2025-11-04T12:13:01.998Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:13:01.999Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:01.999Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:02.000Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:02.053Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:02.053Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:02.054Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:02.054Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:02.056Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 0/5
2025-11-04T12:13:02.061Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 9ed64aa3-d07f-4141-ae3a-59c6881cd8de
2025-11-04T12:13:02.063Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:13:02.063Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@22412e07]
2025-11-04T12:13:02.065Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:13:02.069Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:13:02.189Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:13:02.256Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:13:02.261Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:13:02.262Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:13:02.262Z DEBUG 32387 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:13:02.262Z DEBUG 32387 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:13:02.262Z  INFO 32387 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:02.262Z  INFO 32387 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:13:02.262Z  INFO 32387 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:13:02.262Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:02.263Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:02.268Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:02.268Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:13:02.273Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:02.275Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:13:02.275Z DEBUG 32387 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:13:02.276Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:13:02.276Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:13:02.278Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:02.278Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:13:02.280Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:02.316Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:02.316Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:02.316Z  INFO 32387 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:02.317Z  INFO 32387 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:02.317Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:02.317Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:13:02.319Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:02.325Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:13:02.326Z DEBUG 32387 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:13:02.326Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:02.327Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:02.328Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:02.380Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:02.381Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:02.382Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:02.382Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:02.383Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:02.383Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:13:02.385Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:04.310Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-04T12:13:04.358Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-04T12:13:04.358Z DEBUG 32387 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:13:04.358Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:13:04.358Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-04T12:13:04.361Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:04.361Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:13:04.363Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:05.883Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:13:05.900Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-04T12:13:05.901Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:13:05.917Z  INFO 32387 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:13:05.918Z  INFO 32387 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:13:05.929Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:13:05.972Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:13:05.972Z DEBUG 32387 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:13:05.972Z DEBUG 32387 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@31c4d739]
2025-11-04T12:13:05.972Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:13:05.972Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test Aveiro
2025-11-04T12:13:05.973Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:13:05.973Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:05.973Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:05.973Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:06.027Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:06.027Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:06.028Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:06.028Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:06.030Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 3/5
2025-11-04T12:13:06.036Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: e7b30442-40bb-4e69-99ae-7f5721ec9d88
2025-11-04T12:13:06.038Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:13:06.038Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1bb731a4]
2025-11-04T12:13:06.039Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:13:06.042Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:13:06.046Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:13:06.047Z DEBUG 32387 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:13:06.048Z DEBUG 32387 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3ef0bca5]
2025-11-04T12:13:06.048Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:13:06.048Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2026-12-13, timeslot=Tarde, description=Test Porto
2025-11-04T12:13:06.048Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:13:06.048Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:06.049Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:06.049Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:06.102Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:06.103Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:06.103Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:06.103Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:06.106Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 1/5
2025-11-04T12:13:06.111Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1766f93a-35fa-4222-8948-769293f519e1
2025-11-04T12:13:06.113Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:13:06.113Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7e5aff78]
2025-11-04T12:13:06.114Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:13:06.119Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:13:06.454Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:13:06.528Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:13:06.534Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:13:06.534Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:13:06.534Z DEBUG 32387 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:13:06.534Z DEBUG 32387 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:13:06.534Z  INFO 32387 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:06.535Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:13:06.535Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:13:06.535Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:06.535Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:06.537Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:06.537Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:13:06.540Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:06.543Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:13:06.543Z DEBUG 32387 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:13:06.543Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:13:06.543Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:13:06.544Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-04T12:13:06.546Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:06.546Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:13:06.549Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:06.583Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-04T12:13:06.583Z DEBUG 32387 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:13:06.584Z  INFO 32387 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:13:06.584Z  INFO 32387 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-04T12:13:06.586Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:06.586Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:06.587Z  INFO 32387 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:06.587Z  INFO 32387 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:06.587Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:06.587Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:13:06.588Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:06.590Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:06.590Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:13:06.593Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:13:06.593Z DEBUG 32387 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:13:06.593Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:06.594Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:06.594Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:06.596Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:06.645Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:06.646Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:06.646Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:06.646Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:06.646Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:06.646Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:13:06.647Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:08.087Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:13:08.102Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-04T12:13:08.103Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:13:08.116Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-04T12:13:08.161Z DEBUG 32387 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@22bf9122, started on Tue Nov 04 12:12:48 WET 2025
2025-11-04T12:13:08.163Z  INFO 32387 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:13:08.165Z  INFO 32387 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-04T12:13:08.166Z  INFO 32387 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-04T12:13:08.167Z DEBUG 32387 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@435e122, started on Tue Nov 04 12:12:51 WET 2025
2025-11-04T12:13:08.168Z  INFO 32387 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:13:08.168Z  INFO 32387 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-04T12:13:08.169Z  INFO 32387 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-04T12:13:08.170Z  INFO 32387 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-04T12:13:08.172Z  INFO 32387 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-04T12:13:08.174Z  INFO 32387 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:13:08.174Z  INFO 32387 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-04T12:13:08.175Z  INFO 32387 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-04T12:21:51.463Z  INFO 36675 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 36675 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:21:51.464Z  INFO 36675 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:21:51.477Z DEBUG 36675 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@544733a4
2025-11-04T12:21:52.006Z  INFO 36675 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:21:52.047Z  INFO 36675 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 33 ms. Found 2 JPA repository interfaces.
2025-11-04T12:21:52.378Z  INFO 36675 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:21:52.413Z  INFO 36675 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-04T12:21:52.435Z  INFO 36675 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:21:52.524Z  INFO 36675 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:21:52.548Z  INFO 36675 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-04T12:21:52.768Z  INFO 36675 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:21:52.771Z  INFO 36675 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-04T12:21:52.795Z  WARN 36675 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:21:52.813Z  INFO 36675 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:21:53.472Z  INFO 36675 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:21:53.521Z  INFO 36675 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:21:53.722Z  INFO 36675 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-04T12:21:54.236Z  WARN 36675 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:21:54.296Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:21:54.343Z DEBUG 36675 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:21:54.361Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:21:54.395Z DEBUG 36675 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:21:54.466Z  INFO 36675 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:21:54.506Z  INFO 36675 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T12:21:54.507Z  INFO 36675 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T12:21:54.507Z  INFO 36675 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-04T12:21:54.523Z  INFO 36675 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 3.342 seconds (process running for 5.719)
2025-11-04T12:21:54.563Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:54.610Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@11252b76]
2025-11-04T12:21:54.614Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:54.615Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-20, timeslot=Manhã, description=Booking 1
2025-11-04T12:21:54.619Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-04T12:21:54.620Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:54.675Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:54.681Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:54.971Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:54.973Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:54.978Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:54.979Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.077Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-04T12:21:55.125Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0034f0d1-341e-41c4-ab93-b1cf6460a0fb
2025-11-04T12:21:55.158Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.159Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4b7f66b3]
2025-11-04T12:21:55.176Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:55.177Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2ea1f31b]
2025-11-04T12:21:55.177Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:55.177Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-21, timeslot=Tarde, description=Booking 2
2025-11-04T12:21:55.178Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-21
2025-11-04T12:21:55.178Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.178Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.178Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:55.230Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:55.230Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:55.231Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:55.232Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.233Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-21: 0/5
2025-11-04T12:21:55.236Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d41b3390-e384-4eb8-a96b-c8796bcf3af4
2025-11-04T12:21:55.236Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.237Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5149d43e]
2025-11-04T12:21:55.238Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:55.239Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5cf93ce8]
2025-11-04T12:21:55.239Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:55.239Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-22, timeslot=Noite, description=Booking Porto
2025-11-04T12:21:55.239Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-22
2025-11-04T12:21:55.239Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.240Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.240Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:55.293Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:55.293Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:55.294Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:55.294Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.295Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-22: 0/5
2025-11-04T12:21:55.297Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d3c5d8ba-3f6b-4384-b29e-8a41394d68d5
2025-11-04T12:21:55.298Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.298Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@ab76053]
2025-11-04T12:21:55.300Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:21:55.305Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:21:55.306Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-04T12:21:55.337Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.338Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:21:55.398Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:55.399Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@683a26f9]
2025-11-04T12:21:55.399Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:55.399Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-01, timeslot=Manhã, description=Teste integração
2025-11-04T12:21:55.400Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-04T12:21:55.400Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.400Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.400Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:55.678Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:55.678Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:55.678Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:55.679Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.680Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-04T12:21:55.681Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: e76ff9c0-036e-4394-957f-4dab4890e38a
2025-11-04T12:21:55.682Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.682Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4fb5f99e]
2025-11-04T12:21:55.690Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:21:55.691Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-04T12:21:55.691Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-04T12:21:55.693Z ERROR 36675 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-04T12:21:55.694Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.694Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:21:55.699Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:55.700Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5451c2bd]
2025-11-04T12:21:55.700Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:55.700Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Lisboa, date=2025-12-25, timeslot=Manhã, description=Teste update estado
2025-11-04T12:21:55.700Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-04T12:21:55.700Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.701Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.701Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:55.754Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:55.755Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:55.756Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:55.757Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.758Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-04T12:21:55.760Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: fbc57779-d0b2-476c-aa22-36cd449be643
2025-11-04T12:21:55.761Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.761Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2df2d95]
2025-11-04T12:21:55.763Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:21:55.764Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-04T12:21:55.764Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/fbc57779-d0b2-476c-aa22-36cd449be643/status - Updating status
2025-11-04T12:21:55.765Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: fbc57779-d0b2-476c-aa22-36cd449be643, newStatus: IN_PROGRESS
2025-11-04T12:21:55.765Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: fbc57779-d0b2-476c-aa22-36cd449be643
2025-11-04T12:21:55.770Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-04T12:21:55.778Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.778Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@591488b2]
2025-11-04T12:21:55.788Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:55.789Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@436defcb]
2025-11-04T12:21:55.789Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:55.789Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-15, timeslot=Tarde, description=Teste GET por token
2025-11-04T12:21:55.790Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-04T12:21:55.790Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.790Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.790Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:55.843Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:55.843Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:55.844Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:55.844Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.845Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-04T12:21:55.848Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 3fac4030-d21e-4ae9-bdf8-2a375cde1c42
2025-11-04T12:21:55.849Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.850Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1c59a4a1]
2025-11-04T12:21:55.851Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:21:55.851Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/3fac4030-d21e-4ae9-bdf8-2a375cde1c42 - Fetching booking
2025-11-04T12:21:55.851Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 3fac4030-d21e-4ae9-bdf8-2a375cde1c42
2025-11-04T12:21:55.854Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.854Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@75773272]
2025-11-04T12:21:55.862Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:55.863Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2b601535]
2025-11-04T12:21:55.863Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:55.863Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2020-01-01, timeslot=Manhã, description=Data passada
2025-11-04T12:21:55.863Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-04T12:21:55.863Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.864Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.864Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:55.916Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:55.916Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:55.917Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:55.917Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.917Z  WARN 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-04T12:21:55.918Z ERROR 36675 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-04T12:21:55.918Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.918Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:21:55.925Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:55.926Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3232f9ec]
2025-11-04T12:21:55.926Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:55.926Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Coimbra, date=2025-12-30, timeslot=Tarde, description=Teste estado inválido
2025-11-04T12:21:55.926Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-04T12:21:55.926Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.927Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.927Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:55.978Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:55.979Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:55.979Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:55.979Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.980Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-04T12:21:55.983Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 258de9b6-98eb-487d-b738-ed16c1cb1673
2025-11-04T12:21:55.984Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.984Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@b659e43]
2025-11-04T12:21:55.985Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:21:55.986Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-04T12:21:55.988Z  WARN 36675 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-04T12:21:55.997Z  INFO 36675 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:21:56.000Z  INFO 36675 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-04T12:21:56.003Z  INFO 36675 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:21:56.014Z  INFO 36675 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 36675 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:21:56.014Z  INFO 36675 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:21:56.015Z DEBUG 36675 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@51670993
2025-11-04T12:21:56.082Z  INFO 36675 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:21:56.086Z  INFO 36675 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T12:21:56.129Z  INFO 36675 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:21:56.130Z  INFO 36675 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:21:56.134Z  INFO 36675 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:21:56.134Z  INFO 36675 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-04T12:21:56.135Z  INFO 36675 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:21:56.135Z  INFO 36675 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-04T12:21:56.135Z  WARN 36675 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:21:56.136Z  INFO 36675 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:21:56.162Z  INFO 36675 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:21:56.168Z  INFO 36675 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:21:56.203Z  WARN 36675 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:21:56.213Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:21:56.220Z DEBUG 36675 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:21:56.223Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:21:56.226Z DEBUG 36675 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:21:56.241Z  INFO 36675 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:21:56.249Z  INFO 36675 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.246 seconds (process running for 7.446)
2025-11-04T12:21:56.522Z  INFO 36675 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:21:56.526Z  INFO 36675 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:21:56.527Z  INFO 36675 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:21:56.538Z  INFO 36675 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 36675 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:21:56.538Z  INFO 36675 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:21:56.600Z  INFO 36675 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:21:56.604Z  INFO 36675 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T12:21:56.743Z  INFO 36675 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-04T12:21:56.755Z  INFO 36675 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-04T12:21:56.755Z  INFO 36675 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-04T12:21:56.784Z  INFO 36675 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-04T12:21:56.784Z  INFO 36675 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 245 ms
2025-11-04T12:21:56.823Z  INFO 36675 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:21:56.824Z  INFO 36675 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:21:56.828Z  INFO 36675 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:21:56.828Z  INFO 36675 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-04T12:21:56.829Z  INFO 36675 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:21:56.829Z  INFO 36675 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-04T12:21:56.829Z  WARN 36675 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:21:56.829Z  INFO 36675 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:21:56.851Z  INFO 36675 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:21:56.855Z  INFO 36675 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:21:56.879Z  WARN 36675 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:21:56.887Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:21:56.895Z DEBUG 36675 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:21:56.898Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:21:56.901Z DEBUG 36675 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:21:56.917Z  INFO 36675 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:21:56.960Z  INFO 36675 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-04T12:21:56.962Z  INFO 36675 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.435 seconds (process running for 8.159)
2025-11-04T12:21:56.997Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:21:57.974Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-04T12:21:58.068Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-04T12:21:58.118Z  INFO 36675 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-04T12:21:58.119Z  INFO 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-04T12:21:58.119Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-04T12:21:58.119Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-04T12:21:58.119Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-04T12:21:58.119Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4421bfc1
2025-11-04T12:21:58.119Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@7de6dcf2
2025-11-04T12:21:58.119Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-04T12:21:58.119Z  INFO 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-11-04T12:21:58.122Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:21:58.123Z DEBUG 36675 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:21:58.124Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:58.124Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:58.124Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:58.178Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:58.179Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:58.181Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:58.181Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:58.184Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:21:58.185Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:21:58.194Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:21:58.199Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:21:58.199Z DEBUG 36675 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:21:58.200Z  INFO 36675 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:58.200Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:58.201Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:58.253Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:58.254Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:58.254Z  INFO 36675 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:58.254Z  INFO 36675 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:58.254Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:21:58.254Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:21:58.255Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:00.129Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-04T12:22:00.145Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-04T12:22:00.159Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manhã
2025-11-04T12:22:00.174Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colchão e mobília velha
2025-11-04T12:22:00.221Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:22:00.221Z DEBUG 36675 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:22:00.225Z DEBUG 36675 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@695e1cf7]
2025-11-04T12:22:00.225Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:22:00.225Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2025-11-20, timeslot=Manhã, description=Colchão e mobília velha
2025-11-04T12:22:00.226Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2025-11-20
2025-11-04T12:22:00.226Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:00.226Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:00.226Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:00.280Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:00.280Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:00.281Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:00.282Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:00.290Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2025-11-20: 0/5
2025-11-04T12:22:00.294Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f8dc9f34-ad78-44c0-96fc-7e33773590ff
2025-11-04T12:22:00.298Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:00.298Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@171a2c5b]
2025-11-04T12:22:00.300Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:22:02.235Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-04T12:22:02.250Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-04T12:22:02.252Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:22:02.278Z  INFO 36675 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:22:02.278Z  INFO 36675 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:22:02.283Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:22:02.319Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:22:02.320Z DEBUG 36675 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:22:02.321Z DEBUG 36675 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@781938ba]
2025-11-04T12:22:02.321Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:22:02.321Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test booking
2025-11-04T12:22:02.321Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:22:02.321Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:02.322Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:02.322Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:02.375Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:02.376Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:02.377Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:02.377Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:02.380Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 0/5
2025-11-04T12:22:02.385Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: cd64085e-6905-46c2-9589-c22cccc0154c
2025-11-04T12:22:02.387Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:22:02.387Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@37e3d3f2]
2025-11-04T12:22:02.388Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:22:02.395Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: cd64085e-6905-46c2-9589-c22cccc0154c
2025-11-04T12:22:02.504Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:22:02.545Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:22:02.575Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: cd64085e-6905-46c2-9589-c22cccc0154c
2025-11-04T12:22:02.629Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/cd64085e-6905-46c2-9589-c22cccc0154c", parameters={}
2025-11-04T12:22:02.629Z DEBUG 36675 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:22:02.631Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/cd64085e-6905-46c2-9589-c22cccc0154c - Fetching booking
2025-11-04T12:22:02.631Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: cd64085e-6905-46c2-9589-c22cccc0154c
2025-11-04T12:22:02.635Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:02.636Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4f2a582c]
2025-11-04T12:22:02.639Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:04.134Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:22:04.143Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-04T12:22:04.158Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: cd64085e-6905-46c2-9589-c22cccc0154c
2025-11-04T12:22:04.159Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:22:04.176Z  INFO 36675 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:22:04.178Z  INFO 36675 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:22:04.186Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:22:04.212Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:22:04.213Z DEBUG 36675 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:22:04.223Z DEBUG 36675 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@866085a]
2025-11-04T12:22:04.223Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:22:04.223Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test booking
2025-11-04T12:22:04.223Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:22:04.224Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:04.224Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:04.224Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:04.278Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:04.280Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:04.281Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:04.281Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:04.286Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 1/5
2025-11-04T12:22:04.293Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c0066c47-f70b-4f1a-805d-d83fdca6cd6a
2025-11-04T12:22:04.295Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:22:04.295Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7611d97d]
2025-11-04T12:22:04.296Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:22:04.298Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: c0066c47-f70b-4f1a-805d-d83fdca6cd6a
2025-11-04T12:22:04.593Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:22:04.652Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:22:04.678Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-04T12:22:04.714Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-04T12:22:04.715Z DEBUG 36675 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:22:04.715Z  INFO 36675 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/INVALID - Fetching booking
2025-11-04T12:22:04.715Z  INFO 36675 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-04T12:22:04.717Z ERROR 36675 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-04T12:22:04.717Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:04.717Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:22:04.717Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-04T12:22:06.217Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:22:06.228Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-04T12:22:06.229Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:22:06.240Z  INFO 36675 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:22:06.241Z  INFO 36675 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:22:06.252Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:22:06.284Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:22:06.284Z DEBUG 36675 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:22:06.285Z DEBUG 36675 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@679db65]
2025-11-04T12:22:06.285Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:22:06.285Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test Aveiro
2025-11-04T12:22:06.285Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:22:06.285Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.285Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.285Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:06.338Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:06.339Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:06.340Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:06.340Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:06.342Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 2/5
2025-11-04T12:22:06.344Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: daa22ccd-3361-4fd3-a1d3-e8528d53f291
2025-11-04T12:22:06.344Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:22:06.344Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@78000255]
2025-11-04T12:22:06.345Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:22:06.347Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:22:06.353Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:22:06.354Z DEBUG 36675 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:22:06.356Z DEBUG 36675 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@72c979c7]
2025-11-04T12:22:06.356Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:22:06.356Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2026-12-13, timeslot=Tarde, description=Test Porto
2025-11-04T12:22:06.357Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:22:06.357Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.358Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.358Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:06.411Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:06.411Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:06.412Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:06.413Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:06.416Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 0/5
2025-11-04T12:22:06.423Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f5ad07a8-4435-4956-9243-60842da13e06
2025-11-04T12:22:06.425Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:22:06.425Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3d3393d5]
2025-11-04T12:22:06.427Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:22:06.431Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:22:06.525Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:22:06.585Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:22:06.591Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:22:06.591Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:22:06.591Z DEBUG 36675 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:22:06.591Z DEBUG 36675 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:22:06.591Z  INFO 36675 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.592Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:22:06.592Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.592Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:22:06.592Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:06.599Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:06.600Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:22:06.604Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:06.606Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:22:06.607Z DEBUG 36675 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:22:06.607Z  INFO 36675 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:22:06.607Z  INFO 36675 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:22:06.610Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:06.610Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:22:06.613Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:06.644Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:06.645Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:06.645Z  INFO 36675 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:06.645Z  INFO 36675 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:06.646Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:06.646Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:22:06.647Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:06.649Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:22:06.649Z DEBUG 36675 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:22:06.649Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.650Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.650Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:06.961Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:06.962Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:06.963Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:06.963Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:06.964Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:06.965Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:22:06.966Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:08.640Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-04T12:22:08.694Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-04T12:22:08.694Z DEBUG 36675 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:22:08.695Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:22:08.695Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-04T12:22:08.699Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:08.699Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:22:08.702Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:10.220Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:22:10.236Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-04T12:22:10.237Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:22:10.256Z  INFO 36675 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:22:10.259Z  INFO 36675 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:22:10.274Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:22:10.301Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:22:10.301Z DEBUG 36675 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:22:10.302Z DEBUG 36675 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@72a3042b]
2025-11-04T12:22:10.302Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:22:10.302Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test Aveiro
2025-11-04T12:22:10.302Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:22:10.302Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.303Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.303Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:10.355Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:10.356Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:10.357Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:10.357Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:10.360Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 3/5
2025-11-04T12:22:10.366Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: dfd5f5b0-cc35-43e1-8aca-e76d42b83795
2025-11-04T12:22:10.368Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:22:10.368Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@47131a0d]
2025-11-04T12:22:10.370Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:22:10.372Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:22:10.378Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:22:10.379Z DEBUG 36675 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:22:10.381Z DEBUG 36675 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@72846c8a]
2025-11-04T12:22:10.382Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:22:10.382Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2026-12-13, timeslot=Tarde, description=Test Porto
2025-11-04T12:22:10.382Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:22:10.382Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.382Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.383Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:10.435Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:10.436Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:10.437Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:10.437Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:10.440Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 1/5
2025-11-04T12:22:10.446Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c682ed0e-8b70-4b52-9f79-176f81e47de0
2025-11-04T12:22:10.449Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:22:10.449Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@75583d7f]
2025-11-04T12:22:10.450Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:22:10.453Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:22:10.560Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:22:10.617Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:22:10.623Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:22:10.623Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:22:10.623Z DEBUG 36675 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:22:10.623Z DEBUG 36675 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:22:10.623Z  INFO 36675 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.623Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:22:10.623Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:22:10.623Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.623Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:10.626Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:10.626Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:22:10.630Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:10.632Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:22:10.633Z DEBUG 36675 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:22:10.633Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:22:10.633Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:22:10.636Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:10.636Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:22:10.638Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-04T12:22:10.640Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:10.675Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:10.676Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:10.676Z  INFO 36675 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:10.676Z  INFO 36675 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:10.677Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:10.677Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:22:10.679Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:10.685Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:22:10.686Z DEBUG 36675 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:22:10.687Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.688Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.689Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:10.691Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-04T12:22:10.692Z DEBUG 36675 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:22:10.695Z  INFO 36675 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:22:10.695Z  INFO 36675 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-04T12:22:10.707Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:10.707Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:22:10.711Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:10.741Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:10.741Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:10.741Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:10.741Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:10.742Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:10.742Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:22:10.742Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:12.235Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:22:12.251Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-04T12:22:12.252Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:22:12.260Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-04T12:22:12.326Z DEBUG 36675 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@544733a4, started on Tue Nov 04 12:21:51 WET 2025
2025-11-04T12:22:12.328Z  INFO 36675 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:22:12.394Z  INFO 36675 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-04T12:22:12.395Z  INFO 36675 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-04T12:22:12.395Z DEBUG 36675 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@51670993, started on Tue Nov 04 12:21:56 WET 2025
2025-11-04T12:22:12.396Z  INFO 36675 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:22:12.397Z  INFO 36675 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-04T12:22:12.397Z  INFO 36675 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-04T12:22:12.398Z  INFO 36675 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-04T12:22:12.400Z  INFO 36675 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-04T12:22:12.401Z  INFO 36675 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:22:12.401Z  INFO 36675 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-04T12:22:12.403Z  INFO 36675 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
