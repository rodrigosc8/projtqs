2025-11-05T14:48:16.915Z  INFO 56725 --- [main] p.r.h.s.unit.BookingControllerTest       : Starting BookingControllerTest using Java 21.0.9-ea with PID 56725 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:48:16.918Z  INFO 56725 --- [main] p.r.h.s.unit.BookingControllerTest       : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:48:16.934Z DEBUG 56725 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3f465ae
2025-11-05T14:48:17.591Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:48:17.684Z DEBUG 56725 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-05T14:48:17.700Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:48:17.734Z DEBUG 56725 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:48:17.785Z  INFO 56725 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-05T14:48:17.786Z  INFO 56725 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-05T14:48:17.786Z  INFO 56725 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-05T14:48:17.802Z  INFO 56725 --- [main] p.r.h.s.unit.BookingControllerTest       : Started BookingControllerTest in 1.271 seconds (process running for 3.694)
2025-11-05T14:48:17.841Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:17.888Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@47d6d2a7]
2025-11-05T14:48:17.892Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:17.892Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:17.893Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Validation error: Municipality is required
2025-11-05T14:48:17.920Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:17.920Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:17.933Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T14:48:17.940Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T14:48:17.942Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:17.942Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:17.948Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:48:17.950Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED}]
2025-11-05T14:48:17.950Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:48:17.951Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Error updating status: Not found
2025-11-05T14:48:17.951Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:17.951Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:17.955Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:48:17.956Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED, note=Done}]
2025-11-05T14:48:17.956Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:48:17.956Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:17.957Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@30ca1686]
2025-11-05T14:48:17.967Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:48:17.968Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=RECEIVED}]
2025-11-05T14:48:17.968Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:48:17.968Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Invalid request: Invalid transition
2025-11-05T14:48:17.969Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:17.969Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:17.972Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:48:17.973Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:48:17.973Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found
2025-11-05T14:48:17.974Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:17.974Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:17.978Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:48:17.979Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:48:17.979Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:17.979Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@55f0ba66]
2025-11-05T14:48:18.008Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:48:18.011Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:48:18.015Z  WARN 56725 --- [main] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-11-05T14:48:18.019Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:18.019Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing UNKNOWN instances]
2025-11-05T14:48:18.028Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T14:48:18.028Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T14:48:18.029Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Cannot cancel booking: Already cancelled
2025-11-05T14:48:18.029Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:18.029Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:18.033Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T14:48:18.033Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T14:48:18.034Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Booking not found: Not found
2025-11-05T14:48:18.034Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:18.034Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:18.039Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:18.041Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7e0a7b9e]
2025-11-05T14:48:18.041Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:18.041Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:18.042Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:18.042Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1936513a]
2025-11-05T14:48:18.049Z  INFO 56725 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.integration.BookingControllerITTest]: BookingControllerITTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:48:18.056Z  INFO 56725 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.integration.BookingControllerITTest
2025-11-05T14:48:18.060Z  INFO 56725 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T14:48:18.073Z  INFO 56725 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 56725 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:48:18.074Z  INFO 56725 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:48:18.075Z DEBUG 56725 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@33d57d51
2025-11-05T14:48:18.341Z  INFO 56725 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T14:48:18.366Z  INFO 56725 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 2 JPA repository interfaces.
2025-11-05T14:48:18.638Z  INFO 56725 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T14:48:18.712Z  INFO 56725 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-05T14:48:18.743Z  INFO 56725 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T14:48:18.848Z  INFO 56725 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T14:48:18.877Z  INFO 56725 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-05T14:48:19.114Z  INFO 56725 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T14:48:19.115Z  INFO 56725 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-05T14:48:19.140Z  WARN 56725 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T14:48:19.158Z  INFO 56725 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T14:48:19.876Z  INFO 56725 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T14:48:19.921Z  INFO 56725 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:48:20.109Z  INFO 56725 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-05T14:48:20.694Z  WARN 56725 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T14:48:20.726Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:48:20.739Z DEBUG 56725 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T14:48:20.746Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:48:20.752Z DEBUG 56725 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:48:20.824Z  INFO 56725 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T14:48:20.855Z  INFO 56725 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-05T14:48:20.855Z  INFO 56725 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-05T14:48:20.855Z  INFO 56725 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-05T14:48:20.863Z  INFO 56725 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.803 seconds (process running for 6.756)
2025-11-05T14:48:20.868Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:20.871Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1fb598e3]
2025-11-05T14:48:20.872Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:20.872Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:20.877Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:20.877Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:20.955Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:20.960Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:21.336Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:21.337Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:21.340Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:21.340Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:21.440Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:21.488Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: b50a6df4-60c2-4dd4-8366-1b35dcb792e9
2025-11-05T14:48:21.502Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.502Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3c261aaf]
2025-11-05T14:48:21.509Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:21.510Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4c07bc83]
2025-11-05T14:48:21.511Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:21.511Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:21.511Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:21.511Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.512Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.512Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:21.564Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:21.565Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:21.566Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:21.566Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:21.568Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:21.570Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d348e0f4-d543-4196-83df-b34d4fdc321b
2025-11-05T14:48:21.571Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.571Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1758a1b3]
2025-11-05T14:48:21.572Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:21.572Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2b1f112b]
2025-11-05T14:48:21.573Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:21.573Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:21.573Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:21.573Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.573Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.573Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:21.624Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:21.625Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:21.625Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:21.625Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:21.626Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:21.628Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f3f53d0d-8263-4973-9014-c908d04d2db8
2025-11-05T14:48:21.629Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.629Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5b5e995d]
2025-11-05T14:48:21.630Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:48:21.632Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:48:21.632Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-05T14:48:21.663Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.663Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:48:21.694Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:21.695Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6f67495e]
2025-11-05T14:48:21.695Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:21.695Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:21.695Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:21.695Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.696Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.696Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:21.747Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:21.747Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:21.748Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:21.748Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:21.749Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:21.751Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 004f6290-7b0a-4422-b9c8-48c9cb04d557
2025-11-05T14:48:21.752Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.752Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1b8f3d13]
2025-11-05T14:48:21.760Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:48:21.761Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:48:21.761Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-05T14:48:21.763Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-05T14:48:21.764Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.764Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:21.769Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:21.770Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6e2d74a4]
2025-11-05T14:48:21.770Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:21.770Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:21.770Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:21.770Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.771Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.771Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:21.823Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:21.823Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:21.823Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:21.823Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:21.824Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:21.826Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0049b1fb-215f-4748-8a83-05f3ebeade9d
2025-11-05T14:48:21.827Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.827Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@19cb4676]
2025-11-05T14:48:21.828Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:48:21.829Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-05T14:48:21.829Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:48:21.830Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: 0049b1fb-215f-4748-8a83-05f3ebeade9d, newStatus: IN_PROGRESS
2025-11-05T14:48:21.830Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 0049b1fb-215f-4748-8a83-05f3ebeade9d
2025-11-05T14:48:21.836Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-05T14:48:21.845Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.845Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5bd690a7]
2025-11-05T14:48:21.855Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:21.855Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3fe63f00]
2025-11-05T14:48:21.856Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:21.856Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:21.856Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:21.856Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.856Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.856Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:21.907Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:21.908Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:21.908Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:21.908Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:21.909Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:21.911Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 461c9649-ad4d-41f3-a73a-3df7b8d394a6
2025-11-05T14:48:21.912Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.912Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@27df3a2e]
2025-11-05T14:48:21.913Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:48:21.914Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:48:21.914Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 461c9649-ad4d-41f3-a73a-3df7b8d394a6
2025-11-05T14:48:21.916Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.916Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@192bf5f7]
2025-11-05T14:48:21.923Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:21.924Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@618df156]
2025-11-05T14:48:21.924Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:21.924Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:21.924Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:21.924Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.925Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.925Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:21.978Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:21.978Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:21.979Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:21.979Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:21.979Z  WARN 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-05T14:48:21.982Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-05T14:48:21.983Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.983Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:21.995Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:21.995Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@779565e1]
2025-11-05T14:48:21.996Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:21.996Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:21.996Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:21.996Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.996Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.996Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:22.050Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:22.051Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:22.053Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:22.053Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:22.057Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:22.063Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: a400715b-e0b9-4052-b5f9-08aedbc1b2c0
2025-11-05T14:48:22.064Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:22.065Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@75b425d6]
2025-11-05T14:48:22.067Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:48:22.068Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-05T14:48:22.069Z  WARN 56725 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-05T14:48:22.076Z  INFO 56725 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:48:22.079Z  INFO 56725 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-05T14:48:22.081Z  INFO 56725 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T14:48:22.091Z  INFO 56725 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 56725 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:48:22.091Z  INFO 56725 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:48:22.092Z DEBUG 56725 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@209d6adf
2025-11-05T14:48:22.179Z  INFO 56725 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T14:48:22.185Z  INFO 56725 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-05T14:48:22.230Z  INFO 56725 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T14:48:22.231Z  INFO 56725 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T14:48:22.236Z  INFO 56725 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T14:48:22.236Z  INFO 56725 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-05T14:48:22.237Z  INFO 56725 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T14:48:22.237Z  INFO 56725 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-05T14:48:22.237Z  WARN 56725 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T14:48:22.238Z  INFO 56725 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T14:48:22.266Z  INFO 56725 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T14:48:22.272Z  INFO 56725 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:48:22.312Z  WARN 56725 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T14:48:22.323Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:48:22.330Z DEBUG 56725 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T14:48:22.333Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:48:22.336Z DEBUG 56725 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:48:22.357Z  INFO 56725 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T14:48:22.367Z  INFO 56725 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.286 seconds (process running for 8.259)
2025-11-05T14:48:22.717Z  INFO 56725 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:48:22.720Z  INFO 56725 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:48:22.722Z  INFO 56725 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T14:48:22.733Z  INFO 56725 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 56725 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:48:22.733Z  INFO 56725 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:48:22.808Z  INFO 56725 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T14:48:22.812Z  INFO 56725 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-05T14:48:22.950Z  INFO 56725 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-05T14:48:22.962Z  INFO 56725 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-05T14:48:22.962Z  INFO 56725 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-05T14:48:22.995Z  INFO 56725 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-05T14:48:22.995Z  INFO 56725 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 261 ms
2025-11-05T14:48:23.039Z  INFO 56725 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T14:48:23.040Z  INFO 56725 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T14:48:23.044Z  INFO 56725 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T14:48:23.045Z  INFO 56725 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-05T14:48:23.045Z  INFO 56725 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T14:48:23.046Z  INFO 56725 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-05T14:48:23.046Z  WARN 56725 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T14:48:23.046Z  INFO 56725 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T14:48:23.068Z  INFO 56725 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T14:48:23.072Z  INFO 56725 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:48:23.099Z  WARN 56725 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T14:48:23.109Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:48:23.117Z DEBUG 56725 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T14:48:23.120Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:48:23.122Z DEBUG 56725 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:48:23.140Z  INFO 56725 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T14:48:23.189Z  INFO 56725 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-05T14:48:23.191Z  INFO 56725 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.469 seconds (process running for 9.083)
2025-11-05T14:48:23.222Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:48:24.382Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:48:24.404Z  INFO 56725 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:48:24.405Z  INFO 56725 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:48:24.410Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:48:24.508Z  INFO 56725 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-05T14:48:24.508Z  INFO 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-05T14:48:24.508Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-05T14:48:24.508Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-05T14:48:24.508Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-05T14:48:24.509Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@a9fb54f
2025-11-05T14:48:24.509Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@61edd0cb
2025-11-05T14:48:24.509Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-05T14:48:24.509Z  INFO 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-05T14:48:24.512Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:48:24.513Z DEBUG 56725 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:24.515Z DEBUG 56725 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2372aab8]
2025-11-05T14:48:24.515Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:24.515Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:24.515Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:24.515Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.516Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.516Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:24.570Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:24.570Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:24.572Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:24.572Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:24.583Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:24.590Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: dbc95640-bb8a-49a5-8cf6-4ec198c6f97b
2025-11-05T14:48:24.594Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:24.594Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@56785a68]
2025-11-05T14:48:24.598Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:48:24.601Z  INFO 56725 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: dbc95640-bb8a-49a5-8cf6-4ec198c6f97b
2025-11-05T14:48:24.608Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:48:24.614Z  INFO 56725 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:48:24.615Z  INFO 56725 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:48:24.621Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:48:24.650Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:48:24.650Z DEBUG 56725 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:24.651Z DEBUG 56725 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@23433071]
2025-11-05T14:48:24.651Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:24.651Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:24.651Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:24.651Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.651Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.651Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:24.705Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:24.706Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:24.707Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:24.707Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:24.710Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:24.716Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 54e35fd8-9c21-47cf-9202-069e8a008b24
2025-11-05T14:48:24.717Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:24.717Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5d9f7a2f]
2025-11-05T14:48:24.718Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:48:24.721Z  INFO 56725 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 54e35fd8-9c21-47cf-9202-069e8a008b24
2025-11-05T14:48:24.737Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:48:24.747Z  INFO 56725 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:48:24.748Z  INFO 56725 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:48:24.752Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:48:24.772Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:48:24.773Z DEBUG 56725 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:24.773Z DEBUG 56725 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1d2e8ca3]
2025-11-05T14:48:24.773Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:24.773Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:24.774Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:24.774Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.774Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.774Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:24.827Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:24.828Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:24.829Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:24.829Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:24.833Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:24.841Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: cb7b5bc7-5e9c-4de4-93c1-ec7ef340a15e
2025-11-05T14:48:24.843Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:24.844Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@63cc9ae9]
2025-11-05T14:48:24.846Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:48:24.849Z  INFO 56725 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-05T14:48:24.857Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:48:24.858Z DEBUG 56725 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:24.861Z DEBUG 56725 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@68ec4925]
2025-11-05T14:48:24.861Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:24.862Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:24.862Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:24.862Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.863Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.864Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:24.917Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:24.917Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:24.918Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:24.918Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:24.921Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:24.928Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f3a39e5d-1524-4961-b928-9dc45c5a5e28
2025-11-05T14:48:24.930Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:24.930Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2716a073]
2025-11-05T14:48:24.932Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:48:24.935Z  INFO 56725 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-05T14:48:24.949Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:48:24.968Z  INFO 56725 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:48:24.970Z  INFO 56725 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:48:24.980Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:48:25.009Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:48:25.009Z DEBUG 56725 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:25.009Z DEBUG 56725 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@34e5db22]
2025-11-05T14:48:25.010Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:25.010Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:25.010Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:25.010Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:25.010Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:25.010Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:25.062Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:25.063Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:25.064Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:25.065Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:25.068Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:25.074Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 020a318c-9380-4635-b986-b10a65b54e75
2025-11-05T14:48:25.076Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:25.076Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7b1f39f5]
2025-11-05T14:48:25.077Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:48:25.079Z  INFO 56725 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-05T14:48:25.082Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:48:25.082Z DEBUG 56725 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:25.084Z DEBUG 56725 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@51a50e61]
2025-11-05T14:48:25.084Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:25.084Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:25.084Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:25.084Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:25.084Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:25.085Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:25.138Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:25.139Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:25.140Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:25.140Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:25.142Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:25.145Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 200d488f-7fac-4ad3-a02c-75ffdb4da8a5
2025-11-05T14:48:25.146Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:25.146Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1e5fe01e]
2025-11-05T14:48:25.147Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:48:25.149Z  INFO 56725 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-05T14:48:25.155Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:48:25.161Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-05T14:48:25.202Z DEBUG 56725 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3f465ae, started on Wed Nov 05 14:48:16 WET 2025
2025-11-05T14:48:25.204Z DEBUG 56725 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@33d57d51, started on Wed Nov 05 14:48:18 WET 2025
2025-11-05T14:48:25.205Z  INFO 56725 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:48:25.284Z  INFO 56725 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-05T14:48:25.285Z  INFO 56725 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-05T14:48:25.285Z DEBUG 56725 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@209d6adf, started on Wed Nov 05 14:48:22 WET 2025
2025-11-05T14:48:25.286Z  INFO 56725 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:48:25.286Z  INFO 56725 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-05T14:48:25.287Z  INFO 56725 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-05T14:48:25.288Z  INFO 56725 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-05T14:48:25.289Z  INFO 56725 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-05T14:48:25.290Z  INFO 56725 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:48:25.291Z  INFO 56725 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-05T14:48:25.292Z  INFO 56725 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-05T14:49:00.848Z  INFO 58221 --- [main] p.r.h.s.unit.BookingControllerTest       : Starting BookingControllerTest using Java 21.0.9-ea with PID 58221 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:49:00.849Z  INFO 58221 --- [main] p.r.h.s.unit.BookingControllerTest       : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:49:00.863Z DEBUG 58221 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3f465ae
2025-11-05T14:49:01.467Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:49:01.547Z DEBUG 58221 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-05T14:49:01.564Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:49:01.601Z DEBUG 58221 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:49:01.654Z  INFO 58221 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-05T14:49:01.654Z  INFO 58221 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-05T14:49:01.655Z  INFO 58221 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-05T14:49:01.673Z  INFO 58221 --- [main] p.r.h.s.unit.BookingControllerTest       : Started BookingControllerTest in 1.21 seconds (process running for 3.482)
2025-11-05T14:49:01.711Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:01.762Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@65289e33]
2025-11-05T14:49:01.766Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:01.766Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:01.767Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Validation error: Municipality is required
2025-11-05T14:49:01.793Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.793Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:01.805Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T14:49:01.810Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T14:49:01.811Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.811Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:01.816Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:49:01.817Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED}]
2025-11-05T14:49:01.818Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:49:01.818Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Error updating status: Not found
2025-11-05T14:49:01.818Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.819Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:01.823Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:49:01.824Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED, note=Done}]
2025-11-05T14:49:01.824Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:49:01.824Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.825Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@26107e6d]
2025-11-05T14:49:01.835Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:49:01.835Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=RECEIVED}]
2025-11-05T14:49:01.836Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:49:01.836Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Invalid request: Invalid transition
2025-11-05T14:49:01.836Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.836Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:01.840Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:49:01.841Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:49:01.841Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found
2025-11-05T14:49:01.842Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.842Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:01.847Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:49:01.847Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:49:01.848Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.848Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@41a7445f]
2025-11-05T14:49:01.875Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:01.877Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:01.881Z  WARN 58221 --- [main] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-11-05T14:49:01.885Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.885Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing UNKNOWN instances]
2025-11-05T14:49:01.894Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T14:49:01.895Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T14:49:01.895Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Cannot cancel booking: Already cancelled
2025-11-05T14:49:01.895Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.895Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:01.899Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T14:49:01.899Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T14:49:01.900Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Booking not found: Not found
2025-11-05T14:49:01.900Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.900Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:01.904Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:01.905Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@73852c7c]
2025-11-05T14:49:01.905Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:01.905Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:01.906Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.906Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4b6fc615]
2025-11-05T14:49:01.912Z  INFO 58221 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.integration.BookingControllerITTest]: BookingControllerITTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:49:01.918Z  INFO 58221 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.integration.BookingControllerITTest
2025-11-05T14:49:01.922Z  INFO 58221 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T14:49:01.935Z  INFO 58221 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 58221 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:49:01.935Z  INFO 58221 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:49:01.936Z DEBUG 58221 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6c86938f
2025-11-05T14:49:02.183Z  INFO 58221 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T14:49:02.208Z  INFO 58221 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 2 JPA repository interfaces.
2025-11-05T14:49:02.447Z  INFO 58221 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T14:49:02.486Z  INFO 58221 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-05T14:49:02.518Z  INFO 58221 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T14:49:02.610Z  INFO 58221 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T14:49:02.633Z  INFO 58221 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-05T14:49:02.838Z  INFO 58221 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T14:49:02.840Z  INFO 58221 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-05T14:49:02.860Z  WARN 58221 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T14:49:02.879Z  INFO 58221 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T14:49:03.522Z  INFO 58221 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T14:49:03.564Z  INFO 58221 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:49:03.718Z  INFO 58221 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-05T14:49:04.268Z  WARN 58221 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T14:49:04.293Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:49:04.314Z DEBUG 58221 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T14:49:04.330Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:49:04.339Z DEBUG 58221 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:49:04.424Z  INFO 58221 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T14:49:04.453Z  INFO 58221 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-05T14:49:04.454Z  INFO 58221 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-05T14:49:04.454Z  INFO 58221 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-05T14:49:04.462Z  INFO 58221 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.54 seconds (process running for 6.271)
2025-11-05T14:49:04.468Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:04.471Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2e84a57b]
2025-11-05T14:49:04.472Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:04.472Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:04.477Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:04.477Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:04.534Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:04.539Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:04.841Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:04.842Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:04.848Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:04.848Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:04.945Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:04.992Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: a98eada8-fbc8-461f-bc4c-7532ea2108fe
2025-11-05T14:49:05.005Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.006Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2a971c]
2025-11-05T14:49:05.010Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:05.011Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@58390e40]
2025-11-05T14:49:05.011Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:05.011Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:05.011Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:05.011Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.012Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.012Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:05.068Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:05.068Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:05.069Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:05.069Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:05.071Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:05.073Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0acdb8d7-61b9-4c3b-9e37-75a98150fe77
2025-11-05T14:49:05.074Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.074Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@228db6f5]
2025-11-05T14:49:05.075Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:05.076Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@35d0b36d]
2025-11-05T14:49:05.076Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:05.076Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:05.076Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:05.076Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.076Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.076Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:05.132Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:05.132Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:05.133Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:05.133Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:05.134Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:05.136Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f5ecb15f-59db-4aaf-9c0e-d93ab1d1855b
2025-11-05T14:49:05.137Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.137Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1a17b688]
2025-11-05T14:49:05.138Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:05.140Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:05.140Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-05T14:49:05.169Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.169Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:49:05.201Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:05.202Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@72c5e627]
2025-11-05T14:49:05.202Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:05.202Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:05.202Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:05.202Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.202Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.203Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:05.259Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:05.259Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:05.260Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:05.260Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:05.261Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:05.263Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 9542d51f-cd45-4664-be38-0fd5209f44d5
2025-11-05T14:49:05.264Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.264Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7a75660d]
2025-11-05T14:49:05.274Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:49:05.274Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:49:05.274Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-05T14:49:05.277Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-05T14:49:05.277Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.277Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:05.283Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:05.283Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@12ecb9bc]
2025-11-05T14:49:05.283Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:05.283Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:05.284Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:05.284Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.284Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.284Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:05.341Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:05.342Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:05.342Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:05.342Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:05.343Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:05.345Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 55371bc6-4460-48db-a3ef-896764588f10
2025-11-05T14:49:05.346Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.346Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@501ce93e]
2025-11-05T14:49:05.347Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:49:05.348Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-05T14:49:05.348Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:49:05.348Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: 55371bc6-4460-48db-a3ef-896764588f10, newStatus: IN_PROGRESS
2025-11-05T14:49:05.349Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 55371bc6-4460-48db-a3ef-896764588f10
2025-11-05T14:49:05.354Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-05T14:49:05.362Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.362Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1c4689bf]
2025-11-05T14:49:05.371Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:05.372Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@73e73d8a]
2025-11-05T14:49:05.372Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:05.372Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:05.372Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:05.372Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.372Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.373Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:05.429Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:05.430Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:05.430Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:05.430Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:05.431Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:05.433Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 4694f322-d446-4f7f-94fe-8e826f9ea8b3
2025-11-05T14:49:05.434Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.434Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5220a012]
2025-11-05T14:49:05.435Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:49:05.435Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:49:05.435Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 4694f322-d446-4f7f-94fe-8e826f9ea8b3
2025-11-05T14:49:05.437Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.438Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@39621d2]
2025-11-05T14:49:05.445Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:05.446Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@51cf231c]
2025-11-05T14:49:05.446Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:05.446Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:05.446Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:05.446Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.446Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.447Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:05.502Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:05.503Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:05.503Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:05.503Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:05.503Z  WARN 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-05T14:49:05.504Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-05T14:49:05.505Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.505Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:05.510Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:05.511Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6b8c2238]
2025-11-05T14:49:05.511Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:05.511Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:05.511Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:05.511Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.511Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.512Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:05.569Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:05.570Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:05.571Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:05.571Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:05.576Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:05.584Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f686617a-79d3-4168-9f6f-e0efee352829
2025-11-05T14:49:05.585Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.586Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@46f87427]
2025-11-05T14:49:05.588Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:49:05.589Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-05T14:49:05.591Z  WARN 58221 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-05T14:49:05.598Z  INFO 58221 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:49:05.602Z  INFO 58221 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-05T14:49:05.605Z  INFO 58221 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T14:49:05.616Z  INFO 58221 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 58221 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:49:05.616Z  INFO 58221 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:49:05.617Z DEBUG 58221 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@c37f23c
2025-11-05T14:49:05.690Z  INFO 58221 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T14:49:05.694Z  INFO 58221 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-05T14:49:05.746Z  INFO 58221 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T14:49:05.747Z  INFO 58221 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T14:49:05.752Z  INFO 58221 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T14:49:05.752Z  INFO 58221 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-05T14:49:05.753Z  INFO 58221 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T14:49:05.753Z  INFO 58221 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-05T14:49:05.753Z  WARN 58221 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T14:49:05.753Z  INFO 58221 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T14:49:05.776Z  INFO 58221 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T14:49:05.782Z  INFO 58221 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:49:05.828Z  WARN 58221 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T14:49:05.839Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:49:05.845Z DEBUG 58221 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T14:49:05.848Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:49:05.851Z DEBUG 58221 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:49:05.871Z  INFO 58221 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T14:49:05.880Z  INFO 58221 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.276 seconds (process running for 7.689)
2025-11-05T14:49:06.162Z  INFO 58221 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:49:06.165Z  INFO 58221 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:49:06.166Z  INFO 58221 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T14:49:06.175Z  INFO 58221 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 58221 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:49:06.176Z  INFO 58221 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:49:06.244Z  INFO 58221 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T14:49:06.248Z  INFO 58221 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-05T14:49:06.370Z  INFO 58221 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-05T14:49:06.381Z  INFO 58221 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-05T14:49:06.381Z  INFO 58221 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-05T14:49:06.413Z  INFO 58221 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-05T14:49:06.413Z  INFO 58221 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 237 ms
2025-11-05T14:49:06.453Z  INFO 58221 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T14:49:06.454Z  INFO 58221 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T14:49:06.457Z  INFO 58221 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T14:49:06.458Z  INFO 58221 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-05T14:49:06.458Z  INFO 58221 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T14:49:06.458Z  INFO 58221 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-05T14:49:06.459Z  WARN 58221 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T14:49:06.459Z  INFO 58221 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T14:49:06.483Z  INFO 58221 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T14:49:06.487Z  INFO 58221 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:49:06.512Z  WARN 58221 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T14:49:06.522Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:49:06.530Z DEBUG 58221 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T14:49:06.533Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:49:06.536Z DEBUG 58221 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:49:06.554Z  INFO 58221 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T14:49:06.595Z  INFO 58221 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-05T14:49:06.597Z  INFO 58221 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.431 seconds (process running for 8.405)
2025-11-05T14:49:06.629Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:49:07.827Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-05T14:49:07.930Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-05T14:49:07.994Z  INFO 58221 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-05T14:49:07.995Z  INFO 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-05T14:49:07.995Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-05T14:49:07.995Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-05T14:49:07.995Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-05T14:49:07.995Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@20c63cab
2025-11-05T14:49:07.995Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@4e6b95b4
2025-11-05T14:49:07.995Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-05T14:49:07.995Z  INFO 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-11-05T14:49:07.998Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:49:07.999Z DEBUG 58221 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:49:08.000Z  INFO 58221 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:08.000Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:08.000Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:08.058Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:08.059Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:08.061Z  INFO 58221 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:08.061Z  INFO 58221 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:08.064Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:08.065Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:49:08.086Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:08.091Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:49:08.092Z DEBUG 58221 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:49:08.092Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:08.092Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:08.093Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:08.151Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:08.152Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:08.153Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:08.153Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:08.154Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:08.155Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:49:08.157Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:09.989Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-05T14:49:10.007Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-05T14:49:10.021Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manh
2025-11-05T14:49:10.037Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colcho e moblia velha
2025-11-05T14:49:10.077Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:49:10.078Z DEBUG 58221 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:10.081Z DEBUG 58221 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4310c69a]
2025-11-05T14:49:10.081Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:10.081Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:10.082Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:10.082Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:10.082Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:10.082Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:10.144Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:10.145Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:10.146Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:10.146Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:10.153Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:10.157Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ecb1eb7e-bc3a-4691-8f09-18f2563e9de1
2025-11-05T14:49:10.161Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:10.161Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1390a4ec]
2025-11-05T14:49:10.163Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:49:12.088Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-05T14:49:12.099Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-05T14:49:12.101Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:49:12.130Z  INFO 58221 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:49:12.131Z  INFO 58221 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:49:12.136Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:49:12.169Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:49:12.169Z DEBUG 58221 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:12.170Z DEBUG 58221 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@785d5186]
2025-11-05T14:49:12.170Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:12.170Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:12.170Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:12.170Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:12.170Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:12.170Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:12.227Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:12.227Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:12.228Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:12.228Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:12.231Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:12.237Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 8e13607a-ecdd-49db-b2aa-b3f1a8b43ced
2025-11-05T14:49:12.238Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:12.239Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@37a7bac6]
2025-11-05T14:49:12.240Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:49:12.248Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 8e13607a-ecdd-49db-b2aa-b3f1a8b43ced
2025-11-05T14:49:12.366Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-05T14:49:12.406Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-05T14:49:12.436Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: 8e13607a-ecdd-49db-b2aa-b3f1a8b43ced
2025-11-05T14:49:12.481Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/8e13607a-ecdd-49db-b2aa-b3f1a8b43ced", parameters={}
2025-11-05T14:49:12.482Z DEBUG 58221 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:49:12.483Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:49:12.483Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 8e13607a-ecdd-49db-b2aa-b3f1a8b43ced
2025-11-05T14:49:12.486Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:12.487Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3f825da5]
2025-11-05T14:49:12.489Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:13.985Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-05T14:49:13.996Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-05T14:49:14.009Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: 8e13607a-ecdd-49db-b2aa-b3f1a8b43ced
2025-11-05T14:49:14.010Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:49:14.027Z  INFO 58221 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:49:14.030Z  INFO 58221 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:49:14.043Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:49:14.074Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:49:14.074Z DEBUG 58221 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:14.075Z DEBUG 58221 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@61a11d80]
2025-11-05T14:49:14.075Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:14.075Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:14.075Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:14.075Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:14.075Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:14.075Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:14.134Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:14.135Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:14.135Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:14.136Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:14.139Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:14.145Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: b2ad6e7d-ef1f-4353-abb2-eb42b1ca74c7
2025-11-05T14:49:14.147Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:14.148Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1f3fff4d]
2025-11-05T14:49:14.149Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:49:14.151Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: b2ad6e7d-ef1f-4353-abb2-eb42b1ca74c7
2025-11-05T14:49:14.254Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-05T14:49:14.295Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-05T14:49:14.321Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-05T14:49:14.360Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-05T14:49:14.361Z DEBUG 58221 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:49:14.361Z  INFO 58221 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:49:14.361Z  INFO 58221 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-05T14:49:14.363Z ERROR 58221 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-05T14:49:14.364Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:14.364Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:14.364Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-05T14:49:15.862Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-05T14:49:15.873Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-05T14:49:15.874Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:49:15.894Z  INFO 58221 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:49:15.896Z  INFO 58221 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:49:15.903Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:49:15.933Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:49:15.933Z DEBUG 58221 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:15.934Z DEBUG 58221 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@458e0128]
2025-11-05T14:49:15.934Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:15.934Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:15.934Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:15.934Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:15.934Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:15.935Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:15.992Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:15.992Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:15.993Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:15.994Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:15.996Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:16.003Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0228d64b-5659-4006-89af-0c3c56cd6d46
2025-11-05T14:49:16.005Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:16.005Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3bb4745b]
2025-11-05T14:49:16.007Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:49:16.010Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-05T14:49:16.019Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:49:16.020Z DEBUG 58221 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:16.022Z DEBUG 58221 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7ee93d5d]
2025-11-05T14:49:16.022Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:16.022Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:16.022Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:16.023Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:16.023Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:16.023Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:16.080Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:16.081Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:16.082Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:16.082Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:16.085Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:16.089Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 13224e81-47e7-4417-b4a4-8832cd5de355
2025-11-05T14:49:16.090Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:16.090Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3113d6cb]
2025-11-05T14:49:16.090Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:49:16.092Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-05T14:49:16.212Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-05T14:49:16.279Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-05T14:49:16.284Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:49:16.285Z DEBUG 58221 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:49:16.285Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T14:49:16.285Z  INFO 58221 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:16.285Z DEBUG 58221 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:16.285Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:16.285Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:16.286Z  INFO 58221 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:16.286Z  INFO 58221 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T14:49:16.293Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:16.294Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:49:16.299Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:16.301Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T14:49:16.302Z DEBUG 58221 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:16.302Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:16.302Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T14:49:16.305Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:16.305Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:49:16.308Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:16.343Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:16.344Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:16.345Z  INFO 58221 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:16.345Z  INFO 58221 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:16.345Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:16.346Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:49:16.347Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:16.354Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:49:16.355Z DEBUG 58221 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:49:16.356Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:16.356Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:16.357Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:16.414Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:16.415Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:16.416Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:16.416Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:16.418Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:16.419Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:49:16.421Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:18.335Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-05T14:49:18.388Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-05T14:49:18.388Z DEBUG 58221 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:18.389Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:18.389Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-05T14:49:18.393Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:18.394Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:49:18.396Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:19.917Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-05T14:49:19.934Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-05T14:49:19.935Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:49:19.952Z  INFO 58221 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:49:19.954Z  INFO 58221 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:49:19.966Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:49:19.991Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:49:19.991Z DEBUG 58221 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:19.992Z DEBUG 58221 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2f2ec8ba]
2025-11-05T14:49:19.992Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:19.992Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:19.992Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:19.992Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:19.992Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:19.992Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:20.048Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:20.049Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:20.050Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:20.050Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:20.053Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:20.061Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 2609fa5c-6253-4619-b495-dff038558049
2025-11-05T14:49:20.063Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:20.063Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@21149159]
2025-11-05T14:49:20.064Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:49:20.066Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-05T14:49:20.070Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:49:20.070Z DEBUG 58221 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:20.072Z DEBUG 58221 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@406df123]
2025-11-05T14:49:20.072Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:20.072Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:20.073Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:20.073Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:20.073Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:20.073Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:20.132Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:20.133Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:20.134Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:20.134Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:20.137Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:20.141Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 8b9800ee-f62d-4666-ad56-64036c7ab73d
2025-11-05T14:49:20.143Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:20.143Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@40e603f]
2025-11-05T14:49:20.145Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:49:20.147Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-05T14:49:20.236Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-05T14:49:20.299Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-05T14:49:20.305Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:49:20.305Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T14:49:20.306Z DEBUG 58221 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:20.306Z DEBUG 58221 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:49:20.306Z  INFO 58221 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:20.306Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:20.306Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T14:49:20.306Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:20.306Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:20.309Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:20.309Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:49:20.313Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:20.314Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-05T14:49:20.315Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T14:49:20.316Z DEBUG 58221 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:20.316Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:20.316Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T14:49:20.319Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:20.320Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:49:20.323Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:20.354Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-05T14:49:20.354Z DEBUG 58221 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:20.355Z  INFO 58221 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:20.355Z  INFO 58221 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-05T14:49:20.359Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:20.359Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:49:20.361Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:20.361Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:20.362Z  INFO 58221 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:20.362Z  INFO 58221 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:20.362Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:20.362Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:49:20.363Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:20.364Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:20.372Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:49:20.372Z DEBUG 58221 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:49:20.372Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:20.372Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:20.373Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:20.430Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:20.430Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:20.432Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:20.432Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:20.433Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:20.434Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:49:20.435Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:21.856Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-05T14:49:21.873Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-05T14:49:21.875Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:49:21.894Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-05T14:49:21.942Z DEBUG 58221 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3f465ae, started on Wed Nov 05 14:49:00 WET 2025
2025-11-05T14:49:21.943Z DEBUG 58221 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6c86938f, started on Wed Nov 05 14:49:01 WET 2025
2025-11-05T14:49:21.944Z  INFO 58221 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:49:22.014Z  INFO 58221 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-05T14:49:22.015Z  INFO 58221 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-05T14:49:22.016Z DEBUG 58221 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@c37f23c, started on Wed Nov 05 14:49:05 WET 2025
2025-11-05T14:49:22.017Z  INFO 58221 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:49:22.017Z  INFO 58221 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-05T14:49:22.018Z  INFO 58221 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-05T14:49:22.018Z  INFO 58221 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-05T14:49:22.020Z  INFO 58221 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-05T14:49:22.021Z  INFO 58221 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:49:22.022Z  INFO 58221 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-05T14:49:22.023Z  INFO 58221 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-05T14:49:41.550Z  INFO 59560 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Starting Hw1TqsApplication using Java 21.0.9-ea with PID 59560 (/home/rodrigo-costa/Documentos/projtqs/api/target/classes started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:49:41.551Z  INFO 59560 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:49:41.571Z  INFO 59560 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-05T14:49:41.571Z  INFO 59560 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-05T14:49:41.903Z  INFO 59560 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T14:49:41.933Z  INFO 59560 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-11-05T14:49:42.175Z  INFO 59560 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-05T14:49:42.183Z  INFO 59560 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-05T14:49:42.183Z  INFO 59560 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-05T14:49:42.201Z  INFO 59560 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-05T14:49:42.202Z  INFO 59560 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 630 ms
2025-11-05T14:49:42.276Z  INFO 59560 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T14:49:42.295Z  INFO 59560 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-05T14:49:42.308Z  INFO 59560 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T14:49:42.416Z  INFO 59560 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T14:49:42.429Z  INFO 59560 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-05T14:49:42.516Z  INFO 59560 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T14:49:42.516Z  INFO 59560 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-05T14:49:42.527Z  WARN 59560 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T14:49:42.537Z  INFO 59560 --- [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T14:49:42.937Z  INFO 59560 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T14:49:42.961Z  INFO 59560 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:49:43.088Z  INFO 59560 --- [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-05T14:49:43.403Z  WARN 59560 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T14:49:43.454Z DEBUG 59560 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:49:43.473Z DEBUG 59560 --- [restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T14:49:43.486Z DEBUG 59560 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:49:43.508Z DEBUG 59560 --- [restartedMain] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:49:43.569Z  INFO 59560 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T14:49:43.599Z  INFO 59560 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-11-05T14:49:43.613Z  INFO 59560 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-05T14:49:43.619Z  INFO 59560 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Started Hw1TqsApplication in 2.263 seconds (process running for 2.427)
2025-11-05T14:49:48.299Z  INFO 59560 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-05T14:49:48.300Z  INFO 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-05T14:49:48.300Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-05T14:49:48.300Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-05T14:49:48.300Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-05T14:49:48.300Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@24256e71
2025-11-05T14:49:48.301Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@513c8aff
2025-11-05T14:49:48.301Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-05T14:49:48.301Z  INFO 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-05T14:49:48.305Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/swagger-ui/index.html", parameters={}
2025-11-05T14:49:48.309Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-05T14:49:48.322Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.337Z DEBUG 59560 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/swagger-ui/swagger-ui.css", parameters={}
2025-11-05T14:49:48.338Z DEBUG 59560 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/swagger-ui/index.css", parameters={}
2025-11-05T14:49:48.338Z DEBUG 59560 --- [http-nio-8080-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-05T14:49:48.338Z DEBUG 59560 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2025-11-05T14:49:48.338Z DEBUG 59560 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/swagger-ui/swagger-initializer.js", parameters={}
2025-11-05T14:49:48.338Z DEBUG 59560 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2025-11-05T14:49:48.339Z DEBUG 59560 --- [http-nio-8080-exec-5] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-05T14:49:48.339Z DEBUG 59560 --- [http-nio-8080-exec-3] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-05T14:49:48.339Z DEBUG 59560 --- [http-nio-8080-exec-6] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-05T14:49:48.339Z DEBUG 59560 --- [http-nio-8080-exec-4] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-05T14:49:48.341Z DEBUG 59560 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.342Z DEBUG 59560 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.343Z DEBUG 59560 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.362Z DEBUG 59560 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.364Z DEBUG 59560 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.499Z DEBUG 59560 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/v3/api-docs/swagger-config", parameters={}
2025-11-05T14:49:48.499Z DEBUG 59560 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/swagger-ui/favicon-32x32.png", parameters={}
2025-11-05T14:49:48.500Z DEBUG 59560 --- [http-nio-8080-exec-8] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-05T14:49:48.500Z DEBUG 59560 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2025-11-05T14:49:48.502Z DEBUG 59560 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.510Z DEBUG 59560 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2025-11-05T14:49:48.519Z DEBUG 59560 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2025-11-05T14:49:48.521Z DEBUG 59560 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.527Z DEBUG 59560 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/v3/api-docs", parameters={}
2025-11-05T14:49:48.528Z DEBUG 59560 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-11-05T14:49:48.677Z  INFO 59560 --- [http-nio-8080-exec-9] o.springdoc.api.AbstractOpenApiResource  : Init duration for springdoc-openapi is: 140 ms
2025-11-05T14:49:48.689Z DEBUG 59560 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2025-11-05T14:49:48.689Z DEBUG 59560 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 49, 46, 48, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-11-05T14:49:48.690Z DEBUG 59560 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:51:48.122Z  INFO 59560 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-05T14:51:48.130Z  INFO 59560 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-05T14:51:48.138Z  INFO 59560 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:51:48.150Z  WARN 59560 --- [SpringApplicationShutdownHook] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-05T14:51:48.151Z  INFO 59560 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-05T14:51:48.152Z  INFO 59560 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-05T14:56:39.836Z  INFO 62130 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Starting Hw1TqsApplication using Java 21.0.9-ea with PID 62130 (/home/rodrigo-costa/Documentos/projtqs/api/target/classes started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:56:39.837Z  INFO 62130 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:56:39.855Z  INFO 62130 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-05T14:56:39.856Z  INFO 62130 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-05T14:56:40.181Z  INFO 62130 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T14:56:40.207Z  INFO 62130 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 21 ms. Found 2 JPA repository interfaces.
2025-11-05T14:56:40.450Z  INFO 62130 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-05T14:56:40.458Z  INFO 62130 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-05T14:56:40.458Z  INFO 62130 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-05T14:56:40.475Z  INFO 62130 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-05T14:56:40.475Z  INFO 62130 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 619 ms
2025-11-05T14:56:40.550Z  INFO 62130 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T14:56:40.569Z  INFO 62130 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-05T14:56:40.584Z  INFO 62130 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T14:56:40.691Z  INFO 62130 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T14:56:40.704Z  INFO 62130 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-05T14:56:40.788Z  INFO 62130 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T14:56:40.789Z  INFO 62130 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-05T14:56:40.799Z  WARN 62130 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T14:56:40.809Z  INFO 62130 --- [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T14:56:41.207Z  INFO 62130 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T14:56:41.232Z  INFO 62130 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:56:41.344Z  INFO 62130 --- [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-05T14:56:41.668Z  WARN 62130 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T14:56:41.718Z DEBUG 62130 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:56:41.738Z DEBUG 62130 --- [restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T14:56:41.751Z DEBUG 62130 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:56:41.772Z DEBUG 62130 --- [restartedMain] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:56:41.831Z  INFO 62130 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T14:56:41.860Z  INFO 62130 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-11-05T14:56:41.873Z  INFO 62130 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-05T14:56:41.878Z  INFO 62130 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Started Hw1TqsApplication in 2.237 seconds (process running for 2.4)
2025-11-05T14:56:47.134Z  INFO 62130 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-05T14:56:47.134Z  INFO 62130 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-05T14:56:47.134Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-05T14:56:47.135Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-05T14:56:47.135Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-05T14:56:47.135Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@24256e71
2025-11-05T14:56:47.136Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@513c8aff
2025-11-05T14:56:47.136Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-05T14:56:47.136Z  INFO 62130 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-11-05T14:56:47.144Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:56:47.148Z DEBUG 62130 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:56:47.156Z  INFO 62130 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:56:47.208Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:56:47.215Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:56:47.482Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:56:47.484Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:56:47.497Z  INFO 62130 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:56:47.497Z  INFO 62130 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:56:47.502Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:56:47.502Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:56:47.508Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:56:47.512Z DEBUG 62130 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:56:47.513Z DEBUG 62130 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:56:47.513Z  INFO 62130 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:56:47.514Z DEBUG 62130 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:56:47.514Z DEBUG 62130 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:56:47.567Z DEBUG 62130 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:56:47.568Z DEBUG 62130 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:56:47.570Z  INFO 62130 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:56:47.571Z  INFO 62130 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:56:47.572Z DEBUG 62130 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:56:47.572Z DEBUG 62130 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:56:47.573Z DEBUG 62130 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:56:49.424Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:56:49.424Z DEBUG 62130 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:56:49.425Z  INFO 62130 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:56:49.426Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:56:49.427Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:56:49.479Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:56:49.480Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:56:49.481Z  INFO 62130 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:56:49.481Z  INFO 62130 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:56:49.482Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:56:49.483Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:56:49.485Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:56:49.493Z DEBUG 62130 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:56:49.494Z DEBUG 62130 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:56:49.496Z  INFO 62130 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:56:49.497Z DEBUG 62130 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:56:49.498Z DEBUG 62130 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:56:49.553Z DEBUG 62130 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:56:49.554Z DEBUG 62130 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:56:49.555Z  INFO 62130 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:56:49.556Z  INFO 62130 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:56:49.557Z DEBUG 62130 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:56:49.558Z DEBUG 62130 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:56:49.560Z DEBUG 62130 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:56:56.749Z DEBUG 62130 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:56:56.749Z DEBUG 62130 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:56:56.773Z DEBUG 62130 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3c71a016]
2025-11-05T14:56:56.776Z  INFO 62130 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:56:56.776Z  INFO 62130 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:56:56.780Z  INFO 62130 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:56:56.780Z  INFO 62130 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:56:56.780Z DEBUG 62130 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:56:56.781Z DEBUG 62130 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:56:56.965Z DEBUG 62130 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:56:56.966Z DEBUG 62130 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:56:56.967Z  INFO 62130 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:56:56.967Z  INFO 62130 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:56:57.024Z  INFO 62130 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:56:57.053Z  INFO 62130 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c2dabff4-85a8-4980-975c-8d3a28808f46
2025-11-05T14:56:57.066Z DEBUG 62130 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:56:57.066Z DEBUG 62130 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3ca96006]
2025-11-05T14:56:57.070Z DEBUG 62130 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:57:05.416Z DEBUG 62130 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/c2dabff4-85a8-4980-975c-8d3a28808f46", parameters={}
2025-11-05T14:57:05.417Z DEBUG 62130 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:57:05.425Z  INFO 62130 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:57:05.426Z  INFO 62130 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: c2dabff4-85a8-4980-975c-8d3a28808f46
2025-11-05T14:57:05.442Z DEBUG 62130 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:57:05.442Z DEBUG 62130 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4551e988]
2025-11-05T14:57:05.446Z DEBUG 62130 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:57:09.924Z DEBUG 62130 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:57:09.925Z DEBUG 62130 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T14:57:09.925Z DEBUG 62130 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:57:09.926Z DEBUG 62130 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:57:09.926Z  INFO 62130 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:57:09.926Z DEBUG 62130 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:57:09.927Z DEBUG 62130 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:57:09.930Z  INFO 62130 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:57:09.931Z  INFO 62130 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T14:57:09.943Z DEBUG 62130 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:57:09.943Z DEBUG 62130 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:57:09.947Z DEBUG 62130 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:57:09.951Z DEBUG 62130 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T14:57:09.951Z DEBUG 62130 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:57:09.952Z  INFO 62130 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:57:09.952Z  INFO 62130 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T14:57:09.955Z DEBUG 62130 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:57:09.955Z DEBUG 62130 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:57:09.957Z DEBUG 62130 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:57:10.107Z DEBUG 62130 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:57:10.108Z DEBUG 62130 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:57:10.109Z  INFO 62130 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:57:10.109Z  INFO 62130 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:57:10.110Z DEBUG 62130 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:57:10.110Z DEBUG 62130 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:57:10.110Z DEBUG 62130 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:57:10.120Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:57:10.121Z DEBUG 62130 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:57:10.122Z  INFO 62130 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:57:10.123Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:57:10.124Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:57:10.183Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:57:10.184Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:57:10.185Z  INFO 62130 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:57:10.185Z  INFO 62130 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:57:10.186Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:57:10.186Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:57:10.187Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:57:21.733Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-05T14:57:21.734Z DEBUG 62130 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:57:21.737Z  INFO 62130 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:57:21.737Z  INFO 62130 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-05T14:57:21.745Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:57:21.745Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:57:21.747Z DEBUG 62130 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:57:29.037Z DEBUG 62130 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aguiar+da+Beira&status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-05T14:57:29.038Z DEBUG 62130 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:57:29.039Z  INFO 62130 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:57:29.039Z  INFO 62130 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aguiar da Beira, date: null, status: RECEIVED
2025-11-05T14:57:29.043Z DEBUG 62130 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:57:29.044Z DEBUG 62130 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:57:29.045Z DEBUG 62130 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:57:30.744Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:57:30.744Z DEBUG 62130 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T14:57:30.744Z DEBUG 62130 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:57:30.745Z DEBUG 62130 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:57:30.745Z  INFO 62130 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:57:30.745Z  INFO 62130 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:57:30.745Z  INFO 62130 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T14:57:30.745Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:57:30.745Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:57:30.747Z DEBUG 62130 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:57:30.747Z DEBUG 62130 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:57:30.749Z DEBUG 62130 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:57:30.752Z DEBUG 62130 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T14:57:30.752Z DEBUG 62130 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:57:30.752Z  INFO 62130 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:57:30.753Z  INFO 62130 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T14:57:30.755Z DEBUG 62130 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:57:30.755Z DEBUG 62130 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:57:30.756Z DEBUG 62130 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:57:30.910Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:57:30.911Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:57:30.912Z  INFO 62130 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:57:30.913Z  INFO 62130 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:57:30.913Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:57:30.914Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:57:30.915Z DEBUG 62130 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:57:30.921Z DEBUG 62130 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:57:30.922Z DEBUG 62130 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:57:30.923Z  INFO 62130 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:57:30.925Z DEBUG 62130 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:57:30.926Z DEBUG 62130 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:57:30.978Z DEBUG 62130 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:57:30.979Z DEBUG 62130 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:57:30.980Z  INFO 62130 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:57:30.980Z  INFO 62130 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:57:30.981Z DEBUG 62130 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:57:30.982Z DEBUG 62130 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:57:30.983Z DEBUG 62130 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:57:31.012Z DEBUG 62130 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T14:57:31.012Z DEBUG 62130 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:57:31.012Z DEBUG 62130 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:57:31.012Z DEBUG 62130 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:57:31.012Z  INFO 62130 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:57:31.013Z  INFO 62130 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:57:31.013Z  INFO 62130 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T14:57:31.013Z DEBUG 62130 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:57:31.013Z DEBUG 62130 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:57:31.015Z DEBUG 62130 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:57:31.016Z DEBUG 62130 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:57:31.017Z DEBUG 62130 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:57:31.019Z DEBUG 62130 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T14:57:31.020Z DEBUG 62130 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:57:31.020Z  INFO 62130 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:57:31.020Z  INFO 62130 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T14:57:31.023Z DEBUG 62130 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:57:31.023Z DEBUG 62130 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:57:31.024Z DEBUG 62130 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:57:31.067Z DEBUG 62130 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:57:31.067Z DEBUG 62130 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:57:31.068Z  INFO 62130 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:57:31.068Z  INFO 62130 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:57:31.069Z DEBUG 62130 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:57:31.070Z DEBUG 62130 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:57:31.072Z DEBUG 62130 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:57:31.079Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:57:31.080Z DEBUG 62130 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:57:31.081Z  INFO 62130 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:57:31.082Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:57:31.083Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:57:31.138Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:57:31.139Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:57:31.140Z  INFO 62130 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:57:31.140Z  INFO 62130 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:57:31.141Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:57:31.142Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:57:31.144Z DEBUG 62130 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:50:19.490Z  INFO 62130 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-05T15:50:19.496Z  INFO 62130 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-05T15:50:19.504Z  INFO 62130 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:50:19.517Z  WARN 62130 --- [SpringApplicationShutdownHook] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-05T15:50:19.518Z  INFO 62130 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-05T15:50:19.520Z  INFO 62130 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-05T15:50:24.741Z  INFO 78779 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Starting Hw1TqsApplication using Java 21.0.9-ea with PID 78779 (/home/rodrigo-costa/Documentos/projtqs/api/target/classes started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T15:50:24.741Z  INFO 78779 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-05T15:50:24.760Z  INFO 78779 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-05T15:50:24.760Z  INFO 78779 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-05T15:50:25.090Z  INFO 78779 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T15:50:25.120Z  INFO 78779 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-11-05T15:50:25.354Z  INFO 78779 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-05T15:50:25.361Z  INFO 78779 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-05T15:50:25.362Z  INFO 78779 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-05T15:50:25.379Z  INFO 78779 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-05T15:50:25.380Z  INFO 78779 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 619 ms
2025-11-05T15:50:25.455Z  INFO 78779 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T15:50:25.473Z  INFO 78779 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-05T15:50:25.486Z  INFO 78779 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T15:50:25.594Z  INFO 78779 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T15:50:25.607Z  INFO 78779 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-05T15:50:25.689Z  INFO 78779 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T15:50:25.690Z  INFO 78779 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-05T15:50:25.701Z  WARN 78779 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T15:50:25.711Z  INFO 78779 --- [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T15:50:26.113Z  INFO 78779 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T15:50:26.138Z  INFO 78779 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:50:26.253Z  INFO 78779 --- [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-05T15:50:26.591Z  WARN 78779 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T15:50:26.640Z DEBUG 78779 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T15:50:26.659Z DEBUG 78779 --- [restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T15:50:26.672Z DEBUG 78779 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T15:50:26.696Z DEBUG 78779 --- [restartedMain] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T15:50:26.753Z  INFO 78779 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T15:50:26.782Z  INFO 78779 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-11-05T15:50:26.796Z  INFO 78779 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-05T15:50:26.801Z  INFO 78779 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Started Hw1TqsApplication in 2.261 seconds (process running for 2.428)
2025-11-05T15:52:12.801Z  INFO 79712 --- [main] p.r.h.s.unit.BookingControllerTest       : Starting BookingControllerTest using Java 21.0.9-ea with PID 79712 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T15:52:12.802Z  INFO 79712 --- [main] p.r.h.s.unit.BookingControllerTest       : No active profile set, falling back to 1 default profile: "default"
2025-11-05T15:52:12.815Z DEBUG 79712 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7568134c
2025-11-05T15:52:13.447Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-11-05T15:52:13.535Z DEBUG 79712 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-05T15:52:13.553Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T15:52:13.590Z DEBUG 79712 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T15:52:13.639Z  INFO 79712 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-05T15:52:13.639Z  INFO 79712 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-05T15:52:13.640Z  INFO 79712 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-05T15:52:13.657Z  INFO 79712 --- [main] p.r.h.s.unit.BookingControllerTest       : Started BookingControllerTest in 1.261 seconds (process running for 3.48)
2025-11-05T15:52:13.695Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:13.744Z DEBUG 79712 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7d968ec1]
2025-11-05T15:52:13.749Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:13.749Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:13.750Z ERROR 79712 --- [main] p.r.h.controllers.BookingController      : Validation error: Municipality is required
2025-11-05T15:52:13.783Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:13.784Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:13.797Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T15:52:13.802Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T15:52:13.803Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:13.804Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:13.808Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:52:13.810Z DEBUG 79712 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED}]
2025-11-05T15:52:13.810Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T15:52:13.811Z ERROR 79712 --- [main] p.r.h.controllers.BookingController      : Error updating status: Not found
2025-11-05T15:52:13.811Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:13.811Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:13.815Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:52:13.816Z DEBUG 79712 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED, note=Done}]
2025-11-05T15:52:13.816Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T15:52:13.816Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:13.817Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@704e27f9]
2025-11-05T15:52:13.827Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:52:13.828Z DEBUG 79712 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=RECEIVED}]
2025-11-05T15:52:13.828Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T15:52:13.828Z ERROR 79712 --- [main] p.r.h.controllers.BookingController      : Invalid request: Invalid transition
2025-11-05T15:52:13.828Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:13.829Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:13.832Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:52:13.833Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:52:13.833Z ERROR 79712 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found
2025-11-05T15:52:13.833Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:13.834Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:13.838Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:52:13.839Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:52:13.839Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:13.839Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2defc6c1]
2025-11-05T15:52:13.867Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T15:52:13.869Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T15:52:13.874Z  WARN 79712 --- [main] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-11-05T15:52:13.878Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:13.878Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing UNKNOWN instances]
2025-11-05T15:52:13.888Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T15:52:13.889Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T15:52:13.889Z ERROR 79712 --- [main] p.r.h.controllers.BookingController      : Cannot cancel booking: Already cancelled
2025-11-05T15:52:13.889Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:13.890Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:13.894Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T15:52:13.894Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T15:52:13.895Z ERROR 79712 --- [main] p.r.h.controllers.BookingController      : Booking not found: Not found
2025-11-05T15:52:13.895Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:13.895Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:13.899Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:13.900Z DEBUG 79712 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5c2fb167]
2025-11-05T15:52:13.901Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:13.901Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:13.901Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:13.901Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@364f0a6f]
2025-11-05T15:52:13.908Z  INFO 79712 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.integration.BookingControllerITTest]: BookingControllerITTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T15:52:13.914Z  INFO 79712 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.integration.BookingControllerITTest
2025-11-05T15:52:13.918Z  INFO 79712 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T15:52:13.933Z  INFO 79712 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 79712 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T15:52:13.933Z  INFO 79712 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-05T15:52:13.934Z DEBUG 79712 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7e2e1179
2025-11-05T15:52:14.190Z  INFO 79712 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T15:52:14.214Z  INFO 79712 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 2 JPA repository interfaces.
2025-11-05T15:52:14.448Z  INFO 79712 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T15:52:14.493Z  INFO 79712 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-05T15:52:14.520Z  INFO 79712 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T15:52:14.609Z  INFO 79712 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T15:52:14.640Z  INFO 79712 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-05T15:52:14.845Z  INFO 79712 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T15:52:14.846Z  INFO 79712 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-05T15:52:14.872Z  WARN 79712 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T15:52:14.890Z  INFO 79712 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T15:52:15.548Z  INFO 79712 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T15:52:15.592Z  INFO 79712 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:52:15.771Z  INFO 79712 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-05T15:52:16.384Z  WARN 79712 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T15:52:16.419Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T15:52:16.433Z DEBUG 79712 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T15:52:16.440Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T15:52:16.446Z DEBUG 79712 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T15:52:16.520Z  INFO 79712 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T15:52:16.549Z  INFO 79712 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-05T15:52:16.549Z  INFO 79712 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-05T15:52:16.549Z  INFO 79712 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-05T15:52:16.557Z  INFO 79712 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.639 seconds (process running for 6.38)
2025-11-05T15:52:16.562Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:16.566Z DEBUG 79712 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@64a0ac24]
2025-11-05T15:52:16.566Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:16.566Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:16.572Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:16.572Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:16.630Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:16.636Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:16.983Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:16.984Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:16.988Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:16.988Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:17.086Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:52:17.135Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 3c70f685-b9d5-4651-8509-2fc71ee1f701
2025-11-05T15:52:17.149Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:17.149Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6963dfb]
2025-11-05T15:52:17.153Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:17.154Z DEBUG 79712 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3d04e5de]
2025-11-05T15:52:17.154Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:17.154Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:17.154Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:17.154Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:17.155Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:17.155Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:17.206Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:17.206Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:17.207Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:17.207Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:17.208Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:52:17.211Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1012a161-cb09-43e3-952c-94ec3782cbe2
2025-11-05T15:52:17.212Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:17.212Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@25b72943]
2025-11-05T15:52:17.213Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:17.214Z DEBUG 79712 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1758a1b3]
2025-11-05T15:52:17.214Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:17.214Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:17.214Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:17.214Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:17.214Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:17.214Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:17.266Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:17.266Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:17.267Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:17.267Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:17.268Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:52:17.270Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 071d2ae0-91af-44da-98d8-97ee365ebecc
2025-11-05T15:52:17.271Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:17.271Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1a9bd311]
2025-11-05T15:52:17.272Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T15:52:17.273Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T15:52:17.274Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-05T15:52:17.304Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:17.304Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T15:52:17.337Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:17.338Z DEBUG 79712 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@42c4fb01]
2025-11-05T15:52:17.338Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:17.338Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:17.339Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:17.339Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:17.339Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:17.339Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:17.392Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:17.394Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:17.395Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:17.396Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:17.399Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:52:17.405Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 6473241a-eb98-461d-923b-ebcf1a17f89d
2025-11-05T15:52:17.407Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:17.407Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2ab8c36a]
2025-11-05T15:52:17.418Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:52:17.419Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:52:17.419Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-05T15:52:17.421Z ERROR 79712 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-05T15:52:17.421Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:17.421Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:17.426Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:17.427Z DEBUG 79712 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@b536b76]
2025-11-05T15:52:17.427Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:17.427Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:17.427Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:17.428Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:17.428Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:17.428Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:17.482Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:17.483Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:17.484Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:17.484Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:17.486Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:52:17.490Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1d8f70e9-4baa-4e75-9f67-09b493ed0ba5
2025-11-05T15:52:17.491Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:17.492Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1065ea4c]
2025-11-05T15:52:17.494Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:52:17.495Z DEBUG 79712 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-05T15:52:17.496Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T15:52:17.497Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: 1d8f70e9-4baa-4e75-9f67-09b493ed0ba5, newStatus: IN_PROGRESS
2025-11-05T15:52:17.497Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 1d8f70e9-4baa-4e75-9f67-09b493ed0ba5
2025-11-05T15:52:17.506Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-05T15:52:17.514Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:17.514Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@792ca118]
2025-11-05T15:52:17.522Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:17.523Z DEBUG 79712 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@705fd0f8]
2025-11-05T15:52:17.523Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:17.523Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:17.523Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:17.523Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:17.524Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:17.524Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:17.577Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:17.578Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:17.579Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:17.580Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:17.584Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:52:17.589Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 566f325a-c025-4104-907c-d6ee90b2912e
2025-11-05T15:52:17.591Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:17.591Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@ddfd7b1]
2025-11-05T15:52:17.593Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:52:17.594Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:52:17.594Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 566f325a-c025-4104-907c-d6ee90b2912e
2025-11-05T15:52:17.596Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:17.596Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@22e4d11]
2025-11-05T15:52:17.604Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:17.605Z DEBUG 79712 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@62034a5a]
2025-11-05T15:52:17.605Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:17.605Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:17.605Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:17.605Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:17.605Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:17.605Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:17.658Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:17.659Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:17.660Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:17.660Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:17.660Z  WARN 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-05T15:52:17.664Z ERROR 79712 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-05T15:52:17.665Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:17.666Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:17.679Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:17.681Z DEBUG 79712 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@618df156]
2025-11-05T15:52:17.681Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:17.681Z  INFO 79712 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:17.682Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:17.682Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:17.683Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:17.684Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:17.736Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:17.737Z DEBUG 79712 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:17.737Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:17.737Z  INFO 79712 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:17.738Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:52:17.741Z  INFO 79712 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: a4459b57-ff38-4fc8-b71e-4f5cc85f2573
2025-11-05T15:52:17.741Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:17.742Z DEBUG 79712 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@106ed71c]
2025-11-05T15:52:17.743Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:52:17.743Z DEBUG 79712 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-05T15:52:17.745Z  WARN 79712 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-05T15:52:17.759Z  INFO 79712 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T15:52:17.761Z  INFO 79712 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-05T15:52:17.764Z  INFO 79712 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T15:52:17.780Z  INFO 79712 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 79712 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T15:52:17.780Z  INFO 79712 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-05T15:52:17.781Z DEBUG 79712 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@68562cdc
2025-11-05T15:52:17.856Z  INFO 79712 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T15:52:17.860Z  INFO 79712 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-05T15:52:17.897Z  INFO 79712 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T15:52:17.898Z  INFO 79712 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T15:52:17.903Z  INFO 79712 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T15:52:17.903Z  INFO 79712 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-05T15:52:17.904Z  INFO 79712 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T15:52:17.904Z  INFO 79712 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-05T15:52:17.905Z  WARN 79712 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T15:52:17.905Z  INFO 79712 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T15:52:17.927Z  INFO 79712 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T15:52:17.933Z  INFO 79712 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:52:17.970Z  WARN 79712 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T15:52:17.981Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T15:52:17.988Z DEBUG 79712 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T15:52:17.991Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T15:52:17.994Z DEBUG 79712 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T15:52:18.017Z  INFO 79712 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T15:52:18.027Z  INFO 79712 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.263 seconds (process running for 7.85)
2025-11-05T15:52:18.314Z  INFO 79712 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T15:52:18.317Z  INFO 79712 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T15:52:18.318Z  INFO 79712 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T15:52:18.329Z  INFO 79712 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 79712 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T15:52:18.329Z  INFO 79712 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-05T15:52:18.395Z  INFO 79712 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T15:52:18.399Z  INFO 79712 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-05T15:52:18.518Z  INFO 79712 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-05T15:52:18.530Z  INFO 79712 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-05T15:52:18.530Z  INFO 79712 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-05T15:52:18.563Z  INFO 79712 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-05T15:52:18.564Z  INFO 79712 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 234 ms
2025-11-05T15:52:18.602Z  INFO 79712 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T15:52:18.603Z  INFO 79712 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T15:52:18.606Z  INFO 79712 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T15:52:18.607Z  INFO 79712 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-05T15:52:18.607Z  INFO 79712 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T15:52:18.607Z  INFO 79712 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-05T15:52:18.608Z  WARN 79712 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T15:52:18.608Z  INFO 79712 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T15:52:18.628Z  INFO 79712 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T15:52:18.632Z  INFO 79712 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:52:18.659Z  WARN 79712 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T15:52:18.668Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T15:52:18.676Z DEBUG 79712 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T15:52:18.679Z DEBUG 79712 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T15:52:18.682Z DEBUG 79712 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T15:52:18.701Z  INFO 79712 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T15:52:18.736Z  WARN 79712 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-11-05T15:52:18.737Z  INFO 79712 --- [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:52:18.739Z  INFO 79712 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-05T15:52:18.771Z  INFO 79712 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-05T15:52:18.788Z  INFO 79712 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-05T15:52:18.801Z ERROR 79712 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:408) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:394) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:586) ~[spring-context-6.2.12.jar:6.2.12]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:364) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:310) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:1009) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:630) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.5.7.jar:3.5.7]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752) ~[spring-boot-3.5.7.jar:3.5.7]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-3.5.7.jar:3.5.7]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318) ~[spring-boot-3.5.7.jar:3.5.7]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144) ~[spring-boot-test-3.5.7.jar:3.5.7]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.2.12.jar:6.2.12]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.2.12.jar:6.2.12]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461) ~[spring-boot-3.5.7.jar:3.5.7]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563) ~[spring-boot-test-3.5.7.jar:3.5.7]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144) ~[spring-boot-test-3.5.7.jar:3.5.7]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110) ~[spring-boot-test-3.5.7.jar:3.5.7]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.12.jar:6.2.12]
	at io.cucumber.spring.TestContextAdaptor.create(TestContextAdaptor.java:42) ~[cucumber-spring-7.14.0.jar:7.14.0]
	at io.cucumber.spring.SpringFactory.start(SpringFactory.java:121) ~[cucumber-spring-7.14.0.jar:7.14.0]
	at io.cucumber.core.runner.Runner.buildBackendWorlds(Runner.java:134) ~[cucumber-core-7.14.0.jar:7.14.0]
	at io.cucumber.core.runner.Runner.runPickle(Runner.java:70) ~[cucumber-core-7.14.0.jar:7.14.0]
	at io.cucumber.junit.platform.engine.CucumberEngineExecutionContext.lambda$runTestCase$4(CucumberEngineExecutionContext.java:112) ~[cucumber-junit-platform-engine-7.14.0.jar:na]
	at io.cucumber.core.runtime.CucumberExecutionContext.lambda$runTestCase$5(CucumberExecutionContext.java:137) ~[cucumber-core-7.14.0.jar:7.14.0]
	at io.cucumber.core.runtime.RethrowingThrowableCollector.executeAndThrow(RethrowingThrowableCollector.java:23) ~[cucumber-core-7.14.0.jar:7.14.0]
	at io.cucumber.core.runtime.CucumberExecutionContext.runTestCase(CucumberExecutionContext.java:137) ~[cucumber-core-7.14.0.jar:7.14.0]
	at io.cucumber.junit.platform.engine.CucumberEngineExecutionContext.runTestCase(CucumberEngineExecutionContext.java:109) ~[cucumber-junit-platform-engine-7.14.0.jar:na]
	at io.cucumber.junit.platform.engine.NodeDescriptor$PickleDescriptor.execute(NodeDescriptor.java:168) ~[cucumber-junit-platform-engine-7.14.0.jar:na]
	at io.cucumber.junit.platform.engine.NodeDescriptor$PickleDescriptor.execute(NodeDescriptor.java:90) ~[cucumber-junit-platform-engine-7.14.0.jar:na]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:77) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.suite.engine.SuiteLauncher.execute(SuiteLauncher.java:63) ~[junit-platform-suite-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.suite.engine.SuiteTestDescriptor.executeTests(SuiteTestDescriptor.java:173) ~[junit-platform-suite-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.suite.engine.SuiteTestDescriptor.execute(SuiteTestDescriptor.java:142) ~[junit-platform-suite-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.suite.engine.SuiteTestEngine.lambda$execute$0(SuiteTestEngine.java:73) ~[junit-platform-suite-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133) ~[na:na]
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1939) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.platform.suite.engine.SuiteTestEngine.execute(SuiteTestEngine.java:73) ~[junit-platform-suite-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.4.jar:3.5.4]
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat server
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:251) ~[spring-boot-3.5.7.jar:3.5.7]
	at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:44) ~[spring-boot-3.5.7.jar:3.5.7]
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:405) ~[spring-context-6.2.12.jar:6.2.12]
	... 104 common frames omitted
Caused by: java.lang.IllegalArgumentException: standardService.connector.startFailed
	at org.apache.catalina.core.StandardService.addConnector(StandardService.java:220) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.addPreviouslyRemovedConnectors(TomcatWebServer.java:310) ~[spring-boot-3.5.7.jar:3.5.7]
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:236) ~[spring-boot-3.5.7.jar:3.5.7]
	... 106 common frames omitted
Caused by: org.apache.catalina.LifecycleException: Protocol handler start failed
	at org.apache.catalina.connector.Connector.startInternal(Connector.java:1104) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardService.addConnector(StandardService.java:217) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	... 108 common frames omitted
Caused by: java.net.BindException: Endereo j em uso
	at java.base/sun.nio.ch.Net.bind0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.bind(Net.java:565) ~[na:na]
	at java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:344) ~[na:na]
	at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:301) ~[na:na]
	at org.apache.tomcat.util.net.NioEndpoint.initServerSocket(NioEndpoint.java:264) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:219) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1398) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1481) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:644) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.Connector.startInternal(Connector.java:1101) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	... 110 common frames omitted

2025-11-05T15:52:18.816Z  INFO 79712 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-05T15:52:18.843Z DEBUG 79712 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@7568134c, started on Wed Nov 05 15:52:12 WET 2025
2025-11-05T15:52:18.844Z DEBUG 79712 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@7e2e1179, started on Wed Nov 05 15:52:13 WET 2025
2025-11-05T15:52:18.845Z  INFO 79712 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:52:18.846Z  INFO 79712 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-05T15:52:18.846Z  INFO 79712 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-05T15:52:18.846Z DEBUG 79712 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@68562cdc, started on Wed Nov 05 15:52:17 WET 2025
2025-11-05T15:52:18.847Z  INFO 79712 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:52:18.848Z  INFO 79712 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-05T15:52:18.914Z  INFO 79712 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-05T15:52:31.417Z  INFO 78779 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-05T15:52:31.427Z  INFO 78779 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-05T15:52:31.435Z  INFO 78779 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:52:31.442Z  WARN 78779 --- [SpringApplicationShutdownHook] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-05T15:52:31.443Z  INFO 78779 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-05T15:52:31.444Z  INFO 78779 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-05T15:52:44.483Z  INFO 80126 --- [main] p.r.h.s.unit.BookingControllerTest       : Starting BookingControllerTest using Java 21.0.9-ea with PID 80126 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T15:52:44.484Z  INFO 80126 --- [main] p.r.h.s.unit.BookingControllerTest       : No active profile set, falling back to 1 default profile: "default"
2025-11-05T15:52:44.497Z DEBUG 80126 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7568134c
2025-11-05T15:52:45.243Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-11-05T15:52:45.346Z DEBUG 80126 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-05T15:52:45.367Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T15:52:45.402Z DEBUG 80126 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T15:52:45.451Z  INFO 80126 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-05T15:52:45.451Z  INFO 80126 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-05T15:52:45.452Z  INFO 80126 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-05T15:52:45.469Z  INFO 80126 --- [main] p.r.h.s.unit.BookingControllerTest       : Started BookingControllerTest in 1.383 seconds (process running for 3.561)
2025-11-05T15:52:45.505Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:45.553Z DEBUG 80126 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7d968ec1]
2025-11-05T15:52:45.558Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:45.558Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:45.559Z ERROR 80126 --- [main] p.r.h.controllers.BookingController      : Validation error: Municipality is required
2025-11-05T15:52:45.589Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:45.589Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:45.602Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T15:52:45.608Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T15:52:45.609Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:45.609Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:45.614Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:52:45.615Z DEBUG 80126 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED}]
2025-11-05T15:52:45.615Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T15:52:45.616Z ERROR 80126 --- [main] p.r.h.controllers.BookingController      : Error updating status: Not found
2025-11-05T15:52:45.616Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:45.616Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:45.620Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:52:45.621Z DEBUG 80126 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED, note=Done}]
2025-11-05T15:52:45.621Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T15:52:45.621Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:45.622Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@704e27f9]
2025-11-05T15:52:45.632Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:52:45.633Z DEBUG 80126 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=RECEIVED}]
2025-11-05T15:52:45.633Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T15:52:45.633Z ERROR 80126 --- [main] p.r.h.controllers.BookingController      : Invalid request: Invalid transition
2025-11-05T15:52:45.634Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:45.634Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:45.638Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:52:45.638Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:52:45.639Z ERROR 80126 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found
2025-11-05T15:52:45.639Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:45.639Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:45.643Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:52:45.643Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:52:45.644Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:45.644Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2defc6c1]
2025-11-05T15:52:45.671Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T15:52:45.673Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T15:52:45.677Z  WARN 80126 --- [main] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-11-05T15:52:45.681Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:45.682Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing UNKNOWN instances]
2025-11-05T15:52:45.691Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T15:52:45.691Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T15:52:45.692Z ERROR 80126 --- [main] p.r.h.controllers.BookingController      : Cannot cancel booking: Already cancelled
2025-11-05T15:52:45.692Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:45.692Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:45.696Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T15:52:45.697Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T15:52:45.697Z ERROR 80126 --- [main] p.r.h.controllers.BookingController      : Booking not found: Not found
2025-11-05T15:52:45.697Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:45.697Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:45.704Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:45.706Z DEBUG 80126 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5c2fb167]
2025-11-05T15:52:45.706Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:45.706Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:45.706Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:45.707Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@364f0a6f]
2025-11-05T15:52:45.712Z  INFO 80126 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.integration.BookingControllerITTest]: BookingControllerITTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T15:52:45.718Z  INFO 80126 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.integration.BookingControllerITTest
2025-11-05T15:52:45.722Z  INFO 80126 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T15:52:45.737Z  INFO 80126 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 80126 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T15:52:45.737Z  INFO 80126 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-05T15:52:45.738Z DEBUG 80126 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7e2e1179
2025-11-05T15:52:45.983Z  INFO 80126 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T15:52:46.007Z  INFO 80126 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 2 JPA repository interfaces.
2025-11-05T15:52:46.276Z  INFO 80126 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T15:52:46.321Z  INFO 80126 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-05T15:52:46.346Z  INFO 80126 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T15:52:46.433Z  INFO 80126 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T15:52:46.457Z  INFO 80126 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-05T15:52:46.669Z  INFO 80126 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T15:52:46.670Z  INFO 80126 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-05T15:52:46.689Z  WARN 80126 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T15:52:46.705Z  INFO 80126 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T15:52:47.348Z  INFO 80126 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T15:52:47.389Z  INFO 80126 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:52:47.565Z  INFO 80126 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-05T15:52:48.173Z  WARN 80126 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T15:52:48.211Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T15:52:48.226Z DEBUG 80126 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T15:52:48.233Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T15:52:48.241Z DEBUG 80126 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T15:52:48.328Z  INFO 80126 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T15:52:48.361Z  INFO 80126 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-05T15:52:48.361Z  INFO 80126 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-05T15:52:48.361Z  INFO 80126 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-05T15:52:48.369Z  INFO 80126 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.647 seconds (process running for 6.462)
2025-11-05T15:52:48.374Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:48.379Z DEBUG 80126 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1fb598e3]
2025-11-05T15:52:48.379Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:48.379Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:48.386Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:48.386Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:48.442Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:48.448Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:48.730Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:48.731Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:48.736Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:48.736Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:48.820Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:52:48.864Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 2ec5f18b-31b7-4668-ae6f-49ae82e14680
2025-11-05T15:52:48.877Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:48.877Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3c261aaf]
2025-11-05T15:52:48.881Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:48.882Z DEBUG 80126 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4c07bc83]
2025-11-05T15:52:48.882Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:48.882Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:48.882Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:48.882Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:48.883Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:48.883Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:48.931Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:48.932Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:48.934Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:48.934Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:48.936Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:52:48.938Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c955dabf-2541-47bd-8e58-f0dab26cc1a1
2025-11-05T15:52:48.940Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:48.940Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1758a1b3]
2025-11-05T15:52:48.941Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:48.942Z DEBUG 80126 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2b1f112b]
2025-11-05T15:52:48.942Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:48.942Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:48.943Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:48.943Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:48.943Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:48.943Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:48.992Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:48.994Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:48.996Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:48.996Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:48.999Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:52:49.002Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 955ba0d6-7e49-48b0-9aae-e44c7f266576
2025-11-05T15:52:49.003Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:49.003Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5b5e995d]
2025-11-05T15:52:49.004Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T15:52:49.006Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T15:52:49.006Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-05T15:52:49.031Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:49.032Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T15:52:49.062Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:49.063Z DEBUG 80126 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6f67495e]
2025-11-05T15:52:49.063Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:49.063Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:49.063Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:49.063Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:49.064Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:49.064Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:49.112Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:49.112Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:49.113Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:49.113Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:49.114Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:52:49.116Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 780853ce-fe42-4785-8516-c2b125470291
2025-11-05T15:52:49.117Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:49.117Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1b8f3d13]
2025-11-05T15:52:49.126Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:52:49.126Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:52:49.126Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-05T15:52:49.128Z ERROR 80126 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-05T15:52:49.128Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:49.128Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:49.133Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:49.134Z DEBUG 80126 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6e2d74a4]
2025-11-05T15:52:49.134Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:49.134Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:49.134Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:49.134Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:49.135Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:49.135Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:49.183Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:49.183Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:49.184Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:49.184Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:49.186Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:52:49.191Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: a0f385e8-aade-4157-8a4a-a73ed58a0657
2025-11-05T15:52:49.193Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:49.193Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@19cb4676]
2025-11-05T15:52:49.195Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:52:49.197Z DEBUG 80126 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-05T15:52:49.197Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T15:52:49.198Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: a0f385e8-aade-4157-8a4a-a73ed58a0657, newStatus: IN_PROGRESS
2025-11-05T15:52:49.198Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: a0f385e8-aade-4157-8a4a-a73ed58a0657
2025-11-05T15:52:49.203Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-05T15:52:49.211Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:49.211Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5df89e37]
2025-11-05T15:52:49.220Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:49.221Z DEBUG 80126 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@dcc17da]
2025-11-05T15:52:49.221Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:49.221Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:49.221Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:49.221Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:49.222Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:49.222Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:49.270Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:49.271Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:49.272Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:49.273Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:49.276Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:52:49.282Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: b1f334f0-dc95-48ce-8677-639acb286b13
2025-11-05T15:52:49.283Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:49.283Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4ac0966b]
2025-11-05T15:52:49.285Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:52:49.286Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:52:49.286Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: b1f334f0-dc95-48ce-8677-639acb286b13
2025-11-05T15:52:49.288Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:49.288Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@75f1424a]
2025-11-05T15:52:49.295Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:49.296Z DEBUG 80126 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2470193a]
2025-11-05T15:52:49.296Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:49.296Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:49.296Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:49.296Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:49.296Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:49.296Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:49.345Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:49.346Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:49.347Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:49.347Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:49.347Z  WARN 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-05T15:52:49.351Z ERROR 80126 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-05T15:52:49.352Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:49.352Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:52:49.357Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:49.358Z DEBUG 80126 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@396a0b9e]
2025-11-05T15:52:49.358Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:49.358Z  INFO 80126 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:49.358Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:49.358Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:49.359Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:49.359Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:49.406Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:49.407Z DEBUG 80126 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:49.408Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:49.409Z  INFO 80126 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:49.412Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:52:49.419Z  INFO 80126 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 7e9131aa-b401-4f03-81af-cad6afb3ae89
2025-11-05T15:52:49.421Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:49.421Z DEBUG 80126 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1c6beb3e]
2025-11-05T15:52:49.423Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:52:49.424Z DEBUG 80126 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-05T15:52:49.426Z  WARN 80126 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-05T15:52:49.433Z  INFO 80126 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T15:52:49.436Z  INFO 80126 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-05T15:52:49.440Z  INFO 80126 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T15:52:49.449Z  INFO 80126 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 80126 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T15:52:49.450Z  INFO 80126 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-05T15:52:49.450Z DEBUG 80126 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@50a741b9
2025-11-05T15:52:49.527Z  INFO 80126 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T15:52:49.531Z  INFO 80126 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-05T15:52:49.572Z  INFO 80126 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T15:52:49.573Z  INFO 80126 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T15:52:49.579Z  INFO 80126 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T15:52:49.579Z  INFO 80126 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-05T15:52:49.580Z  INFO 80126 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T15:52:49.580Z  INFO 80126 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-05T15:52:49.581Z  WARN 80126 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T15:52:49.581Z  INFO 80126 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T15:52:49.608Z  INFO 80126 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T15:52:49.613Z  INFO 80126 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:52:49.654Z  WARN 80126 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T15:52:49.665Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T15:52:49.673Z DEBUG 80126 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T15:52:49.676Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T15:52:49.680Z DEBUG 80126 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T15:52:49.704Z  INFO 80126 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T15:52:49.715Z  INFO 80126 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.276 seconds (process running for 7.807)
2025-11-05T15:52:49.990Z  INFO 80126 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T15:52:49.993Z  INFO 80126 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T15:52:49.994Z  INFO 80126 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T15:52:50.004Z  INFO 80126 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 80126 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T15:52:50.004Z  INFO 80126 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-05T15:52:50.068Z  INFO 80126 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T15:52:50.072Z  INFO 80126 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-05T15:52:50.185Z  INFO 80126 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-05T15:52:50.197Z  INFO 80126 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-05T15:52:50.197Z  INFO 80126 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-05T15:52:50.231Z  INFO 80126 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-05T15:52:50.232Z  INFO 80126 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 226 ms
2025-11-05T15:52:50.274Z  INFO 80126 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T15:52:50.275Z  INFO 80126 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T15:52:50.279Z  INFO 80126 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T15:52:50.279Z  INFO 80126 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-05T15:52:50.280Z  INFO 80126 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T15:52:50.280Z  INFO 80126 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-05T15:52:50.280Z  WARN 80126 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T15:52:50.280Z  INFO 80126 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T15:52:50.306Z  INFO 80126 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T15:52:50.310Z  INFO 80126 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:52:50.338Z  WARN 80126 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T15:52:50.349Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T15:52:50.357Z DEBUG 80126 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T15:52:50.360Z DEBUG 80126 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T15:52:50.363Z DEBUG 80126 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T15:52:50.379Z  INFO 80126 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T15:52:50.418Z  INFO 80126 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-05T15:52:50.419Z  INFO 80126 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.425 seconds (process running for 8.512)
2025-11-05T15:52:50.451Z  INFO 80126 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T15:52:51.652Z  INFO 80126 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-05T15:52:51.726Z  INFO 80126 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-05T15:52:51.784Z  INFO 80126 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-05T15:52:51.785Z  INFO 80126 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-05T15:52:51.785Z DEBUG 80126 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-05T15:52:51.785Z DEBUG 80126 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-05T15:52:51.785Z DEBUG 80126 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-05T15:52:51.785Z DEBUG 80126 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@79990531
2025-11-05T15:52:51.785Z DEBUG 80126 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@767df8bd
2025-11-05T15:52:51.785Z DEBUG 80126 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-05T15:52:51.785Z  INFO 80126 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-11-05T15:52:51.788Z DEBUG 80126 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T15:52:51.789Z DEBUG 80126 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T15:52:51.790Z  INFO 80126 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:51.790Z DEBUG 80126 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:51.790Z DEBUG 80126 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:51.838Z DEBUG 80126 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:51.839Z DEBUG 80126 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:51.840Z  INFO 80126 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:51.840Z  INFO 80126 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:51.843Z DEBUG 80126 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:51.844Z DEBUG 80126 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T15:52:51.855Z DEBUG 80126 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:52:51.864Z DEBUG 80126 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T15:52:51.865Z DEBUG 80126 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T15:52:51.866Z  INFO 80126 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:51.868Z DEBUG 80126 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:51.868Z DEBUG 80126 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:51.917Z DEBUG 80126 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:51.918Z DEBUG 80126 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:51.918Z  INFO 80126 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:51.919Z  INFO 80126 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:51.920Z DEBUG 80126 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:51.920Z DEBUG 80126 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T15:52:51.923Z DEBUG 80126 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:52:53.781Z  INFO 80126 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-05T15:52:53.804Z  INFO 80126 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-05T15:52:53.817Z  INFO 80126 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manh
2025-11-05T15:52:53.832Z  INFO 80126 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colcho e moblia velha
2025-11-05T15:52:53.874Z DEBUG 80126 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T15:52:53.874Z DEBUG 80126 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:52:53.877Z DEBUG 80126 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2ba76f0b]
2025-11-05T15:52:53.878Z  INFO 80126 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:52:53.878Z  INFO 80126 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:52:53.878Z  INFO 80126 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:52:53.878Z  INFO 80126 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:52:53.878Z DEBUG 80126 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:52:53.878Z DEBUG 80126 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:52:53.926Z DEBUG 80126 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:52:53.927Z DEBUG 80126 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:52:53.928Z  INFO 80126 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:52:53.928Z  INFO 80126 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:52:53.933Z  INFO 80126 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:52:53.936Z  INFO 80126 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 6c2bab94-e436-4106-82a6-ff9960c949c9
2025-11-05T15:52:53.940Z DEBUG 80126 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:52:53.940Z DEBUG 80126 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@53c73cd6]
2025-11-05T15:52:53.941Z DEBUG 80126 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T15:52:55.884Z  INFO 80126 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-05T15:52:55.900Z  INFO 80126 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-05T15:52:55.901Z  INFO 80126 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T15:52:55.925Z  INFO 80126 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-05T15:52:55.960Z DEBUG 80126 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@7568134c, started on Wed Nov 05 15:52:44 WET 2025
2025-11-05T15:52:56.029Z DEBUG 80126 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@7e2e1179, started on Wed Nov 05 15:52:45 WET 2025
2025-11-05T15:52:56.031Z  INFO 80126 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:52:56.033Z  INFO 80126 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-05T15:52:56.034Z  INFO 80126 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-05T15:52:56.034Z DEBUG 80126 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@50a741b9, started on Wed Nov 05 15:52:49 WET 2025
2025-11-05T15:52:56.035Z  INFO 80126 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:52:56.036Z  INFO 80126 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-05T15:52:56.036Z  INFO 80126 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-05T15:52:56.037Z  INFO 80126 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-05T15:52:56.039Z  INFO 80126 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-05T15:52:56.040Z  INFO 80126 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:52:56.040Z  INFO 80126 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-05T15:52:56.041Z  INFO 80126 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-05T15:54:56.424Z  INFO 81726 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Starting Hw1TqsApplication using Java 21.0.9-ea with PID 81726 (/home/rodrigo-costa/Documentos/projtqs/api/target/classes started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T15:54:56.425Z  INFO 81726 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-05T15:54:56.444Z  INFO 81726 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-05T15:54:56.444Z  INFO 81726 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-05T15:54:56.774Z  INFO 81726 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T15:54:56.799Z  INFO 81726 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 21 ms. Found 2 JPA repository interfaces.
2025-11-05T15:54:57.034Z  INFO 81726 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-05T15:54:57.042Z  INFO 81726 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-05T15:54:57.042Z  INFO 81726 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-05T15:54:57.059Z  INFO 81726 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-05T15:54:57.059Z  INFO 81726 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 614 ms
2025-11-05T15:54:57.132Z  INFO 81726 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T15:54:57.150Z  INFO 81726 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-05T15:54:57.163Z  INFO 81726 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T15:54:57.268Z  INFO 81726 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T15:54:57.284Z  INFO 81726 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-05T15:54:57.365Z  INFO 81726 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T15:54:57.365Z  INFO 81726 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-05T15:54:57.375Z  WARN 81726 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T15:54:57.384Z  INFO 81726 --- [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T15:54:57.786Z  INFO 81726 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T15:54:57.813Z  INFO 81726 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:54:57.927Z  INFO 81726 --- [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-05T15:54:58.248Z  WARN 81726 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T15:54:58.295Z DEBUG 81726 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T15:54:58.314Z DEBUG 81726 --- [restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T15:54:58.326Z DEBUG 81726 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T15:54:58.347Z DEBUG 81726 --- [restartedMain] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T15:54:58.401Z  INFO 81726 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T15:54:58.430Z  INFO 81726 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-11-05T15:54:58.447Z  INFO 81726 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-05T15:54:58.452Z  INFO 81726 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Started Hw1TqsApplication in 2.227 seconds (process running for 2.394)
2025-11-05T15:55:04.423Z  INFO 81726 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-05T15:55:04.423Z  INFO 81726 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-05T15:55:04.423Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-05T15:55:04.424Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-05T15:55:04.424Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-05T15:55:04.424Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@620c2bc8
2025-11-05T15:55:04.424Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@58cab956
2025-11-05T15:55:04.424Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-05T15:55:04.425Z  INFO 81726 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-11-05T15:55:04.428Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T15:55:04.432Z DEBUG 81726 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T15:55:04.439Z  INFO 81726 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:55:04.499Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:55:04.506Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:55:04.789Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:55:04.792Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:55:04.808Z  INFO 81726 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:55:04.808Z  INFO 81726 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:55:04.813Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:55:04.814Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T15:55:04.820Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:55:04.823Z DEBUG 81726 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T15:55:04.823Z DEBUG 81726 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T15:55:04.823Z  INFO 81726 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:55:04.823Z DEBUG 81726 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:55:04.824Z DEBUG 81726 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:55:04.881Z DEBUG 81726 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:55:04.882Z DEBUG 81726 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:55:04.884Z  INFO 81726 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:55:04.884Z  INFO 81726 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:55:04.886Z DEBUG 81726 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:55:04.886Z DEBUG 81726 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T15:55:04.889Z DEBUG 81726 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:55:18.038Z DEBUG 81726 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T15:55:18.040Z DEBUG 81726 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:55:18.065Z DEBUG 81726 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@285ef2cc]
2025-11-05T15:55:18.068Z  INFO 81726 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:55:18.068Z  INFO 81726 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:55:18.071Z  INFO 81726 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:55:18.072Z  INFO 81726 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:55:18.072Z DEBUG 81726 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:55:18.072Z DEBUG 81726 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:55:18.259Z DEBUG 81726 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:55:18.260Z DEBUG 81726 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:55:18.261Z  INFO 81726 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:55:18.261Z  INFO 81726 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:55:18.315Z  INFO 81726 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:55:18.341Z  INFO 81726 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 792f2e6b-27e0-479a-8064-6cb7f604e7a6
2025-11-05T15:55:18.354Z DEBUG 81726 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:55:18.354Z DEBUG 81726 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@51c5bdb0]
2025-11-05T15:55:18.358Z DEBUG 81726 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T15:55:25.749Z DEBUG 81726 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T15:55:25.750Z DEBUG 81726 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T15:55:25.750Z DEBUG 81726 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T15:55:25.750Z  INFO 81726 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:55:25.750Z DEBUG 81726 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T15:55:25.751Z DEBUG 81726 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:55:25.751Z DEBUG 81726 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:55:25.754Z  INFO 81726 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T15:55:25.754Z  INFO 81726 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T15:55:25.776Z DEBUG 81726 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:55:25.777Z DEBUG 81726 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T15:55:25.783Z DEBUG 81726 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:55:25.786Z DEBUG 81726 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T15:55:25.787Z DEBUG 81726 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T15:55:25.787Z  INFO 81726 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T15:55:25.787Z  INFO 81726 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T15:55:25.789Z DEBUG 81726 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:55:25.789Z DEBUG 81726 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T15:55:25.790Z DEBUG 81726 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:55:26.935Z DEBUG 81726 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:55:26.936Z DEBUG 81726 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:55:26.937Z  INFO 81726 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:55:26.937Z  INFO 81726 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:55:26.938Z DEBUG 81726 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:55:26.938Z DEBUG 81726 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T15:55:26.940Z DEBUG 81726 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:55:26.948Z DEBUG 81726 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T15:55:26.949Z DEBUG 81726 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T15:55:26.950Z  INFO 81726 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:55:26.951Z DEBUG 81726 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:55:26.952Z DEBUG 81726 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:55:27.001Z DEBUG 81726 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:55:27.002Z DEBUG 81726 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:55:27.003Z  INFO 81726 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:55:27.003Z  INFO 81726 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:55:27.004Z DEBUG 81726 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:55:27.005Z DEBUG 81726 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T15:55:27.006Z DEBUG 81726 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:09.605Z DEBUG 81726 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/792f2e6b-27e0-479a-8064-6cb7f604e7a6", parameters={}
2025-11-05T15:59:09.606Z DEBUG 81726 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:59:09.608Z  INFO 81726 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:59:09.608Z  INFO 81726 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 792f2e6b-27e0-479a-8064-6cb7f604e7a6
2025-11-05T15:59:09.612Z DEBUG 81726 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:09.612Z DEBUG 81726 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@17a13c59]
2025-11-05T15:59:09.614Z DEBUG 81726 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:09.616Z DEBUG 81726 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/792f2e6b-27e0-479a-8064-6cb7f604e7a6", parameters={}
2025-11-05T15:59:09.617Z DEBUG 81726 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:59:09.617Z  INFO 81726 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:59:09.617Z  INFO 81726 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 792f2e6b-27e0-479a-8064-6cb7f604e7a6
2025-11-05T15:59:09.619Z DEBUG 81726 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:09.619Z DEBUG 81726 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1e62d22f]
2025-11-05T15:59:09.620Z DEBUG 81726 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:13.254Z DEBUG 81726 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : PUT "/api/bookings/792f2e6b-27e0-479a-8064-6cb7f604e7a6/status", parameters={}
2025-11-05T15:59:13.255Z DEBUG 81726 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:59:13.263Z DEBUG 81726 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=ASSIGNED, note=}]
2025-11-05T15:59:13.263Z  INFO 81726 --- [http-nio-8080-exec-10] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T15:59:13.265Z  INFO 81726 --- [http-nio-8080-exec-10] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: 792f2e6b-27e0-479a-8064-6cb7f604e7a6, newStatus: ASSIGNED
2025-11-05T15:59:13.265Z  INFO 81726 --- [http-nio-8080-exec-10] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 792f2e6b-27e0-479a-8064-6cb7f604e7a6
2025-11-05T15:59:13.272Z  INFO 81726 --- [http-nio-8080-exec-10] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-05T15:59:13.279Z DEBUG 81726 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:13.279Z DEBUG 81726 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7ea965fd]
2025-11-05T15:59:13.280Z DEBUG 81726 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:17.771Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/792f2e6b-27e0-479a-8064-6cb7f604e7a6", parameters={}
2025-11-05T15:59:17.772Z DEBUG 81726 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:59:17.772Z  INFO 81726 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:59:17.772Z  INFO 81726 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 792f2e6b-27e0-479a-8064-6cb7f604e7a6
2025-11-05T15:59:17.775Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:17.775Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@a52c425]
2025-11-05T15:59:17.776Z DEBUG 81726 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:17.779Z DEBUG 81726 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/792f2e6b-27e0-479a-8064-6cb7f604e7a6", parameters={}
2025-11-05T15:59:17.780Z DEBUG 81726 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:59:17.780Z  INFO 81726 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:59:17.780Z  INFO 81726 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 792f2e6b-27e0-479a-8064-6cb7f604e7a6
2025-11-05T15:59:17.782Z DEBUG 81726 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:17.782Z DEBUG 81726 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2fee5e71]
2025-11-05T15:59:17.783Z DEBUG 81726 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:25.811Z  INFO 81726 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-05T15:59:25.817Z  INFO 81726 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-05T15:59:25.822Z  INFO 81726 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:59:25.832Z  WARN 81726 --- [SpringApplicationShutdownHook] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-05T15:59:25.833Z  INFO 81726 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-05T15:59:25.834Z  INFO 81726 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-05T15:59:37.094Z  INFO 83646 --- [main] p.r.h.s.unit.BookingControllerTest       : Starting BookingControllerTest using Java 21.0.9-ea with PID 83646 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T15:59:37.095Z  INFO 83646 --- [main] p.r.h.s.unit.BookingControllerTest       : No active profile set, falling back to 1 default profile: "default"
2025-11-05T15:59:37.108Z DEBUG 83646 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3f465ae
2025-11-05T15:59:37.784Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-11-05T15:59:37.880Z DEBUG 83646 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-05T15:59:37.900Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T15:59:37.945Z DEBUG 83646 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T15:59:37.997Z  INFO 83646 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-05T15:59:37.997Z  INFO 83646 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-05T15:59:37.998Z  INFO 83646 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-05T15:59:38.016Z  INFO 83646 --- [main] p.r.h.s.unit.BookingControllerTest       : Started BookingControllerTest in 1.306 seconds (process running for 3.644)
2025-11-05T15:59:38.054Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:38.102Z DEBUG 83646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6e5091b0]
2025-11-05T15:59:38.106Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:38.106Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:38.107Z ERROR 83646 --- [main] p.r.h.controllers.BookingController      : Validation error: Municipality is required
2025-11-05T15:59:38.135Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:38.135Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:59:38.148Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T15:59:38.153Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T15:59:38.154Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:38.155Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:59:38.159Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:59:38.161Z DEBUG 83646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED}]
2025-11-05T15:59:38.161Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T15:59:38.162Z ERROR 83646 --- [main] p.r.h.controllers.BookingController      : Error updating status: Not found
2025-11-05T15:59:38.162Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:38.162Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:59:38.166Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:59:38.167Z DEBUG 83646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED, note=Done}]
2025-11-05T15:59:38.167Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T15:59:38.168Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:38.168Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2b59285c]
2025-11-05T15:59:38.178Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:59:38.179Z DEBUG 83646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=RECEIVED}]
2025-11-05T15:59:38.179Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T15:59:38.179Z ERROR 83646 --- [main] p.r.h.controllers.BookingController      : Invalid request: Invalid transition
2025-11-05T15:59:38.179Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:38.180Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:59:38.183Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:59:38.184Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:59:38.185Z ERROR 83646 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found
2025-11-05T15:59:38.185Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:38.185Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:59:38.189Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:59:38.189Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:59:38.190Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:38.190Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@47828afb]
2025-11-05T15:59:38.217Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T15:59:38.220Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T15:59:38.225Z  WARN 83646 --- [main] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-11-05T15:59:38.231Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:38.231Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing UNKNOWN instances]
2025-11-05T15:59:38.247Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T15:59:38.248Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T15:59:38.249Z ERROR 83646 --- [main] p.r.h.controllers.BookingController      : Cannot cancel booking: Already cancelled
2025-11-05T15:59:38.250Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:38.250Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:59:38.256Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T15:59:38.256Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T15:59:38.257Z ERROR 83646 --- [main] p.r.h.controllers.BookingController      : Booking not found: Not found
2025-11-05T15:59:38.257Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:38.257Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:59:38.263Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:38.265Z DEBUG 83646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@58f28c5e]
2025-11-05T15:59:38.265Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:38.265Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:38.265Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:38.266Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@20ecbeda]
2025-11-05T15:59:38.274Z  INFO 83646 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.integration.BookingControllerITTest]: BookingControllerITTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T15:59:38.283Z  INFO 83646 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.integration.BookingControllerITTest
2025-11-05T15:59:38.287Z  INFO 83646 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T15:59:38.302Z  INFO 83646 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 83646 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T15:59:38.303Z  INFO 83646 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-05T15:59:38.304Z DEBUG 83646 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4d682552
2025-11-05T15:59:38.579Z  INFO 83646 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T15:59:38.603Z  INFO 83646 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 2 JPA repository interfaces.
2025-11-05T15:59:38.859Z  INFO 83646 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T15:59:38.912Z  INFO 83646 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-05T15:59:38.940Z  INFO 83646 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T15:59:39.044Z  INFO 83646 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T15:59:39.071Z  INFO 83646 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-05T15:59:39.317Z  INFO 83646 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T15:59:39.319Z  INFO 83646 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-05T15:59:39.344Z  WARN 83646 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T15:59:39.361Z  INFO 83646 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T15:59:39.998Z  INFO 83646 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T15:59:40.039Z  INFO 83646 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:59:40.210Z  INFO 83646 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-05T15:59:40.779Z  WARN 83646 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T15:59:40.823Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T15:59:40.838Z DEBUG 83646 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T15:59:40.844Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T15:59:40.850Z DEBUG 83646 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T15:59:40.927Z  INFO 83646 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T15:59:40.958Z  INFO 83646 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-05T15:59:40.958Z  INFO 83646 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-05T15:59:40.959Z  INFO 83646 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-05T15:59:40.967Z  INFO 83646 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.68 seconds (process running for 6.595)
2025-11-05T15:59:40.973Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:40.979Z DEBUG 83646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@47562117]
2025-11-05T15:59:40.980Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:40.980Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:40.985Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:59:40.986Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:41.047Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:41.052Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:41.361Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:41.364Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:41.370Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:41.370Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:41.475Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:59:41.530Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: cb6aa707-629d-4c56-a782-55e445115ae1
2025-11-05T15:59:41.546Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:41.546Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@12b7731c]
2025-11-05T15:59:41.552Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:41.552Z DEBUG 83646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2d171356]
2025-11-05T15:59:41.553Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:41.553Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:41.553Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:59:41.553Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:41.553Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:41.553Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:41.610Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:41.610Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:41.611Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:41.611Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:41.613Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:59:41.615Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 7155bcce-5931-4c34-9d9f-5fc708b5f47a
2025-11-05T15:59:41.616Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:41.616Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@44780524]
2025-11-05T15:59:41.617Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:41.618Z DEBUG 83646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@405b6cf0]
2025-11-05T15:59:41.618Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:41.618Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:41.618Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:59:41.618Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:41.619Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:41.619Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:42.047Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:42.048Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:42.050Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:42.050Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:42.051Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:59:42.053Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: dcc53f1e-6f3b-4f0f-9668-633bd63fc8d8
2025-11-05T15:59:42.054Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:42.055Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1758a1b3]
2025-11-05T15:59:42.057Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T15:59:42.060Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T15:59:42.060Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-05T15:59:42.087Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:42.087Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T15:59:42.120Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:42.120Z DEBUG 83646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@68af29c5]
2025-11-05T15:59:42.120Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:42.120Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:42.121Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:59:42.121Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:42.121Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:42.121Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:42.178Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:42.179Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:42.181Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:42.182Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:42.185Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:59:42.192Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c48f69ab-44a0-4884-b3e1-e02c54b1a5fb
2025-11-05T15:59:42.195Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:42.196Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@533411a3]
2025-11-05T15:59:42.213Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:59:42.213Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:59:42.213Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-05T15:59:42.216Z ERROR 83646 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-05T15:59:42.216Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:42.216Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:59:42.221Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:42.222Z DEBUG 83646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5834b11]
2025-11-05T15:59:42.222Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:42.222Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:42.223Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:59:42.223Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:42.223Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:42.223Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:42.280Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:42.281Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:42.282Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:42.283Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:42.286Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:59:42.294Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 9db1f3f2-6dd2-412b-b707-395b0b0bc69c
2025-11-05T15:59:42.296Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:42.297Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@14176126]
2025-11-05T15:59:42.299Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:59:42.302Z DEBUG 83646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-05T15:59:42.303Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T15:59:42.304Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: 9db1f3f2-6dd2-412b-b707-395b0b0bc69c, newStatus: IN_PROGRESS
2025-11-05T15:59:42.304Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 9db1f3f2-6dd2-412b-b707-395b0b0bc69c
2025-11-05T15:59:42.310Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-05T15:59:42.319Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:42.319Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@69a3a6bd]
2025-11-05T15:59:42.328Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:42.329Z DEBUG 83646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@600e4216]
2025-11-05T15:59:42.329Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:42.329Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:42.329Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:59:42.329Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:42.329Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:42.329Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:42.387Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:42.389Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:42.390Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:42.390Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:42.393Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:59:42.397Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 4f61bfc0-be83-47db-834e-6ede7f3f6d19
2025-11-05T15:59:42.398Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:42.398Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@62532056]
2025-11-05T15:59:42.400Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:59:42.400Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:59:42.400Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 4f61bfc0-be83-47db-834e-6ede7f3f6d19
2025-11-05T15:59:42.402Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:42.403Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2e8c69d3]
2025-11-05T15:59:42.411Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:42.412Z DEBUG 83646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5cc26f69]
2025-11-05T15:59:42.412Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:42.412Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:42.412Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:59:42.412Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:42.413Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:42.413Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:42.470Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:42.471Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:42.472Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:42.473Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:42.473Z  WARN 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-05T15:59:42.476Z ERROR 83646 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-05T15:59:42.477Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:42.477Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:59:42.487Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:42.488Z DEBUG 83646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@a99f426]
2025-11-05T15:59:42.488Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:42.488Z  INFO 83646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:42.488Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:59:42.488Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:42.488Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:42.488Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:42.546Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:42.547Z DEBUG 83646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:42.549Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:42.549Z  INFO 83646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:42.553Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:59:42.560Z  INFO 83646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 5495455e-4213-4858-9e98-573379017449
2025-11-05T15:59:42.561Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:42.562Z DEBUG 83646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2470193a]
2025-11-05T15:59:42.564Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T15:59:42.565Z DEBUG 83646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-05T15:59:42.567Z  WARN 83646 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-05T15:59:42.574Z  INFO 83646 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T15:59:42.576Z  INFO 83646 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-05T15:59:42.579Z  INFO 83646 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T15:59:42.590Z  INFO 83646 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 83646 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T15:59:42.590Z  INFO 83646 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-05T15:59:42.591Z DEBUG 83646 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6f991ee3
2025-11-05T15:59:42.669Z  INFO 83646 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T15:59:42.674Z  INFO 83646 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-05T15:59:42.720Z  INFO 83646 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T15:59:42.722Z  INFO 83646 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T15:59:42.727Z  INFO 83646 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T15:59:42.727Z  INFO 83646 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-05T15:59:42.728Z  INFO 83646 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T15:59:42.728Z  INFO 83646 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-05T15:59:42.729Z  WARN 83646 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T15:59:42.729Z  INFO 83646 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T15:59:42.754Z  INFO 83646 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T15:59:42.761Z  INFO 83646 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:59:42.816Z  WARN 83646 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T15:59:42.830Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T15:59:42.839Z DEBUG 83646 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T15:59:42.842Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T15:59:42.846Z DEBUG 83646 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T15:59:42.869Z  INFO 83646 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T15:59:42.880Z  INFO 83646 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.301 seconds (process running for 8.508)
2025-11-05T15:59:43.171Z  INFO 83646 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T15:59:43.174Z  INFO 83646 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T15:59:43.175Z  INFO 83646 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T15:59:43.185Z  INFO 83646 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 83646 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T15:59:43.185Z  INFO 83646 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-05T15:59:43.251Z  INFO 83646 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T15:59:43.255Z  INFO 83646 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-05T15:59:43.381Z  INFO 83646 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-05T15:59:43.395Z  INFO 83646 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-05T15:59:43.395Z  INFO 83646 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-05T15:59:43.429Z  INFO 83646 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-05T15:59:43.429Z  INFO 83646 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 243 ms
2025-11-05T15:59:43.476Z  INFO 83646 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T15:59:43.477Z  INFO 83646 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T15:59:43.481Z  INFO 83646 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T15:59:43.481Z  INFO 83646 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-05T15:59:43.482Z  INFO 83646 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T15:59:43.483Z  INFO 83646 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-05T15:59:43.483Z  WARN 83646 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T15:59:43.483Z  INFO 83646 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T15:59:43.504Z  INFO 83646 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T15:59:43.509Z  INFO 83646 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:59:43.538Z  WARN 83646 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T15:59:43.548Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T15:59:43.557Z DEBUG 83646 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T15:59:43.560Z DEBUG 83646 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T15:59:43.562Z DEBUG 83646 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T15:59:43.579Z  INFO 83646 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T15:59:43.620Z  INFO 83646 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-05T15:59:43.622Z  INFO 83646 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.447 seconds (process running for 9.25)
2025-11-05T15:59:43.653Z  INFO 83646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T15:59:44.926Z  INFO 83646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-05T15:59:45.018Z  INFO 83646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-05T15:59:45.080Z  INFO 83646 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-05T15:59:45.080Z  INFO 83646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-05T15:59:45.080Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-05T15:59:45.080Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-05T15:59:45.080Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-05T15:59:45.080Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3970a846
2025-11-05T15:59:45.081Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@6d6ccde7
2025-11-05T15:59:45.081Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-05T15:59:45.081Z  INFO 83646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-05T15:59:45.084Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T15:59:45.085Z DEBUG 83646 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T15:59:45.085Z  INFO 83646 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:45.086Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:45.086Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:45.141Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:45.142Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:45.142Z  INFO 83646 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:45.142Z  INFO 83646 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:45.143Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:45.143Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T15:59:45.150Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:45.154Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T15:59:45.155Z DEBUG 83646 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T15:59:45.155Z  INFO 83646 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:45.156Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:45.156Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:45.214Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:45.215Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:45.216Z  INFO 83646 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:45.217Z  INFO 83646 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:45.218Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:45.219Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T15:59:45.221Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:47.085Z  INFO 83646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-05T15:59:47.101Z  INFO 83646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-05T15:59:47.115Z  INFO 83646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manh
2025-11-05T15:59:47.131Z  INFO 83646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colcho e moblia velha
2025-11-05T15:59:47.174Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T15:59:47.174Z DEBUG 83646 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:47.178Z DEBUG 83646 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4abbdc9b]
2025-11-05T15:59:47.178Z  INFO 83646 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:47.178Z  INFO 83646 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:47.179Z  INFO 83646 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:59:47.179Z  INFO 83646 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:47.179Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:47.180Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:47.237Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:47.238Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:47.239Z  INFO 83646 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:47.239Z  INFO 83646 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:47.250Z  INFO 83646 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:59:47.258Z  INFO 83646 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 024989e0-8b1a-4431-9def-b2fd0302d30c
2025-11-05T15:59:47.263Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:47.263Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@67c49595]
2025-11-05T15:59:47.265Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T15:59:49.186Z  INFO 83646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-05T15:59:49.202Z  INFO 83646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-05T15:59:49.204Z  INFO 83646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T15:59:49.234Z  INFO 83646 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T15:59:49.235Z  INFO 83646 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T15:59:49.240Z  INFO 83646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T15:59:49.276Z DEBUG 83646 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T15:59:49.276Z DEBUG 83646 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:49.277Z DEBUG 83646 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@973c68c]
2025-11-05T15:59:49.277Z  INFO 83646 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:49.277Z  INFO 83646 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:49.278Z  INFO 83646 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:59:49.278Z  INFO 83646 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:49.278Z DEBUG 83646 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:49.278Z DEBUG 83646 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:49.336Z DEBUG 83646 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:49.337Z DEBUG 83646 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:49.338Z  INFO 83646 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:49.338Z  INFO 83646 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:49.342Z  INFO 83646 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:59:49.348Z  INFO 83646 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 5659b5a2-53f2-4e7c-8d7b-cccb03ca71ed
2025-11-05T15:59:49.350Z DEBUG 83646 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:49.350Z DEBUG 83646 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@468933e9]
2025-11-05T15:59:49.351Z DEBUG 83646 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T15:59:49.360Z  INFO 83646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 5659b5a2-53f2-4e7c-8d7b-cccb03ca71ed
2025-11-05T15:59:49.688Z  INFO 83646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-05T15:59:49.733Z  INFO 83646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-05T15:59:49.764Z  INFO 83646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: 5659b5a2-53f2-4e7c-8d7b-cccb03ca71ed
2025-11-05T15:59:49.819Z DEBUG 83646 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/5659b5a2-53f2-4e7c-8d7b-cccb03ca71ed", parameters={}
2025-11-05T15:59:49.819Z DEBUG 83646 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:59:49.820Z  INFO 83646 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:59:49.820Z  INFO 83646 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 5659b5a2-53f2-4e7c-8d7b-cccb03ca71ed
2025-11-05T15:59:49.823Z DEBUG 83646 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:49.823Z DEBUG 83646 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@61ace613]
2025-11-05T15:59:49.825Z DEBUG 83646 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:51.322Z  INFO 83646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-05T15:59:51.332Z  INFO 83646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-05T15:59:51.346Z  INFO 83646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: 5659b5a2-53f2-4e7c-8d7b-cccb03ca71ed
2025-11-05T15:59:51.347Z  INFO 83646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T15:59:51.364Z  INFO 83646 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T15:59:51.366Z  INFO 83646 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T15:59:51.376Z  INFO 83646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T15:59:51.402Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T15:59:51.403Z DEBUG 83646 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:51.403Z DEBUG 83646 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6b266aef]
2025-11-05T15:59:51.403Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:51.404Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:51.404Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:59:51.404Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:51.404Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:51.404Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:51.461Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:51.462Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:51.463Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:51.463Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:51.466Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:59:51.472Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 7874e81a-d738-49ec-a4be-ccdb91000c1b
2025-11-05T15:59:51.474Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:51.475Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@15329482]
2025-11-05T15:59:51.476Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T15:59:51.478Z  INFO 83646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 7874e81a-d738-49ec-a4be-ccdb91000c1b
2025-11-05T15:59:51.588Z  INFO 83646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-05T15:59:51.629Z  INFO 83646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-05T15:59:51.654Z  INFO 83646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-05T15:59:51.691Z DEBUG 83646 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-05T15:59:51.692Z DEBUG 83646 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T15:59:51.692Z  INFO 83646 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T15:59:51.692Z  INFO 83646 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-05T15:59:51.694Z ERROR 83646 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-05T15:59:51.694Z DEBUG 83646 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:51.694Z DEBUG 83646 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T15:59:51.694Z DEBUG 83646 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-05T15:59:53.193Z  INFO 83646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-05T15:59:53.205Z  INFO 83646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-05T15:59:53.206Z  INFO 83646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T15:59:53.226Z  INFO 83646 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T15:59:53.228Z  INFO 83646 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T15:59:53.237Z  INFO 83646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T15:59:53.261Z DEBUG 83646 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T15:59:53.262Z DEBUG 83646 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:53.263Z DEBUG 83646 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@34eda0c6]
2025-11-05T15:59:53.263Z  INFO 83646 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:53.263Z  INFO 83646 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:53.263Z  INFO 83646 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:59:53.263Z  INFO 83646 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:53.264Z DEBUG 83646 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:53.264Z DEBUG 83646 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:53.320Z DEBUG 83646 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:53.321Z DEBUG 83646 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:53.321Z  INFO 83646 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:53.321Z  INFO 83646 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:53.323Z  INFO 83646 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:59:53.326Z  INFO 83646 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f297cfdc-01be-4a0b-8fee-69dab000a6cd
2025-11-05T15:59:53.327Z DEBUG 83646 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:53.327Z DEBUG 83646 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4aa6c95b]
2025-11-05T15:59:53.328Z DEBUG 83646 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T15:59:53.329Z  INFO 83646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-05T15:59:53.332Z DEBUG 83646 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T15:59:53.332Z DEBUG 83646 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:53.333Z DEBUG 83646 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@24962eb1]
2025-11-05T15:59:53.333Z  INFO 83646 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:53.333Z  INFO 83646 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:53.333Z  INFO 83646 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:59:53.333Z  INFO 83646 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:53.333Z DEBUG 83646 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:53.333Z DEBUG 83646 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:53.654Z DEBUG 83646 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:53.655Z DEBUG 83646 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:53.656Z  INFO 83646 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:53.656Z  INFO 83646 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:53.659Z  INFO 83646 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:59:53.666Z  INFO 83646 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ce1539b1-6b59-4f42-9e3a-64cb5b2303a6
2025-11-05T15:59:53.668Z DEBUG 83646 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:53.668Z DEBUG 83646 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6b6cde68]
2025-11-05T15:59:53.670Z DEBUG 83646 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T15:59:53.672Z  INFO 83646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-05T15:59:53.764Z  INFO 83646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-05T15:59:53.825Z  INFO 83646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-05T15:59:53.831Z DEBUG 83646 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T15:59:53.831Z DEBUG 83646 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T15:59:53.831Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T15:59:53.832Z DEBUG 83646 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T15:59:53.832Z  INFO 83646 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:53.832Z DEBUG 83646 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:53.832Z  INFO 83646 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T15:59:53.832Z  INFO 83646 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T15:59:53.832Z DEBUG 83646 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:53.841Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:53.841Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T15:59:53.847Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:53.849Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T15:59:53.850Z DEBUG 83646 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T15:59:53.850Z  INFO 83646 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T15:59:53.850Z  INFO 83646 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T15:59:53.853Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:53.853Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T15:59:53.856Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:54.154Z DEBUG 83646 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:54.155Z DEBUG 83646 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:54.157Z  INFO 83646 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:54.157Z  INFO 83646 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:54.158Z DEBUG 83646 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:54.159Z DEBUG 83646 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T15:59:54.161Z DEBUG 83646 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:54.170Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T15:59:54.171Z DEBUG 83646 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T15:59:54.172Z  INFO 83646 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:54.172Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:54.173Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:54.232Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:54.233Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:54.234Z  INFO 83646 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:54.235Z  INFO 83646 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:54.237Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:54.237Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T15:59:54.240Z DEBUG 83646 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:55.875Z  INFO 83646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-05T15:59:55.906Z DEBUG 83646 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-05T15:59:55.907Z DEBUG 83646 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T15:59:55.908Z  INFO 83646 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T15:59:55.908Z  INFO 83646 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-05T15:59:55.914Z DEBUG 83646 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:55.915Z DEBUG 83646 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T15:59:55.921Z DEBUG 83646 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:57.440Z  INFO 83646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-05T15:59:57.457Z  INFO 83646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-05T15:59:57.458Z  INFO 83646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T15:59:57.475Z  INFO 83646 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T15:59:57.477Z  INFO 83646 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T15:59:57.489Z  INFO 83646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T15:59:57.522Z DEBUG 83646 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T15:59:57.522Z DEBUG 83646 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:57.523Z DEBUG 83646 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@53ab8401]
2025-11-05T15:59:57.523Z  INFO 83646 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:57.523Z  INFO 83646 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:57.523Z  INFO 83646 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:59:57.523Z  INFO 83646 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:57.523Z DEBUG 83646 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:57.523Z DEBUG 83646 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:57.580Z DEBUG 83646 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:57.580Z DEBUG 83646 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:57.581Z  INFO 83646 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:57.581Z  INFO 83646 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:57.582Z  INFO 83646 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:59:57.585Z  INFO 83646 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: fd00c835-9c09-4c48-aa5f-fc78bb8db3b8
2025-11-05T15:59:57.586Z DEBUG 83646 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:57.586Z DEBUG 83646 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@262c743]
2025-11-05T15:59:57.587Z DEBUG 83646 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T15:59:57.588Z  INFO 83646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-05T15:59:57.591Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T15:59:57.591Z DEBUG 83646 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T15:59:57.592Z DEBUG 83646 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@697798ae]
2025-11-05T15:59:57.592Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T15:59:57.592Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T15:59:57.592Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T15:59:57.593Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:57.593Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:57.593Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:57.650Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:57.650Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:57.651Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:57.652Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:57.655Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T15:59:57.661Z  INFO 83646 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 7c69cdda-990f-441d-8afa-c6df7c3f01b6
2025-11-05T15:59:57.664Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:57.664Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1f46ee09]
2025-11-05T15:59:57.666Z DEBUG 83646 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T15:59:57.669Z  INFO 83646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-05T15:59:57.754Z  INFO 83646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-05T15:59:57.825Z  INFO 83646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-05T15:59:57.831Z DEBUG 83646 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T15:59:57.831Z DEBUG 83646 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T15:59:57.831Z DEBUG 83646 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T15:59:57.831Z DEBUG 83646 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T15:59:57.832Z  INFO 83646 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:57.832Z DEBUG 83646 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:57.832Z  INFO 83646 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T15:59:57.832Z  INFO 83646 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T15:59:57.832Z DEBUG 83646 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:57.835Z DEBUG 83646 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:57.835Z DEBUG 83646 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T15:59:57.839Z DEBUG 83646 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:57.843Z DEBUG 83646 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T15:59:57.844Z DEBUG 83646 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T15:59:57.844Z  INFO 83646 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T15:59:57.844Z  INFO 83646 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T15:59:57.847Z DEBUG 83646 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:57.848Z DEBUG 83646 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T15:59:57.849Z  INFO 83646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-05T15:59:57.852Z DEBUG 83646 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:57.889Z DEBUG 83646 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:57.890Z DEBUG 83646 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:57.890Z  INFO 83646 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:57.891Z  INFO 83646 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:57.892Z DEBUG 83646 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:57.892Z DEBUG 83646 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T15:59:57.893Z DEBUG 83646 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:57.901Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T15:59:57.902Z DEBUG 83646 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T15:59:57.902Z  INFO 83646 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T15:59:57.903Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T15:59:57.903Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T15:59:57.925Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-05T15:59:57.925Z DEBUG 83646 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T15:59:57.926Z  INFO 83646 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T15:59:57.926Z  INFO 83646 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-05T15:59:57.930Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:57.930Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T15:59:57.934Z DEBUG 83646 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:57.962Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T15:59:57.962Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T15:59:57.963Z  INFO 83646 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T15:59:57.963Z  INFO 83646 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T15:59:57.964Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T15:59:57.964Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T15:59:57.965Z DEBUG 83646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T15:59:59.454Z  INFO 83646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-05T15:59:59.470Z  INFO 83646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-05T15:59:59.472Z  INFO 83646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T15:59:59.486Z  INFO 83646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-05T15:59:59.533Z DEBUG 83646 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3f465ae, started on Wed Nov 05 15:59:37 WET 2025
2025-11-05T15:59:59.536Z DEBUG 83646 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4d682552, started on Wed Nov 05 15:59:38 WET 2025
2025-11-05T15:59:59.538Z  INFO 83646 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:59:59.613Z  INFO 83646 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-05T15:59:59.614Z  INFO 83646 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-05T15:59:59.615Z DEBUG 83646 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6f991ee3, started on Wed Nov 05 15:59:42 WET 2025
2025-11-05T15:59:59.616Z  INFO 83646 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:59:59.616Z  INFO 83646 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-05T15:59:59.617Z  INFO 83646 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-05T15:59:59.617Z  INFO 83646 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-05T15:59:59.619Z  INFO 83646 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-05T15:59:59.621Z  INFO 83646 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T15:59:59.621Z  INFO 83646 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-05T15:59:59.622Z  INFO 83646 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
