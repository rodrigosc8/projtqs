2025-11-05T14:48:16.915Z  INFO 56725 --- [main] p.r.h.s.unit.BookingControllerTest       : Starting BookingControllerTest using Java 21.0.9-ea with PID 56725 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:48:16.918Z  INFO 56725 --- [main] p.r.h.s.unit.BookingControllerTest       : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:48:16.934Z DEBUG 56725 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3f465ae
2025-11-05T14:48:17.591Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:48:17.684Z DEBUG 56725 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-05T14:48:17.700Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:48:17.734Z DEBUG 56725 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:48:17.785Z  INFO 56725 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-05T14:48:17.786Z  INFO 56725 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-05T14:48:17.786Z  INFO 56725 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-05T14:48:17.802Z  INFO 56725 --- [main] p.r.h.s.unit.BookingControllerTest       : Started BookingControllerTest in 1.271 seconds (process running for 3.694)
2025-11-05T14:48:17.841Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:17.888Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@47d6d2a7]
2025-11-05T14:48:17.892Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:17.892Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:17.893Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Validation error: Municipality is required
2025-11-05T14:48:17.920Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:17.920Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:17.933Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T14:48:17.940Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T14:48:17.942Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:17.942Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:17.948Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:48:17.950Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED}]
2025-11-05T14:48:17.950Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:48:17.951Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Error updating status: Not found
2025-11-05T14:48:17.951Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:17.951Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:17.955Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:48:17.956Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED, note=Done}]
2025-11-05T14:48:17.956Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:48:17.956Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:17.957Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@30ca1686]
2025-11-05T14:48:17.967Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:48:17.968Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=RECEIVED}]
2025-11-05T14:48:17.968Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:48:17.968Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Invalid request: Invalid transition
2025-11-05T14:48:17.969Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:17.969Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:17.972Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:48:17.973Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:48:17.973Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found
2025-11-05T14:48:17.974Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:17.974Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:17.978Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:48:17.979Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:48:17.979Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:17.979Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@55f0ba66]
2025-11-05T14:48:18.008Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:48:18.011Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:48:18.015Z  WARN 56725 --- [main] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-11-05T14:48:18.019Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:18.019Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing UNKNOWN instances]
2025-11-05T14:48:18.028Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T14:48:18.028Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T14:48:18.029Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Cannot cancel booking: Already cancelled
2025-11-05T14:48:18.029Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:18.029Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:18.033Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T14:48:18.033Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T14:48:18.034Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Booking not found: Not found
2025-11-05T14:48:18.034Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:18.034Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:18.039Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:18.041Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7e0a7b9e]
2025-11-05T14:48:18.041Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:18.041Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:18.042Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:18.042Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1936513a]
2025-11-05T14:48:18.049Z  INFO 56725 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.integration.BookingControllerITTest]: BookingControllerITTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:48:18.056Z  INFO 56725 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.integration.BookingControllerITTest
2025-11-05T14:48:18.060Z  INFO 56725 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T14:48:18.073Z  INFO 56725 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 56725 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:48:18.074Z  INFO 56725 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:48:18.075Z DEBUG 56725 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@33d57d51
2025-11-05T14:48:18.341Z  INFO 56725 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T14:48:18.366Z  INFO 56725 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 2 JPA repository interfaces.
2025-11-05T14:48:18.638Z  INFO 56725 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T14:48:18.712Z  INFO 56725 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-05T14:48:18.743Z  INFO 56725 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T14:48:18.848Z  INFO 56725 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T14:48:18.877Z  INFO 56725 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-05T14:48:19.114Z  INFO 56725 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T14:48:19.115Z  INFO 56725 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-05T14:48:19.140Z  WARN 56725 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T14:48:19.158Z  INFO 56725 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T14:48:19.876Z  INFO 56725 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T14:48:19.921Z  INFO 56725 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:48:20.109Z  INFO 56725 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-05T14:48:20.694Z  WARN 56725 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T14:48:20.726Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:48:20.739Z DEBUG 56725 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T14:48:20.746Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:48:20.752Z DEBUG 56725 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:48:20.824Z  INFO 56725 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T14:48:20.855Z  INFO 56725 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-05T14:48:20.855Z  INFO 56725 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-05T14:48:20.855Z  INFO 56725 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-05T14:48:20.863Z  INFO 56725 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.803 seconds (process running for 6.756)
2025-11-05T14:48:20.868Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:20.871Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1fb598e3]
2025-11-05T14:48:20.872Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:20.872Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:20.877Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:20.877Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:20.955Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:20.960Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:21.336Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:21.337Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:21.340Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:21.340Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:21.440Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:21.488Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: b50a6df4-60c2-4dd4-8366-1b35dcb792e9
2025-11-05T14:48:21.502Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.502Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3c261aaf]
2025-11-05T14:48:21.509Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:21.510Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4c07bc83]
2025-11-05T14:48:21.511Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:21.511Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:21.511Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:21.511Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.512Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.512Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:21.564Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:21.565Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:21.566Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:21.566Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:21.568Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:21.570Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d348e0f4-d543-4196-83df-b34d4fdc321b
2025-11-05T14:48:21.571Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.571Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1758a1b3]
2025-11-05T14:48:21.572Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:21.572Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2b1f112b]
2025-11-05T14:48:21.573Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:21.573Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:21.573Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:21.573Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.573Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.573Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:21.624Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:21.625Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:21.625Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:21.625Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:21.626Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:21.628Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f3f53d0d-8263-4973-9014-c908d04d2db8
2025-11-05T14:48:21.629Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.629Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5b5e995d]
2025-11-05T14:48:21.630Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:48:21.632Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:48:21.632Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-05T14:48:21.663Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.663Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:48:21.694Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:21.695Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6f67495e]
2025-11-05T14:48:21.695Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:21.695Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:21.695Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:21.695Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.696Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.696Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:21.747Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:21.747Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:21.748Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:21.748Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:21.749Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:21.751Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 004f6290-7b0a-4422-b9c8-48c9cb04d557
2025-11-05T14:48:21.752Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.752Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1b8f3d13]
2025-11-05T14:48:21.760Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:48:21.761Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:48:21.761Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-05T14:48:21.763Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-05T14:48:21.764Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.764Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:21.769Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:21.770Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6e2d74a4]
2025-11-05T14:48:21.770Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:21.770Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:21.770Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:21.770Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.771Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.771Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:21.823Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:21.823Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:21.823Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:21.823Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:21.824Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:21.826Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0049b1fb-215f-4748-8a83-05f3ebeade9d
2025-11-05T14:48:21.827Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.827Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@19cb4676]
2025-11-05T14:48:21.828Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:48:21.829Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-05T14:48:21.829Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:48:21.830Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: 0049b1fb-215f-4748-8a83-05f3ebeade9d, newStatus: IN_PROGRESS
2025-11-05T14:48:21.830Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 0049b1fb-215f-4748-8a83-05f3ebeade9d
2025-11-05T14:48:21.836Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-05T14:48:21.845Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.845Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5bd690a7]
2025-11-05T14:48:21.855Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:21.855Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3fe63f00]
2025-11-05T14:48:21.856Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:21.856Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:21.856Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:21.856Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.856Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.856Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:21.907Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:21.908Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:21.908Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:21.908Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:21.909Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:21.911Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 461c9649-ad4d-41f3-a73a-3df7b8d394a6
2025-11-05T14:48:21.912Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.912Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@27df3a2e]
2025-11-05T14:48:21.913Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:48:21.914Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:48:21.914Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 461c9649-ad4d-41f3-a73a-3df7b8d394a6
2025-11-05T14:48:21.916Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.916Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@192bf5f7]
2025-11-05T14:48:21.923Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:21.924Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@618df156]
2025-11-05T14:48:21.924Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:21.924Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:21.924Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:21.924Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.925Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.925Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:21.978Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:21.978Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:21.979Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:21.979Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:21.979Z  WARN 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-05T14:48:21.982Z ERROR 56725 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-05T14:48:21.983Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:21.983Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:48:21.995Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:21.995Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@779565e1]
2025-11-05T14:48:21.996Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:21.996Z  INFO 56725 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:21.996Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:21.996Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.996Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:21.996Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:22.050Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:22.051Z DEBUG 56725 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:22.053Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:22.053Z  INFO 56725 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:22.057Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:22.063Z  INFO 56725 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: a400715b-e0b9-4052-b5f9-08aedbc1b2c0
2025-11-05T14:48:22.064Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:22.065Z DEBUG 56725 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@75b425d6]
2025-11-05T14:48:22.067Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:48:22.068Z DEBUG 56725 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-05T14:48:22.069Z  WARN 56725 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-05T14:48:22.076Z  INFO 56725 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:48:22.079Z  INFO 56725 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-05T14:48:22.081Z  INFO 56725 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T14:48:22.091Z  INFO 56725 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 56725 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:48:22.091Z  INFO 56725 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:48:22.092Z DEBUG 56725 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@209d6adf
2025-11-05T14:48:22.179Z  INFO 56725 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T14:48:22.185Z  INFO 56725 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-05T14:48:22.230Z  INFO 56725 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T14:48:22.231Z  INFO 56725 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T14:48:22.236Z  INFO 56725 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T14:48:22.236Z  INFO 56725 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-05T14:48:22.237Z  INFO 56725 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T14:48:22.237Z  INFO 56725 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-05T14:48:22.237Z  WARN 56725 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T14:48:22.238Z  INFO 56725 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T14:48:22.266Z  INFO 56725 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T14:48:22.272Z  INFO 56725 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:48:22.312Z  WARN 56725 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T14:48:22.323Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:48:22.330Z DEBUG 56725 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T14:48:22.333Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:48:22.336Z DEBUG 56725 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:48:22.357Z  INFO 56725 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T14:48:22.367Z  INFO 56725 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.286 seconds (process running for 8.259)
2025-11-05T14:48:22.717Z  INFO 56725 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:48:22.720Z  INFO 56725 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:48:22.722Z  INFO 56725 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T14:48:22.733Z  INFO 56725 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 56725 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:48:22.733Z  INFO 56725 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:48:22.808Z  INFO 56725 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T14:48:22.812Z  INFO 56725 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-05T14:48:22.950Z  INFO 56725 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-05T14:48:22.962Z  INFO 56725 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-05T14:48:22.962Z  INFO 56725 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-05T14:48:22.995Z  INFO 56725 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-05T14:48:22.995Z  INFO 56725 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 261 ms
2025-11-05T14:48:23.039Z  INFO 56725 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T14:48:23.040Z  INFO 56725 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T14:48:23.044Z  INFO 56725 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T14:48:23.045Z  INFO 56725 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-05T14:48:23.045Z  INFO 56725 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T14:48:23.046Z  INFO 56725 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-05T14:48:23.046Z  WARN 56725 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T14:48:23.046Z  INFO 56725 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T14:48:23.068Z  INFO 56725 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T14:48:23.072Z  INFO 56725 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:48:23.099Z  WARN 56725 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T14:48:23.109Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:48:23.117Z DEBUG 56725 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T14:48:23.120Z DEBUG 56725 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:48:23.122Z DEBUG 56725 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:48:23.140Z  INFO 56725 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T14:48:23.189Z  INFO 56725 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-05T14:48:23.191Z  INFO 56725 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.469 seconds (process running for 9.083)
2025-11-05T14:48:23.222Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:48:24.382Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:48:24.404Z  INFO 56725 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:48:24.405Z  INFO 56725 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:48:24.410Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:48:24.508Z  INFO 56725 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-05T14:48:24.508Z  INFO 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-05T14:48:24.508Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-05T14:48:24.508Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-05T14:48:24.508Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-05T14:48:24.509Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@a9fb54f
2025-11-05T14:48:24.509Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@61edd0cb
2025-11-05T14:48:24.509Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-05T14:48:24.509Z  INFO 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-05T14:48:24.512Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:48:24.513Z DEBUG 56725 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:24.515Z DEBUG 56725 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2372aab8]
2025-11-05T14:48:24.515Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:24.515Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:24.515Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:24.515Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.516Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.516Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:24.570Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:24.570Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:24.572Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:24.572Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:24.583Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:24.590Z  INFO 56725 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: dbc95640-bb8a-49a5-8cf6-4ec198c6f97b
2025-11-05T14:48:24.594Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:24.594Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@56785a68]
2025-11-05T14:48:24.598Z DEBUG 56725 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:48:24.601Z  INFO 56725 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: dbc95640-bb8a-49a5-8cf6-4ec198c6f97b
2025-11-05T14:48:24.608Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:48:24.614Z  INFO 56725 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:48:24.615Z  INFO 56725 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:48:24.621Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:48:24.650Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:48:24.650Z DEBUG 56725 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:24.651Z DEBUG 56725 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@23433071]
2025-11-05T14:48:24.651Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:24.651Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:24.651Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:24.651Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.651Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.651Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:24.705Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:24.706Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:24.707Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:24.707Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:24.710Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:24.716Z  INFO 56725 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 54e35fd8-9c21-47cf-9202-069e8a008b24
2025-11-05T14:48:24.717Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:24.717Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5d9f7a2f]
2025-11-05T14:48:24.718Z DEBUG 56725 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:48:24.721Z  INFO 56725 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 54e35fd8-9c21-47cf-9202-069e8a008b24
2025-11-05T14:48:24.737Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:48:24.747Z  INFO 56725 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:48:24.748Z  INFO 56725 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:48:24.752Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:48:24.772Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:48:24.773Z DEBUG 56725 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:24.773Z DEBUG 56725 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1d2e8ca3]
2025-11-05T14:48:24.773Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:24.773Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:24.774Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:24.774Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.774Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.774Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:24.827Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:24.828Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:24.829Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:24.829Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:24.833Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:24.841Z  INFO 56725 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: cb7b5bc7-5e9c-4de4-93c1-ec7ef340a15e
2025-11-05T14:48:24.843Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:24.844Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@63cc9ae9]
2025-11-05T14:48:24.846Z DEBUG 56725 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:48:24.849Z  INFO 56725 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-05T14:48:24.857Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:48:24.858Z DEBUG 56725 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:24.861Z DEBUG 56725 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@68ec4925]
2025-11-05T14:48:24.861Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:24.862Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:24.862Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:24.862Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.863Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:24.864Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:24.917Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:24.917Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:24.918Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:24.918Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:24.921Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:24.928Z  INFO 56725 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f3a39e5d-1524-4961-b928-9dc45c5a5e28
2025-11-05T14:48:24.930Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:24.930Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2716a073]
2025-11-05T14:48:24.932Z DEBUG 56725 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:48:24.935Z  INFO 56725 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-05T14:48:24.949Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:48:24.968Z  INFO 56725 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:48:24.970Z  INFO 56725 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:48:24.980Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:48:25.009Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:48:25.009Z DEBUG 56725 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:25.009Z DEBUG 56725 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@34e5db22]
2025-11-05T14:48:25.010Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:25.010Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:25.010Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:25.010Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:25.010Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:25.010Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:25.062Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:25.063Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:25.064Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:25.065Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:25.068Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:25.074Z  INFO 56725 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 020a318c-9380-4635-b986-b10a65b54e75
2025-11-05T14:48:25.076Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:25.076Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7b1f39f5]
2025-11-05T14:48:25.077Z DEBUG 56725 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:48:25.079Z  INFO 56725 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-05T14:48:25.082Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:48:25.082Z DEBUG 56725 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:48:25.084Z DEBUG 56725 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@51a50e61]
2025-11-05T14:48:25.084Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:48:25.084Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:48:25.084Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:48:25.084Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:48:25.084Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:48:25.085Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:48:25.138Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:48:25.139Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:48:25.140Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:48:25.140Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:48:25.142Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:48:25.145Z  INFO 56725 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 200d488f-7fac-4ad3-a02c-75ffdb4da8a5
2025-11-05T14:48:25.146Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:48:25.146Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1e5fe01e]
2025-11-05T14:48:25.147Z DEBUG 56725 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:48:25.149Z  INFO 56725 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-05T14:48:25.155Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:48:25.161Z  INFO 56725 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-05T14:48:25.202Z DEBUG 56725 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3f465ae, started on Wed Nov 05 14:48:16 WET 2025
2025-11-05T14:48:25.204Z DEBUG 56725 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@33d57d51, started on Wed Nov 05 14:48:18 WET 2025
2025-11-05T14:48:25.205Z  INFO 56725 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:48:25.284Z  INFO 56725 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-05T14:48:25.285Z  INFO 56725 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-05T14:48:25.285Z DEBUG 56725 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@209d6adf, started on Wed Nov 05 14:48:22 WET 2025
2025-11-05T14:48:25.286Z  INFO 56725 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:48:25.286Z  INFO 56725 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-05T14:48:25.287Z  INFO 56725 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-05T14:48:25.288Z  INFO 56725 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-05T14:48:25.289Z  INFO 56725 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-05T14:48:25.290Z  INFO 56725 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:48:25.291Z  INFO 56725 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-05T14:48:25.292Z  INFO 56725 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-05T14:49:00.848Z  INFO 58221 --- [main] p.r.h.s.unit.BookingControllerTest       : Starting BookingControllerTest using Java 21.0.9-ea with PID 58221 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:49:00.849Z  INFO 58221 --- [main] p.r.h.s.unit.BookingControllerTest       : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:49:00.863Z DEBUG 58221 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3f465ae
2025-11-05T14:49:01.467Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:49:01.547Z DEBUG 58221 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-05T14:49:01.564Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:49:01.601Z DEBUG 58221 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:49:01.654Z  INFO 58221 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-05T14:49:01.654Z  INFO 58221 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-05T14:49:01.655Z  INFO 58221 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-05T14:49:01.673Z  INFO 58221 --- [main] p.r.h.s.unit.BookingControllerTest       : Started BookingControllerTest in 1.21 seconds (process running for 3.482)
2025-11-05T14:49:01.711Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:01.762Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@65289e33]
2025-11-05T14:49:01.766Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:01.766Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:01.767Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Validation error: Municipality is required
2025-11-05T14:49:01.793Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.793Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:01.805Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T14:49:01.810Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T14:49:01.811Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.811Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:01.816Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:49:01.817Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED}]
2025-11-05T14:49:01.818Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:49:01.818Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Error updating status: Not found
2025-11-05T14:49:01.818Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.819Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:01.823Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:49:01.824Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED, note=Done}]
2025-11-05T14:49:01.824Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:49:01.824Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.825Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@26107e6d]
2025-11-05T14:49:01.835Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:49:01.835Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=RECEIVED}]
2025-11-05T14:49:01.836Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:49:01.836Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Invalid request: Invalid transition
2025-11-05T14:49:01.836Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.836Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:01.840Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:49:01.841Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:49:01.841Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found
2025-11-05T14:49:01.842Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.842Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:01.847Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:49:01.847Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:49:01.848Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.848Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@41a7445f]
2025-11-05T14:49:01.875Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:01.877Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:01.881Z  WARN 58221 --- [main] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-11-05T14:49:01.885Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.885Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing UNKNOWN instances]
2025-11-05T14:49:01.894Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T14:49:01.895Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T14:49:01.895Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Cannot cancel booking: Already cancelled
2025-11-05T14:49:01.895Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.895Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:01.899Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-05T14:49:01.899Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-05T14:49:01.900Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Booking not found: Not found
2025-11-05T14:49:01.900Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.900Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:01.904Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:01.905Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@73852c7c]
2025-11-05T14:49:01.905Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:01.905Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:01.906Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:01.906Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4b6fc615]
2025-11-05T14:49:01.912Z  INFO 58221 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.integration.BookingControllerITTest]: BookingControllerITTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:49:01.918Z  INFO 58221 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.integration.BookingControllerITTest
2025-11-05T14:49:01.922Z  INFO 58221 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T14:49:01.935Z  INFO 58221 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 58221 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:49:01.935Z  INFO 58221 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:49:01.936Z DEBUG 58221 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6c86938f
2025-11-05T14:49:02.183Z  INFO 58221 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T14:49:02.208Z  INFO 58221 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 2 JPA repository interfaces.
2025-11-05T14:49:02.447Z  INFO 58221 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T14:49:02.486Z  INFO 58221 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-05T14:49:02.518Z  INFO 58221 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T14:49:02.610Z  INFO 58221 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T14:49:02.633Z  INFO 58221 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-05T14:49:02.838Z  INFO 58221 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T14:49:02.840Z  INFO 58221 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-05T14:49:02.860Z  WARN 58221 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T14:49:02.879Z  INFO 58221 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T14:49:03.522Z  INFO 58221 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T14:49:03.564Z  INFO 58221 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:49:03.718Z  INFO 58221 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-05T14:49:04.268Z  WARN 58221 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T14:49:04.293Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:49:04.314Z DEBUG 58221 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T14:49:04.330Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:49:04.339Z DEBUG 58221 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:49:04.424Z  INFO 58221 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T14:49:04.453Z  INFO 58221 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-05T14:49:04.454Z  INFO 58221 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-05T14:49:04.454Z  INFO 58221 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-05T14:49:04.462Z  INFO 58221 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.54 seconds (process running for 6.271)
2025-11-05T14:49:04.468Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:04.471Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2e84a57b]
2025-11-05T14:49:04.472Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:04.472Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:04.477Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:04.477Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:04.534Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:04.539Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:04.841Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:04.842Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:04.848Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:04.848Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:04.945Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:04.992Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: a98eada8-fbc8-461f-bc4c-7532ea2108fe
2025-11-05T14:49:05.005Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.006Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2a971c]
2025-11-05T14:49:05.010Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:05.011Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@58390e40]
2025-11-05T14:49:05.011Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:05.011Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:05.011Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:05.011Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.012Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.012Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:05.068Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:05.068Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:05.069Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:05.069Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:05.071Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:05.073Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0acdb8d7-61b9-4c3b-9e37-75a98150fe77
2025-11-05T14:49:05.074Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.074Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@228db6f5]
2025-11-05T14:49:05.075Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:05.076Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@35d0b36d]
2025-11-05T14:49:05.076Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:05.076Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:05.076Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:05.076Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.076Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.076Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:05.132Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:05.132Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:05.133Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:05.133Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:05.134Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:05.136Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f5ecb15f-59db-4aaf-9c0e-d93ab1d1855b
2025-11-05T14:49:05.137Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.137Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1a17b688]
2025-11-05T14:49:05.138Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:05.140Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:05.140Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-05T14:49:05.169Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.169Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:49:05.201Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:05.202Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@72c5e627]
2025-11-05T14:49:05.202Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:05.202Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:05.202Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:05.202Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.202Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.203Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:05.259Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:05.259Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:05.260Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:05.260Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:05.261Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:05.263Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 9542d51f-cd45-4664-be38-0fd5209f44d5
2025-11-05T14:49:05.264Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.264Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7a75660d]
2025-11-05T14:49:05.274Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:49:05.274Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:49:05.274Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-05T14:49:05.277Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-05T14:49:05.277Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.277Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:05.283Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:05.283Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@12ecb9bc]
2025-11-05T14:49:05.283Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:05.283Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:05.284Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:05.284Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.284Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.284Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:05.341Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:05.342Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:05.342Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:05.342Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:05.343Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:05.345Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 55371bc6-4460-48db-a3ef-896764588f10
2025-11-05T14:49:05.346Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.346Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@501ce93e]
2025-11-05T14:49:05.347Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:49:05.348Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-05T14:49:05.348Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-05T14:49:05.348Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: 55371bc6-4460-48db-a3ef-896764588f10, newStatus: IN_PROGRESS
2025-11-05T14:49:05.349Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 55371bc6-4460-48db-a3ef-896764588f10
2025-11-05T14:49:05.354Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-05T14:49:05.362Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.362Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1c4689bf]
2025-11-05T14:49:05.371Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:05.372Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@73e73d8a]
2025-11-05T14:49:05.372Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:05.372Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:05.372Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:05.372Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.372Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.373Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:05.429Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:05.430Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:05.430Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:05.430Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:05.431Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:05.433Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 4694f322-d446-4f7f-94fe-8e826f9ea8b3
2025-11-05T14:49:05.434Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.434Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5220a012]
2025-11-05T14:49:05.435Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:49:05.435Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:49:05.435Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 4694f322-d446-4f7f-94fe-8e826f9ea8b3
2025-11-05T14:49:05.437Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.438Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@39621d2]
2025-11-05T14:49:05.445Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:05.446Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@51cf231c]
2025-11-05T14:49:05.446Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:05.446Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:05.446Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:05.446Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.446Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.447Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:05.502Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:05.503Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:05.503Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:05.503Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:05.503Z  WARN 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-05T14:49:05.504Z ERROR 58221 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-05T14:49:05.505Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.505Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:05.510Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:05.511Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6b8c2238]
2025-11-05T14:49:05.511Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:05.511Z  INFO 58221 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:05.511Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:05.511Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.511Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:05.512Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:05.569Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:05.570Z DEBUG 58221 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:05.571Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:05.571Z  INFO 58221 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:05.576Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:05.584Z  INFO 58221 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f686617a-79d3-4168-9f6f-e0efee352829
2025-11-05T14:49:05.585Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:05.586Z DEBUG 58221 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@46f87427]
2025-11-05T14:49:05.588Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-05T14:49:05.589Z DEBUG 58221 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-05T14:49:05.591Z  WARN 58221 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-05T14:49:05.598Z  INFO 58221 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:49:05.602Z  INFO 58221 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-05T14:49:05.605Z  INFO 58221 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T14:49:05.616Z  INFO 58221 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 58221 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:49:05.616Z  INFO 58221 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:49:05.617Z DEBUG 58221 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@c37f23c
2025-11-05T14:49:05.690Z  INFO 58221 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T14:49:05.694Z  INFO 58221 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-05T14:49:05.746Z  INFO 58221 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T14:49:05.747Z  INFO 58221 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T14:49:05.752Z  INFO 58221 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T14:49:05.752Z  INFO 58221 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-05T14:49:05.753Z  INFO 58221 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T14:49:05.753Z  INFO 58221 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-05T14:49:05.753Z  WARN 58221 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T14:49:05.753Z  INFO 58221 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T14:49:05.776Z  INFO 58221 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T14:49:05.782Z  INFO 58221 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:49:05.828Z  WARN 58221 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T14:49:05.839Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:49:05.845Z DEBUG 58221 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T14:49:05.848Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:49:05.851Z DEBUG 58221 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:49:05.871Z  INFO 58221 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T14:49:05.880Z  INFO 58221 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.276 seconds (process running for 7.689)
2025-11-05T14:49:06.162Z  INFO 58221 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:49:06.165Z  INFO 58221 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:49:06.166Z  INFO 58221 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-05T14:49:06.175Z  INFO 58221 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 58221 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:49:06.176Z  INFO 58221 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:49:06.244Z  INFO 58221 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T14:49:06.248Z  INFO 58221 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-05T14:49:06.370Z  INFO 58221 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-05T14:49:06.381Z  INFO 58221 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-05T14:49:06.381Z  INFO 58221 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-05T14:49:06.413Z  INFO 58221 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-05T14:49:06.413Z  INFO 58221 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 237 ms
2025-11-05T14:49:06.453Z  INFO 58221 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T14:49:06.454Z  INFO 58221 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T14:49:06.457Z  INFO 58221 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T14:49:06.458Z  INFO 58221 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-05T14:49:06.458Z  INFO 58221 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T14:49:06.458Z  INFO 58221 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-05T14:49:06.459Z  WARN 58221 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T14:49:06.459Z  INFO 58221 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T14:49:06.483Z  INFO 58221 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T14:49:06.487Z  INFO 58221 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:49:06.512Z  WARN 58221 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T14:49:06.522Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:49:06.530Z DEBUG 58221 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T14:49:06.533Z DEBUG 58221 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:49:06.536Z DEBUG 58221 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:49:06.554Z  INFO 58221 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T14:49:06.595Z  INFO 58221 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-05T14:49:06.597Z  INFO 58221 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.431 seconds (process running for 8.405)
2025-11-05T14:49:06.629Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:49:07.827Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-05T14:49:07.930Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-05T14:49:07.994Z  INFO 58221 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-05T14:49:07.995Z  INFO 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-05T14:49:07.995Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-05T14:49:07.995Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-05T14:49:07.995Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-05T14:49:07.995Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@20c63cab
2025-11-05T14:49:07.995Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@4e6b95b4
2025-11-05T14:49:07.995Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-05T14:49:07.995Z  INFO 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-11-05T14:49:07.998Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:49:07.999Z DEBUG 58221 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:49:08.000Z  INFO 58221 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:08.000Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:08.000Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:08.058Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:08.059Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:08.061Z  INFO 58221 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:08.061Z  INFO 58221 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:08.064Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:08.065Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:49:08.086Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:08.091Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:49:08.092Z DEBUG 58221 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:49:08.092Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:08.092Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:08.093Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:08.151Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:08.152Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:08.153Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:08.153Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:08.154Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:08.155Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:49:08.157Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:09.989Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-05T14:49:10.007Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-05T14:49:10.021Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manh
2025-11-05T14:49:10.037Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colcho e moblia velha
2025-11-05T14:49:10.077Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:49:10.078Z DEBUG 58221 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:10.081Z DEBUG 58221 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4310c69a]
2025-11-05T14:49:10.081Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:10.081Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:10.082Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:10.082Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:10.082Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:10.082Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:10.144Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:10.145Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:10.146Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:10.146Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:10.153Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:10.157Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ecb1eb7e-bc3a-4691-8f09-18f2563e9de1
2025-11-05T14:49:10.161Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:10.161Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1390a4ec]
2025-11-05T14:49:10.163Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:49:12.088Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-05T14:49:12.099Z  INFO 58221 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-05T14:49:12.101Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:49:12.130Z  INFO 58221 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:49:12.131Z  INFO 58221 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:49:12.136Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:49:12.169Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:49:12.169Z DEBUG 58221 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:12.170Z DEBUG 58221 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@785d5186]
2025-11-05T14:49:12.170Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:12.170Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:12.170Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:12.170Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:12.170Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:12.170Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:12.227Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:12.227Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:12.228Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:12.228Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:12.231Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:12.237Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 8e13607a-ecdd-49db-b2aa-b3f1a8b43ced
2025-11-05T14:49:12.238Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:12.239Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@37a7bac6]
2025-11-05T14:49:12.240Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:49:12.248Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 8e13607a-ecdd-49db-b2aa-b3f1a8b43ced
2025-11-05T14:49:12.366Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-05T14:49:12.406Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-05T14:49:12.436Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: 8e13607a-ecdd-49db-b2aa-b3f1a8b43ced
2025-11-05T14:49:12.481Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/8e13607a-ecdd-49db-b2aa-b3f1a8b43ced", parameters={}
2025-11-05T14:49:12.482Z DEBUG 58221 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:49:12.483Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:49:12.483Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 8e13607a-ecdd-49db-b2aa-b3f1a8b43ced
2025-11-05T14:49:12.486Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:12.487Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3f825da5]
2025-11-05T14:49:12.489Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:13.985Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-05T14:49:13.996Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-05T14:49:14.009Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: 8e13607a-ecdd-49db-b2aa-b3f1a8b43ced
2025-11-05T14:49:14.010Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:49:14.027Z  INFO 58221 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:49:14.030Z  INFO 58221 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:49:14.043Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:49:14.074Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:49:14.074Z DEBUG 58221 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:14.075Z DEBUG 58221 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@61a11d80]
2025-11-05T14:49:14.075Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:14.075Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:14.075Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:14.075Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:14.075Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:14.075Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:14.134Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:14.135Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:14.135Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:14.136Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:14.139Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:14.145Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: b2ad6e7d-ef1f-4353-abb2-eb42b1ca74c7
2025-11-05T14:49:14.147Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:14.148Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1f3fff4d]
2025-11-05T14:49:14.149Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:49:14.151Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: b2ad6e7d-ef1f-4353-abb2-eb42b1ca74c7
2025-11-05T14:49:14.254Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-05T14:49:14.295Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-05T14:49:14.321Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-05T14:49:14.360Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-05T14:49:14.361Z DEBUG 58221 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-05T14:49:14.361Z  INFO 58221 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-05T14:49:14.361Z  INFO 58221 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-05T14:49:14.363Z ERROR 58221 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-05T14:49:14.364Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:14.364Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-05T14:49:14.364Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-05T14:49:15.862Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-05T14:49:15.873Z  INFO 58221 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-05T14:49:15.874Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:49:15.894Z  INFO 58221 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:49:15.896Z  INFO 58221 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:49:15.903Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:49:15.933Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:49:15.933Z DEBUG 58221 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:15.934Z DEBUG 58221 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@458e0128]
2025-11-05T14:49:15.934Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:15.934Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:15.934Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:15.934Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:15.934Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:15.935Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:15.992Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:15.992Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:15.993Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:15.994Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:15.996Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:16.003Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0228d64b-5659-4006-89af-0c3c56cd6d46
2025-11-05T14:49:16.005Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:16.005Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3bb4745b]
2025-11-05T14:49:16.007Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:49:16.010Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-05T14:49:16.019Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:49:16.020Z DEBUG 58221 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:16.022Z DEBUG 58221 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7ee93d5d]
2025-11-05T14:49:16.022Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:16.022Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:16.022Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:16.023Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:16.023Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:16.023Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:16.080Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:16.081Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:16.082Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:16.082Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:16.085Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:16.089Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 13224e81-47e7-4417-b4a4-8832cd5de355
2025-11-05T14:49:16.090Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:16.090Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3113d6cb]
2025-11-05T14:49:16.090Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:49:16.092Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-05T14:49:16.212Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-05T14:49:16.279Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-05T14:49:16.284Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:49:16.285Z DEBUG 58221 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:49:16.285Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T14:49:16.285Z  INFO 58221 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:16.285Z DEBUG 58221 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:16.285Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:16.285Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:16.286Z  INFO 58221 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:16.286Z  INFO 58221 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T14:49:16.293Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:16.294Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:49:16.299Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:16.301Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T14:49:16.302Z DEBUG 58221 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:16.302Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:16.302Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T14:49:16.305Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:16.305Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:49:16.308Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:16.343Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:16.344Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:16.345Z  INFO 58221 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:16.345Z  INFO 58221 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:16.345Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:16.346Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:49:16.347Z DEBUG 58221 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:16.354Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:49:16.355Z DEBUG 58221 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:49:16.356Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:16.356Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:16.357Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:16.414Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:16.415Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:16.416Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:16.416Z  INFO 58221 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:16.418Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:16.419Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:49:16.421Z DEBUG 58221 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:18.335Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-05T14:49:18.388Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-05T14:49:18.388Z DEBUG 58221 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:18.389Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:18.389Z  INFO 58221 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-05T14:49:18.393Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:18.394Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:49:18.396Z DEBUG 58221 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:19.917Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-05T14:49:19.934Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-05T14:49:19.935Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:49:19.952Z  INFO 58221 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-05T14:49:19.954Z  INFO 58221 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-05T14:49:19.966Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-05T14:49:19.991Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:49:19.991Z DEBUG 58221 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:19.992Z DEBUG 58221 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2f2ec8ba]
2025-11-05T14:49:19.992Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:19.992Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:19.992Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:19.992Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:19.992Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:19.992Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:20.048Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:20.049Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:20.050Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:20.050Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:20.053Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:20.061Z  INFO 58221 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 2609fa5c-6253-4619-b495-dff038558049
2025-11-05T14:49:20.063Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:20.063Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@21149159]
2025-11-05T14:49:20.064Z DEBUG 58221 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:49:20.066Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-05T14:49:20.070Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-05T14:49:20.070Z DEBUG 58221 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-05T14:49:20.072Z DEBUG 58221 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@406df123]
2025-11-05T14:49:20.072Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-05T14:49:20.072Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-05T14:49:20.073Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-05T14:49:20.073Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:20.073Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:20.073Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:20.132Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:20.133Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:20.134Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:20.134Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:20.137Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-05T14:49:20.141Z  INFO 58221 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 8b9800ee-f62d-4666-ad56-64036c7ab73d
2025-11-05T14:49:20.143Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:20.143Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@40e603f]
2025-11-05T14:49:20.145Z DEBUG 58221 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-05T14:49:20.147Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-05T14:49:20.236Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-05T14:49:20.299Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-05T14:49:20.305Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:49:20.305Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T14:49:20.306Z DEBUG 58221 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:20.306Z DEBUG 58221 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:49:20.306Z  INFO 58221 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:20.306Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:20.306Z  INFO 58221 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T14:49:20.306Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:20.306Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:20.309Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:20.309Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:49:20.313Z DEBUG 58221 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:20.314Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-05T14:49:20.315Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-05T14:49:20.316Z DEBUG 58221 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:20.316Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:20.316Z  INFO 58221 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-05T14:49:20.319Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:20.320Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:49:20.323Z DEBUG 58221 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:20.354Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-05T14:49:20.354Z DEBUG 58221 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-05T14:49:20.355Z  INFO 58221 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-05T14:49:20.355Z  INFO 58221 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-05T14:49:20.359Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:20.359Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-05T14:49:20.361Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:20.361Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:20.362Z  INFO 58221 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:20.362Z  INFO 58221 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:20.362Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:20.362Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:49:20.363Z DEBUG 58221 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:20.364Z DEBUG 58221 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:20.372Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-05T14:49:20.372Z DEBUG 58221 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-05T14:49:20.372Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-05T14:49:20.372Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-05T14:49:20.373Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/yaml, application/*+json]
2025-11-05T14:49:20.430Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-05T14:49:20.430Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-05T14:49:20.432Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-05T14:49:20.432Z  INFO 58221 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-05T14:49:20.433Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-11-05T14:49:20.434Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaa, Alcochete, (truncated)...]
2025-11-05T14:49:20.435Z DEBUG 58221 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:21.856Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-05T14:49:21.873Z  INFO 58221 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-05T14:49:21.875Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-05T14:49:21.894Z  INFO 58221 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-05T14:49:21.942Z DEBUG 58221 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3f465ae, started on Wed Nov 05 14:49:00 WET 2025
2025-11-05T14:49:21.943Z DEBUG 58221 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6c86938f, started on Wed Nov 05 14:49:01 WET 2025
2025-11-05T14:49:21.944Z  INFO 58221 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:49:22.014Z  INFO 58221 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-05T14:49:22.015Z  INFO 58221 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-05T14:49:22.016Z DEBUG 58221 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@c37f23c, started on Wed Nov 05 14:49:05 WET 2025
2025-11-05T14:49:22.017Z  INFO 58221 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:49:22.017Z  INFO 58221 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-05T14:49:22.018Z  INFO 58221 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-05T14:49:22.018Z  INFO 58221 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-05T14:49:22.020Z  INFO 58221 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-05T14:49:22.021Z  INFO 58221 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:49:22.022Z  INFO 58221 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-05T14:49:22.023Z  INFO 58221 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-05T14:49:41.550Z  INFO 59560 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Starting Hw1TqsApplication using Java 21.0.9-ea with PID 59560 (/home/rodrigo-costa/Documentos/projtqs/api/target/classes started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-05T14:49:41.551Z  INFO 59560 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-05T14:49:41.571Z  INFO 59560 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-05T14:49:41.571Z  INFO 59560 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-05T14:49:41.903Z  INFO 59560 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-05T14:49:41.933Z  INFO 59560 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-11-05T14:49:42.175Z  INFO 59560 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-05T14:49:42.183Z  INFO 59560 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-05T14:49:42.183Z  INFO 59560 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-05T14:49:42.201Z  INFO 59560 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-05T14:49:42.202Z  INFO 59560 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 630 ms
2025-11-05T14:49:42.276Z  INFO 59560 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-05T14:49:42.295Z  INFO 59560 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-05T14:49:42.308Z  INFO 59560 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-05T14:49:42.416Z  INFO 59560 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-05T14:49:42.429Z  INFO 59560 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-05T14:49:42.516Z  INFO 59560 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-05T14:49:42.516Z  INFO 59560 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-05T14:49:42.527Z  WARN 59560 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-05T14:49:42.537Z  INFO 59560 --- [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-05T14:49:42.937Z  INFO 59560 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-05T14:49:42.961Z  INFO 59560 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:49:43.088Z  INFO 59560 --- [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-05T14:49:43.403Z  WARN 59560 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-05T14:49:43.454Z DEBUG 59560 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-11-05T14:49:43.473Z DEBUG 59560 --- [restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-05T14:49:43.486Z DEBUG 59560 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-05T14:49:43.508Z DEBUG 59560 --- [restartedMain] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-05T14:49:43.569Z  INFO 59560 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-05T14:49:43.599Z  INFO 59560 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-11-05T14:49:43.613Z  INFO 59560 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-05T14:49:43.619Z  INFO 59560 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Started Hw1TqsApplication in 2.263 seconds (process running for 2.427)
2025-11-05T14:49:48.299Z  INFO 59560 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-05T14:49:48.300Z  INFO 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-05T14:49:48.300Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-05T14:49:48.300Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-05T14:49:48.300Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-05T14:49:48.300Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@24256e71
2025-11-05T14:49:48.301Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@513c8aff
2025-11-05T14:49:48.301Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-05T14:49:48.301Z  INFO 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-05T14:49:48.305Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/swagger-ui/index.html", parameters={}
2025-11-05T14:49:48.309Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-05T14:49:48.322Z DEBUG 59560 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.337Z DEBUG 59560 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/swagger-ui/swagger-ui.css", parameters={}
2025-11-05T14:49:48.338Z DEBUG 59560 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/swagger-ui/index.css", parameters={}
2025-11-05T14:49:48.338Z DEBUG 59560 --- [http-nio-8080-exec-2] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-05T14:49:48.338Z DEBUG 59560 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2025-11-05T14:49:48.338Z DEBUG 59560 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/swagger-ui/swagger-initializer.js", parameters={}
2025-11-05T14:49:48.338Z DEBUG 59560 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2025-11-05T14:49:48.339Z DEBUG 59560 --- [http-nio-8080-exec-5] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-05T14:49:48.339Z DEBUG 59560 --- [http-nio-8080-exec-3] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-05T14:49:48.339Z DEBUG 59560 --- [http-nio-8080-exec-6] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-05T14:49:48.339Z DEBUG 59560 --- [http-nio-8080-exec-4] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-05T14:49:48.341Z DEBUG 59560 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.342Z DEBUG 59560 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.343Z DEBUG 59560 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.362Z DEBUG 59560 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.364Z DEBUG 59560 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.499Z DEBUG 59560 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/v3/api-docs/swagger-config", parameters={}
2025-11-05T14:49:48.499Z DEBUG 59560 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/swagger-ui/favicon-32x32.png", parameters={}
2025-11-05T14:49:48.500Z DEBUG 59560 --- [http-nio-8080-exec-8] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-11-05T14:49:48.500Z DEBUG 59560 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2025-11-05T14:49:48.502Z DEBUG 59560 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.510Z DEBUG 59560 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2025-11-05T14:49:48.519Z DEBUG 59560 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2025-11-05T14:49:48.521Z DEBUG 59560 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:49:48.527Z DEBUG 59560 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/v3/api-docs", parameters={}
2025-11-05T14:49:48.528Z DEBUG 59560 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-11-05T14:49:48.677Z  INFO 59560 --- [http-nio-8080-exec-9] o.springdoc.api.AbstractOpenApiResource  : Init duration for springdoc-openapi is: 140 ms
2025-11-05T14:49:48.689Z DEBUG 59560 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2025-11-05T14:49:48.689Z DEBUG 59560 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 49, 46, 48, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-11-05T14:49:48.690Z DEBUG 59560 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-05T14:51:48.122Z  INFO 59560 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-05T14:51:48.130Z  INFO 59560 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-05T14:51:48.138Z  INFO 59560 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-05T14:51:48.150Z  WARN 59560 --- [SpringApplicationShutdownHook] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-05T14:51:48.151Z  INFO 59560 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-05T14:51:48.152Z  INFO 59560 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
