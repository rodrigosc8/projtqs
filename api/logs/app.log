2025-11-04T12:05:11.141Z  INFO 28829 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 28829 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:05:11.142Z  INFO 28829 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:05:11.150Z DEBUG 28829 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@285583d4
2025-11-04T12:05:11.499Z  INFO 28829 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:05:11.542Z  INFO 28829 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2025-11-04T12:05:11.807Z  INFO 28829 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:05:11.832Z  INFO 28829 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-04T12:05:11.847Z  INFO 28829 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:05:11.900Z  INFO 28829 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:05:11.914Z  INFO 28829 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-04T12:05:12.009Z  INFO 28829 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:05:12.010Z  INFO 28829 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-04T12:05:12.021Z  WARN 28829 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:05:12.031Z  INFO 28829 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:05:12.406Z  INFO 28829 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:05:12.433Z  INFO 28829 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:05:12.606Z  INFO 28829 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-04T12:05:13.028Z  WARN 28829 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:05:13.071Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:05:13.118Z DEBUG 28829 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:05:13.138Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:05:13.166Z DEBUG 28829 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:05:13.246Z  INFO 28829 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:05:13.293Z  INFO 28829 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T12:05:13.293Z  INFO 28829 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T12:05:13.294Z  INFO 28829 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-04T12:05:13.314Z  INFO 28829 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.363 seconds (process running for 3.594)
2025-11-04T12:05:13.348Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:13.376Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@afee49e]
2025-11-04T12:05:13.379Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:13.379Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-20, timeslot=Manhã, description=Booking 1
2025-11-04T12:05:13.383Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-04T12:05:13.383Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:13.435Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:13.438Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:13.771Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:13.772Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:13.775Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:13.775Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:13.821Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-04T12:05:13.848Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 882ac8da-2c7f-4823-ba11-2074888a9b7b
2025-11-04T12:05:13.864Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:13.864Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@35c630af]
2025-11-04T12:05:13.875Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:13.875Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4f1a6259]
2025-11-04T12:05:13.876Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:13.876Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-21, timeslot=Tarde, description=Booking 2
2025-11-04T12:05:13.876Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-21
2025-11-04T12:05:13.876Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:13.876Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:13.876Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:14.188Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:14.189Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:14.191Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:14.191Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:14.193Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-21: 0/5
2025-11-04T12:05:14.194Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 540a3e4d-619c-4390-8f37-cb9d9e7383dd
2025-11-04T12:05:14.195Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.195Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@28220b56]
2025-11-04T12:05:14.196Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:14.197Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2f5823c7]
2025-11-04T12:05:14.197Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:14.197Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-22, timeslot=Noite, description=Booking Porto
2025-11-04T12:05:14.197Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-22
2025-11-04T12:05:14.197Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.197Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.197Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:14.250Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:14.250Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:14.251Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:14.251Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:14.253Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-22: 0/5
2025-11-04T12:05:14.257Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1619e859-d09d-455a-93cd-4004ac311333
2025-11-04T12:05:14.259Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.259Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3d1b97e4]
2025-11-04T12:05:14.261Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:05:14.266Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:05:14.267Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-04T12:05:14.284Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.284Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:05:14.321Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:14.322Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2683fbab]
2025-11-04T12:05:14.322Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:14.322Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-01, timeslot=Manhã, description=Teste integração
2025-11-04T12:05:14.322Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-04T12:05:14.322Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.322Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.323Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:14.376Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:14.377Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:14.378Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:14.378Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:14.381Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-04T12:05:14.386Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 23de7a4d-a9b8-48c9-830e-5e5517682996
2025-11-04T12:05:14.388Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.388Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@290def7d]
2025-11-04T12:05:14.398Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:05:14.398Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-04T12:05:14.398Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-04T12:05:14.400Z ERROR 28829 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-04T12:05:14.401Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.401Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:05:14.406Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:14.407Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5f58ff4f]
2025-11-04T12:05:14.407Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:14.407Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Lisboa, date=2025-12-25, timeslot=Manhã, description=Teste update estado
2025-11-04T12:05:14.407Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-04T12:05:14.407Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.407Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.408Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:14.461Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:14.462Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:14.463Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:14.463Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:14.466Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-04T12:05:14.472Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 26c0dd27-384c-4c2a-ae9a-9026be14e148
2025-11-04T12:05:14.474Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.474Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2e51e263]
2025-11-04T12:05:14.476Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:05:14.478Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-04T12:05:14.479Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/26c0dd27-384c-4c2a-ae9a-9026be14e148/status - Updating status
2025-11-04T12:05:14.479Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: 26c0dd27-384c-4c2a-ae9a-9026be14e148, newStatus: IN_PROGRESS
2025-11-04T12:05:14.479Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 26c0dd27-384c-4c2a-ae9a-9026be14e148
2025-11-04T12:05:14.484Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-04T12:05:14.489Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.489Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@37d88e50]
2025-11-04T12:05:14.497Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:14.498Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@767cacee]
2025-11-04T12:05:14.498Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:14.498Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-15, timeslot=Tarde, description=Teste GET por token
2025-11-04T12:05:14.498Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-04T12:05:14.498Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.498Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.498Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:14.551Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:14.552Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:14.553Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:14.553Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:14.556Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-04T12:05:14.560Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 14bcb117-5e1f-4322-ab52-88883d20f267
2025-11-04T12:05:14.561Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.561Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4337cf96]
2025-11-04T12:05:14.563Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:05:14.564Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/14bcb117-5e1f-4322-ab52-88883d20f267 - Fetching booking
2025-11-04T12:05:14.564Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 14bcb117-5e1f-4322-ab52-88883d20f267
2025-11-04T12:05:14.566Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.566Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@12882698]
2025-11-04T12:05:14.573Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:14.573Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@149b14f6]
2025-11-04T12:05:14.574Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:14.574Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2020-01-01, timeslot=Manhã, description=Data passada
2025-11-04T12:05:14.574Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-04T12:05:14.574Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.574Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.574Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:14.629Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:14.630Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:14.631Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:14.631Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:14.631Z  WARN 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-04T12:05:14.635Z ERROR 28829 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-04T12:05:14.636Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.637Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:05:14.652Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:14.653Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@52997ccc]
2025-11-04T12:05:14.653Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:14.654Z  INFO 28829 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Coimbra, date=2025-12-30, timeslot=Tarde, description=Teste estado inválido
2025-11-04T12:05:14.654Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-04T12:05:14.655Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.655Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:14.656Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:14.708Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:14.709Z DEBUG 28829 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:14.710Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:14.710Z  INFO 28829 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:14.712Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-04T12:05:14.717Z  INFO 28829 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: cffe8dda-887e-4afe-8ad7-441d841176ee
2025-11-04T12:05:14.718Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:14.719Z DEBUG 28829 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@362a2806]
2025-11-04T12:05:14.721Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:05:14.723Z DEBUG 28829 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-04T12:05:14.726Z  WARN 28829 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-04T12:05:14.751Z  INFO 28829 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:05:14.765Z  INFO 28829 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-04T12:05:14.774Z  INFO 28829 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:05:14.801Z  INFO 28829 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 28829 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:05:14.802Z  INFO 28829 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:05:14.803Z DEBUG 28829 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@28e7fbc4
2025-11-04T12:05:14.867Z  INFO 28829 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:05:14.871Z  INFO 28829 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T12:05:14.910Z  INFO 28829 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:05:14.911Z  INFO 28829 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:05:14.915Z  INFO 28829 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:05:14.915Z  INFO 28829 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-04T12:05:14.916Z  INFO 28829 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:05:14.916Z  INFO 28829 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-04T12:05:14.917Z  WARN 28829 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:05:14.917Z  INFO 28829 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:05:14.939Z  INFO 28829 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:05:14.944Z  INFO 28829 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:05:14.980Z  WARN 28829 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:05:14.990Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:05:14.997Z DEBUG 28829 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:05:15.000Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:05:15.003Z DEBUG 28829 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:05:15.023Z  INFO 28829 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:05:15.034Z  INFO 28829 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.26 seconds (process running for 5.314)
2025-11-04T12:05:15.200Z  INFO 28829 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:05:15.203Z  INFO 28829 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:05:15.204Z  INFO 28829 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:05:15.214Z  INFO 28829 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 28829 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:05:15.214Z  INFO 28829 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:05:15.275Z  INFO 28829 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:05:15.280Z  INFO 28829 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-04T12:05:15.371Z  INFO 28829 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-04T12:05:15.379Z  INFO 28829 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-04T12:05:15.379Z  INFO 28829 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-04T12:05:15.400Z  INFO 28829 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-04T12:05:15.400Z  INFO 28829 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 185 ms
2025-11-04T12:05:15.430Z  INFO 28829 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:05:15.431Z  INFO 28829 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:05:15.435Z  INFO 28829 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:05:15.435Z  INFO 28829 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-04T12:05:15.436Z  INFO 28829 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:05:15.436Z  INFO 28829 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-04T12:05:15.436Z  WARN 28829 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:05:15.436Z  INFO 28829 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:05:15.454Z  INFO 28829 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:05:15.458Z  INFO 28829 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:05:15.478Z  WARN 28829 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:05:15.486Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:05:15.492Z DEBUG 28829 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:05:15.495Z DEBUG 28829 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:05:15.497Z DEBUG 28829 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:05:15.508Z  INFO 28829 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:05:15.539Z  INFO 28829 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-04T12:05:15.541Z  INFO 28829 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.337 seconds (process running for 5.821)
2025-11-04T12:05:15.565Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:05:16.774Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-04T12:05:16.876Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-04T12:05:16.912Z  INFO 28829 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-04T12:05:16.913Z  INFO 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-04T12:05:16.913Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-04T12:05:16.913Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-04T12:05:16.913Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-04T12:05:16.913Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@789c61a3
2025-11-04T12:05:16.913Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@73959127
2025-11-04T12:05:16.914Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-04T12:05:16.914Z  INFO 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-04T12:05:16.916Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:05:16.916Z DEBUG 28829 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:05:16.917Z  INFO 28829 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:16.917Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:16.917Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:16.969Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:16.970Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:16.970Z  INFO 28829 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:16.970Z  INFO 28829 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:16.971Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:16.971Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:05:16.973Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:16.978Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:05:16.979Z DEBUG 28829 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:05:16.979Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:16.979Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:16.980Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:17.033Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:17.034Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:17.035Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:17.035Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:17.036Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:17.037Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:05:17.039Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:18.930Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-04T12:05:18.945Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-04T12:05:18.958Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manhã
2025-11-04T12:05:18.973Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colchão e mobília velha
2025-11-04T12:05:19.004Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:05:19.004Z DEBUG 28829 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:19.006Z DEBUG 28829 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@55cf3dd9]
2025-11-04T12:05:19.006Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:19.006Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2025-11-20, timeslot=Manhã, description=Colchão e mobília velha
2025-11-04T12:05:19.006Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2025-11-20
2025-11-04T12:05:19.006Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:19.007Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:19.007Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:19.060Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:19.061Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:19.062Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:19.062Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:19.072Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2025-11-20: 0/5
2025-11-04T12:05:19.079Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 7a3c9e00-3058-445b-a7f0-22528800e9e4
2025-11-04T12:05:19.084Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:19.084Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2e747962]
2025-11-04T12:05:19.085Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:05:21.015Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-04T12:05:21.019Z  INFO 28829 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-04T12:05:21.019Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:05:21.033Z  INFO 28829 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:05:21.034Z  INFO 28829 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:05:21.038Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:05:21.068Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:05:21.069Z DEBUG 28829 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:21.069Z DEBUG 28829 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5169d139]
2025-11-04T12:05:21.069Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:21.069Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test booking
2025-11-04T12:05:21.070Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:05:21.070Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:21.070Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:21.070Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:21.123Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:21.123Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:21.124Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:21.124Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:21.126Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 0/5
2025-11-04T12:05:21.128Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1961f118-417a-48d8-89de-97f0493158a5
2025-11-04T12:05:21.128Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:21.128Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1e932f5f]
2025-11-04T12:05:21.129Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:05:21.134Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 1961f118-417a-48d8-89de-97f0493158a5
2025-11-04T12:05:21.448Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:05:21.489Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:05:21.520Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: 1961f118-417a-48d8-89de-97f0493158a5
2025-11-04T12:05:21.557Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/1961f118-417a-48d8-89de-97f0493158a5", parameters={}
2025-11-04T12:05:21.557Z DEBUG 28829 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:05:21.558Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/1961f118-417a-48d8-89de-97f0493158a5 - Fetching booking
2025-11-04T12:05:21.558Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 1961f118-417a-48d8-89de-97f0493158a5
2025-11-04T12:05:21.561Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:21.561Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5533fdad]
2025-11-04T12:05:21.563Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:23.060Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:05:23.071Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-04T12:05:23.083Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: 1961f118-417a-48d8-89de-97f0493158a5
2025-11-04T12:05:23.084Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:05:23.101Z  INFO 28829 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:05:23.102Z  INFO 28829 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:05:23.113Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:05:23.143Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:05:23.143Z DEBUG 28829 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:23.144Z DEBUG 28829 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@b2c2637]
2025-11-04T12:05:23.144Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:23.144Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test booking
2025-11-04T12:05:23.144Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:05:23.144Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:23.145Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:23.145Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:23.198Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:23.199Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:23.200Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:23.200Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:23.203Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 1/5
2025-11-04T12:05:23.208Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d7f6748e-112f-4413-9365-2be6ec7895c1
2025-11-04T12:05:23.210Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:23.210Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@75d82615]
2025-11-04T12:05:23.211Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:05:23.214Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: d7f6748e-112f-4413-9365-2be6ec7895c1
2025-11-04T12:05:23.558Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:05:23.595Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:05:23.620Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-04T12:05:23.666Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-04T12:05:23.667Z DEBUG 28829 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:05:23.668Z  INFO 28829 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/INVALID - Fetching booking
2025-11-04T12:05:23.668Z  INFO 28829 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-04T12:05:23.670Z ERROR 28829 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-04T12:05:23.670Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:23.671Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:05:23.671Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-04T12:05:25.171Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:05:25.182Z  INFO 28829 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-04T12:05:25.183Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:05:25.197Z  INFO 28829 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:05:25.198Z  INFO 28829 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:05:25.207Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:05:25.243Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:05:25.243Z DEBUG 28829 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:25.244Z DEBUG 28829 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@80eeb3d]
2025-11-04T12:05:25.244Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:25.244Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test Aveiro
2025-11-04T12:05:25.244Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:05:25.244Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.245Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.245Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:25.298Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:25.298Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:25.299Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:25.299Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:25.301Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 2/5
2025-11-04T12:05:25.307Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1f87574f-3aad-4be0-8c70-a28948a50e9e
2025-11-04T12:05:25.308Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:25.309Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@76f9ca94]
2025-11-04T12:05:25.310Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:05:25.313Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:05:25.318Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:05:25.318Z DEBUG 28829 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:25.319Z DEBUG 28829 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@531ba30b]
2025-11-04T12:05:25.319Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:25.320Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2026-12-13, timeslot=Tarde, description=Test Porto
2025-11-04T12:05:25.320Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:05:25.320Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.320Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.320Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:25.373Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:25.374Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:25.375Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:25.375Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:25.377Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 0/5
2025-11-04T12:05:25.383Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: adfd2059-4663-4b6e-b242-eefc41c29c33
2025-11-04T12:05:25.385Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:25.385Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1ce15d23]
2025-11-04T12:05:25.386Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:05:25.389Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:05:25.519Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:05:25.574Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:05:25.580Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:05:25.580Z DEBUG 28829 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:05:25.580Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:05:25.580Z  INFO 28829 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.580Z DEBUG 28829 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:05:25.581Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.581Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:25.581Z  INFO 28829 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:05:25.581Z  INFO 28829 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:05:25.587Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:25.587Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:05:25.591Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:25.593Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:05:25.593Z DEBUG 28829 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:05:25.594Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:05:25.594Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:05:25.596Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:25.596Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:05:25.598Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:25.633Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:25.633Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:25.633Z  INFO 28829 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:25.634Z  INFO 28829 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:25.634Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:25.634Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:05:25.636Z DEBUG 28829 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:25.642Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:05:25.642Z DEBUG 28829 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:05:25.643Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.644Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:25.644Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:25.697Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:25.697Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:25.698Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:25.698Z  INFO 28829 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:25.699Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:25.699Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:05:25.701Z DEBUG 28829 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:27.630Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-04T12:05:27.683Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-04T12:05:27.684Z DEBUG 28829 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:05:27.685Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:05:27.685Z  INFO 28829 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-04T12:05:27.688Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:27.688Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:05:27.690Z DEBUG 28829 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:29.210Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:05:29.224Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-04T12:05:29.225Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:05:29.240Z  INFO 28829 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:05:29.242Z  INFO 28829 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:05:29.254Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:05:29.276Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:05:29.276Z DEBUG 28829 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:29.277Z DEBUG 28829 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@50e368fc]
2025-11-04T12:05:29.277Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:29.277Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test Aveiro
2025-11-04T12:05:29.277Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:05:29.277Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.277Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.278Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:29.329Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:29.330Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:29.331Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:29.331Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:29.333Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 3/5
2025-11-04T12:05:29.335Z  INFO 28829 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1ea689e6-2256-4feb-a01c-c15eaa5918f3
2025-11-04T12:05:29.335Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:29.335Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@19f063bc]
2025-11-04T12:05:29.336Z DEBUG 28829 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:05:29.338Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:05:29.344Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:05:29.345Z DEBUG 28829 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:05:29.346Z DEBUG 28829 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@269306b4]
2025-11-04T12:05:29.346Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:05:29.346Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2026-12-13, timeslot=Tarde, description=Test Porto
2025-11-04T12:05:29.347Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:05:29.347Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.348Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.348Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:29.401Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:29.402Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:29.402Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:29.402Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:29.405Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 1/5
2025-11-04T12:05:29.410Z  INFO 28829 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 35fa20d3-7c89-4e82-97f4-65c8e2d54416
2025-11-04T12:05:29.412Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:05:29.412Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4f454d6f]
2025-11-04T12:05:29.413Z DEBUG 28829 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:05:29.417Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:05:29.727Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:05:29.793Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:05:29.799Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:05:29.799Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:05:29.799Z DEBUG 28829 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:05:29.799Z DEBUG 28829 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:05:29.799Z  INFO 28829 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.800Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:05:29.800Z  INFO 28829 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:05:29.800Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.800Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:29.802Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:29.802Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:05:29.805Z DEBUG 28829 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:29.807Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:05:29.807Z DEBUG 28829 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:05:29.808Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:05:29.808Z  INFO 28829 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:05:29.810Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:29.810Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:05:29.813Z DEBUG 28829 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:29.820Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-04T12:05:29.851Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-04T12:05:29.851Z DEBUG 28829 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:05:29.851Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:29.852Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:29.852Z  INFO 28829 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:29.852Z  INFO 28829 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:29.852Z  INFO 28829 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:05:29.852Z  INFO 28829 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-04T12:05:29.852Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:29.852Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:05:29.853Z DEBUG 28829 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:29.857Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:05:29.858Z DEBUG 28829 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:05:29.858Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:29.858Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:05:29.858Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.859Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:05:29.859Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:05:29.862Z DEBUG 28829 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:29.910Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:05:29.911Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:05:29.911Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:05:29.911Z  INFO 28829 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:05:29.911Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:05:29.912Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:05:29.912Z DEBUG 28829 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:05:31.356Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:05:31.371Z  INFO 28829 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-04T12:05:31.371Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:05:31.388Z  INFO 28829 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-04T12:05:31.437Z DEBUG 28829 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@285583d4, started on Tue Nov 04 12:05:11 WET 2025
2025-11-04T12:05:31.439Z  INFO 28829 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:05:31.441Z  INFO 28829 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-04T12:05:31.442Z  INFO 28829 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-04T12:05:31.442Z DEBUG 28829 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@28e7fbc4, started on Tue Nov 04 12:05:14 WET 2025
2025-11-04T12:05:31.443Z  INFO 28829 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:05:31.443Z  INFO 28829 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-04T12:05:31.444Z  INFO 28829 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-04T12:05:31.445Z  INFO 28829 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-04T12:05:31.446Z  INFO 28829 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-04T12:05:31.447Z  INFO 28829 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:05:31.448Z  INFO 28829 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-04T12:05:31.449Z  INFO 28829 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-04T12:12:48.341Z  INFO 32387 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 32387 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:12:48.342Z  INFO 32387 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:12:48.350Z DEBUG 32387 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@22bf9122
2025-11-04T12:12:48.693Z  INFO 32387 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:12:48.728Z  INFO 32387 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 28 ms. Found 2 JPA repository interfaces.
2025-11-04T12:12:49.001Z  INFO 32387 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:12:49.025Z  INFO 32387 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-04T12:12:49.040Z  INFO 32387 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:12:49.092Z  INFO 32387 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:12:49.106Z  INFO 32387 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-04T12:12:49.200Z  INFO 32387 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:12:49.202Z  INFO 32387 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-04T12:12:49.213Z  WARN 32387 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:12:49.223Z  INFO 32387 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:12:49.587Z  INFO 32387 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:12:49.613Z  INFO 32387 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:12:49.807Z  INFO 32387 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-04T12:12:50.230Z  WARN 32387 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:12:50.274Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:12:50.322Z DEBUG 32387 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:12:50.341Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:12:50.375Z DEBUG 32387 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:12:50.465Z  INFO 32387 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:12:50.515Z  INFO 32387 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T12:12:50.515Z  INFO 32387 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T12:12:50.517Z  INFO 32387 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-04T12:12:50.535Z  INFO 32387 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.382 seconds (process running for 3.651)
2025-11-04T12:12:50.562Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:50.592Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5e9257b3]
2025-11-04T12:12:50.594Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:50.595Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-20, timeslot=Manhã, description=Booking 1
2025-11-04T12:12:50.598Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-04T12:12:50.598Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:50.649Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:50.653Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:50.939Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:50.941Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:50.946Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:50.946Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:50.993Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-04T12:12:51.023Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ddc19fc5-bf8b-4980-83a5-5c36de02e3db
2025-11-04T12:12:51.039Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.039Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@43f1a188]
2025-11-04T12:12:51.050Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:51.051Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1bba5848]
2025-11-04T12:12:51.051Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:51.051Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-21, timeslot=Tarde, description=Booking 2
2025-11-04T12:12:51.051Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-21
2025-11-04T12:12:51.051Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.051Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.052Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:51.106Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:51.107Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:51.109Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:51.110Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:51.112Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-21: 0/5
2025-11-04T12:12:51.114Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 68a2310b-82d2-49b3-8e48-e295ed60f5c5
2025-11-04T12:12:51.115Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.115Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@60a0094a]
2025-11-04T12:12:51.117Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:51.118Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4a218cc6]
2025-11-04T12:12:51.118Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:51.118Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-22, timeslot=Noite, description=Booking Porto
2025-11-04T12:12:51.119Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-22
2025-11-04T12:12:51.119Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.119Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.120Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:51.173Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:51.174Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:51.176Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:51.176Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:51.179Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-22: 0/5
2025-11-04T12:12:51.185Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ddd0d052-922a-4d6d-9397-64142d9d0659
2025-11-04T12:12:51.188Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.188Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6dad9f5e]
2025-11-04T12:12:51.192Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:12:51.199Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:12:51.200Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-04T12:12:51.220Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.221Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:12:51.260Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:51.261Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4c14b1bd]
2025-11-04T12:12:51.261Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:51.261Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-01, timeslot=Manhã, description=Teste integração
2025-11-04T12:12:51.261Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-04T12:12:51.261Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.261Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.262Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:51.315Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:51.316Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:51.318Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:51.318Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:51.321Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-04T12:12:51.326Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 272601e8-ff5b-4a41-a0d8-de4dfc695265
2025-11-04T12:12:51.328Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.328Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@17ae4b7c]
2025-11-04T12:12:51.338Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:12:51.338Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-04T12:12:51.338Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-04T12:12:51.341Z ERROR 32387 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-04T12:12:51.341Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.341Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:12:51.347Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:51.348Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@70fd1f5c]
2025-11-04T12:12:51.348Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:51.348Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Lisboa, date=2025-12-25, timeslot=Manhã, description=Teste update estado
2025-11-04T12:12:51.348Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-04T12:12:51.348Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.348Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.349Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:51.405Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:51.406Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:51.407Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:51.407Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:51.410Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-04T12:12:51.416Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 90230797-bd58-4b22-85f0-61dcb8fdb0ef
2025-11-04T12:12:51.418Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.418Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4e44f582]
2025-11-04T12:12:51.420Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:12:51.423Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-04T12:12:51.424Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/90230797-bd58-4b22-85f0-61dcb8fdb0ef/status - Updating status
2025-11-04T12:12:51.424Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: 90230797-bd58-4b22-85f0-61dcb8fdb0ef, newStatus: IN_PROGRESS
2025-11-04T12:12:51.424Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 90230797-bd58-4b22-85f0-61dcb8fdb0ef
2025-11-04T12:12:51.429Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-04T12:12:51.435Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.435Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2989e190]
2025-11-04T12:12:51.443Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:51.443Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@171f9f2c]
2025-11-04T12:12:51.443Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:51.444Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-15, timeslot=Tarde, description=Teste GET por token
2025-11-04T12:12:51.444Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-04T12:12:51.444Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.444Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.444Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:51.498Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:51.499Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:51.500Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:51.500Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:51.503Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-04T12:12:51.510Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 81334ed9-eaae-4a5c-9dd0-e53ea52f7b05
2025-11-04T12:12:51.513Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.513Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@217ed737]
2025-11-04T12:12:51.515Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:12:51.516Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/81334ed9-eaae-4a5c-9dd0-e53ea52f7b05 - Fetching booking
2025-11-04T12:12:51.516Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 81334ed9-eaae-4a5c-9dd0-e53ea52f7b05
2025-11-04T12:12:51.519Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.519Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6d2f808d]
2025-11-04T12:12:51.528Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:51.529Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2859b9e6]
2025-11-04T12:12:51.529Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:51.529Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2020-01-01, timeslot=Manhã, description=Data passada
2025-11-04T12:12:51.529Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-04T12:12:51.529Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.530Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.530Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:51.582Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:51.582Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:51.583Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:51.583Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:51.583Z  WARN 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-04T12:12:51.584Z ERROR 32387 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-04T12:12:51.585Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.585Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:12:51.591Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:51.592Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@151fce03]
2025-11-04T12:12:51.592Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:51.592Z  INFO 32387 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Coimbra, date=2025-12-30, timeslot=Tarde, description=Teste estado inválido
2025-11-04T12:12:51.593Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-04T12:12:51.593Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.593Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:51.593Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:51.647Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:51.649Z DEBUG 32387 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:51.650Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:51.650Z  INFO 32387 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:51.653Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-04T12:12:51.657Z  INFO 32387 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ddca0efb-8cb0-4731-99db-057938409a43
2025-11-04T12:12:51.659Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:51.659Z DEBUG 32387 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5ceb9fae]
2025-11-04T12:12:51.661Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:12:51.662Z DEBUG 32387 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-04T12:12:51.664Z  WARN 32387 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-04T12:12:51.672Z  INFO 32387 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:12:51.677Z  INFO 32387 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-04T12:12:51.680Z  INFO 32387 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:12:51.693Z  INFO 32387 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 32387 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:12:51.693Z  INFO 32387 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:12:51.694Z DEBUG 32387 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@435e122
2025-11-04T12:12:51.765Z  INFO 32387 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:12:51.770Z  INFO 32387 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-04T12:12:51.813Z  INFO 32387 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:12:51.814Z  INFO 32387 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:12:51.818Z  INFO 32387 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:12:51.818Z  INFO 32387 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-04T12:12:51.819Z  INFO 32387 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:12:51.819Z  INFO 32387 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-04T12:12:51.820Z  WARN 32387 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:12:51.820Z  INFO 32387 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:12:51.841Z  INFO 32387 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:12:51.846Z  INFO 32387 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:12:51.882Z  WARN 32387 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:12:51.892Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:12:51.899Z DEBUG 32387 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:12:51.903Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:12:51.907Z DEBUG 32387 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:12:51.925Z  INFO 32387 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:12:51.935Z  INFO 32387 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.255 seconds (process running for 5.05)
2025-11-04T12:12:52.122Z  INFO 32387 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:12:52.126Z  INFO 32387 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:12:52.128Z  INFO 32387 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:12:52.141Z  INFO 32387 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 32387 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:12:52.141Z  INFO 32387 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:12:52.203Z  INFO 32387 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:12:52.208Z  INFO 32387 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-04T12:12:52.307Z  INFO 32387 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-04T12:12:52.315Z  INFO 32387 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-04T12:12:52.316Z  INFO 32387 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-04T12:12:52.339Z  INFO 32387 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-04T12:12:52.339Z  INFO 32387 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 197 ms
2025-11-04T12:12:52.371Z  INFO 32387 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:12:52.372Z  INFO 32387 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:12:52.376Z  INFO 32387 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:12:52.376Z  INFO 32387 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-04T12:12:52.377Z  INFO 32387 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:12:52.377Z  INFO 32387 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-04T12:12:52.377Z  WARN 32387 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:12:52.378Z  INFO 32387 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:12:52.396Z  INFO 32387 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:12:52.400Z  INFO 32387 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:12:52.422Z  WARN 32387 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:12:52.430Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:12:52.437Z DEBUG 32387 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:12:52.440Z DEBUG 32387 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:12:52.442Z DEBUG 32387 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:12:52.453Z  INFO 32387 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:12:52.487Z  INFO 32387 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-04T12:12:52.489Z  INFO 32387 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.36 seconds (process running for 5.604)
2025-11-04T12:12:52.513Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:12:53.695Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-04T12:12:53.794Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-04T12:12:53.837Z  INFO 32387 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-04T12:12:53.837Z  INFO 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-04T12:12:53.837Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-04T12:12:53.837Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-04T12:12:53.837Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-04T12:12:53.838Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@35fdc926
2025-11-04T12:12:53.838Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@72ed4e67
2025-11-04T12:12:53.838Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-04T12:12:53.838Z  INFO 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-04T12:12:53.840Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:12:53.840Z DEBUG 32387 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:12:53.841Z  INFO 32387 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:53.841Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:53.841Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:53.893Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:53.893Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:53.894Z  INFO 32387 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:53.894Z  INFO 32387 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:53.895Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:12:53.895Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:12:53.897Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:12:53.900Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:12:53.900Z DEBUG 32387 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:12:53.901Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:53.901Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:53.901Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:53.955Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:53.956Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:53.957Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:53.957Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:53.958Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:12:53.958Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:12:53.959Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:12:55.849Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-04T12:12:55.869Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-04T12:12:55.882Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manhã
2025-11-04T12:12:55.896Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colchão e mobília velha
2025-11-04T12:12:55.939Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:12:55.939Z DEBUG 32387 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:55.941Z DEBUG 32387 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@66b7fc14]
2025-11-04T12:12:55.941Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:55.941Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2025-11-20, timeslot=Manhã, description=Colchão e mobília velha
2025-11-04T12:12:55.942Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2025-11-20
2025-11-04T12:12:55.942Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:55.942Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:55.942Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:55.996Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:55.997Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:55.998Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:55.998Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:56.010Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2025-11-20: 0/5
2025-11-04T12:12:56.014Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c9e1ac7a-5515-42d8-a7bb-0106b6d4a0fe
2025-11-04T12:12:56.017Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:12:56.018Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7447be81]
2025-11-04T12:12:56.020Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:12:57.950Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-04T12:12:57.964Z  INFO 32387 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-04T12:12:57.965Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:12:57.991Z  INFO 32387 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:12:57.992Z  INFO 32387 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:12:57.999Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:12:58.032Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:12:58.033Z DEBUG 32387 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:12:58.033Z DEBUG 32387 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5bb72edb]
2025-11-04T12:12:58.033Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:12:58.033Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test booking
2025-11-04T12:12:58.034Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:12:58.034Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:12:58.034Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:12:58.034Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:12:58.086Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:12:58.087Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:12:58.088Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:12:58.088Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:12:58.090Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 0/5
2025-11-04T12:12:58.096Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 9ad711a6-45fd-4d2f-adf4-6fb0c0367ea7
2025-11-04T12:12:58.098Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:12:58.098Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@144dd1e6]
2025-11-04T12:12:58.100Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:12:58.109Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 9ad711a6-45fd-4d2f-adf4-6fb0c0367ea7
2025-11-04T12:12:58.428Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:12:58.467Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:12:58.496Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: 9ad711a6-45fd-4d2f-adf4-6fb0c0367ea7
2025-11-04T12:12:58.540Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/9ad711a6-45fd-4d2f-adf4-6fb0c0367ea7", parameters={}
2025-11-04T12:12:58.540Z DEBUG 32387 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:12:58.541Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/9ad711a6-45fd-4d2f-adf4-6fb0c0367ea7 - Fetching booking
2025-11-04T12:12:58.541Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 9ad711a6-45fd-4d2f-adf4-6fb0c0367ea7
2025-11-04T12:12:58.544Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:12:58.544Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@225a7846]
2025-11-04T12:12:58.546Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:00.042Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:13:00.051Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-04T12:13:00.062Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: 9ad711a6-45fd-4d2f-adf4-6fb0c0367ea7
2025-11-04T12:13:00.063Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:13:00.079Z  INFO 32387 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:13:00.081Z  INFO 32387 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:13:00.088Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:13:00.115Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:13:00.116Z DEBUG 32387 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:13:00.116Z DEBUG 32387 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@75b7388f]
2025-11-04T12:13:00.117Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:13:00.117Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test booking
2025-11-04T12:13:00.117Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:13:00.117Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:00.117Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:00.118Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:00.172Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:00.173Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:00.174Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:00.174Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:00.177Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 1/5
2025-11-04T12:13:00.181Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 90d96382-e838-40a4-acfd-9ed6247cc229
2025-11-04T12:13:00.182Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:13:00.182Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@bbd5ae3]
2025-11-04T12:13:00.183Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:13:00.185Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 90d96382-e838-40a4-acfd-9ed6247cc229
2025-11-04T12:13:00.273Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:13:00.311Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:13:00.336Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-04T12:13:00.381Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-04T12:13:00.381Z DEBUG 32387 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:13:00.382Z  INFO 32387 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/INVALID - Fetching booking
2025-11-04T12:13:00.382Z  INFO 32387 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-04T12:13:00.384Z ERROR 32387 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-04T12:13:00.384Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:00.385Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:13:00.385Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-04T12:13:01.882Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:13:01.886Z  INFO 32387 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-04T12:13:01.886Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:13:01.896Z  INFO 32387 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:13:01.897Z  INFO 32387 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:13:01.902Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:13:01.926Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:13:01.926Z DEBUG 32387 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:13:01.927Z DEBUG 32387 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@74a83d3d]
2025-11-04T12:13:01.927Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:13:01.927Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test Aveiro
2025-11-04T12:13:01.927Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:13:01.927Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:01.927Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:01.927Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:01.981Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:01.982Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:01.982Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:01.982Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:01.984Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 2/5
2025-11-04T12:13:01.987Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 928897d0-79be-49d2-8297-adead949be13
2025-11-04T12:13:01.988Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:13:01.988Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@aa35970]
2025-11-04T12:13:01.989Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:13:01.991Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:13:01.996Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:13:01.996Z DEBUG 32387 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:13:01.998Z DEBUG 32387 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6dbbd7fb]
2025-11-04T12:13:01.998Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:13:01.998Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2026-12-13, timeslot=Tarde, description=Test Porto
2025-11-04T12:13:01.998Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:13:01.999Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:01.999Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:02.000Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:02.053Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:02.053Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:02.054Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:02.054Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:02.056Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 0/5
2025-11-04T12:13:02.061Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 9ed64aa3-d07f-4141-ae3a-59c6881cd8de
2025-11-04T12:13:02.063Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:13:02.063Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@22412e07]
2025-11-04T12:13:02.065Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:13:02.069Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:13:02.189Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:13:02.256Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:13:02.261Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:13:02.262Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:13:02.262Z DEBUG 32387 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:13:02.262Z DEBUG 32387 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:13:02.262Z  INFO 32387 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:02.262Z  INFO 32387 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:13:02.262Z  INFO 32387 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:13:02.262Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:02.263Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:02.268Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:02.268Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:13:02.273Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:02.275Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:13:02.275Z DEBUG 32387 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:13:02.276Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:13:02.276Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:13:02.278Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:02.278Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:13:02.280Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:02.316Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:02.316Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:02.316Z  INFO 32387 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:02.317Z  INFO 32387 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:02.317Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:02.317Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:13:02.319Z DEBUG 32387 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:02.325Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:13:02.326Z DEBUG 32387 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:13:02.326Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:02.327Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:02.328Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:02.380Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:02.381Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:02.382Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:02.382Z  INFO 32387 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:02.383Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:02.383Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:13:02.385Z DEBUG 32387 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:04.310Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-04T12:13:04.358Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-04T12:13:04.358Z DEBUG 32387 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:13:04.358Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:13:04.358Z  INFO 32387 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-04T12:13:04.361Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:04.361Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:13:04.363Z DEBUG 32387 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:05.883Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:13:05.900Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-04T12:13:05.901Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:13:05.917Z  INFO 32387 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:13:05.918Z  INFO 32387 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:13:05.929Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:13:05.972Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:13:05.972Z DEBUG 32387 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:13:05.972Z DEBUG 32387 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@31c4d739]
2025-11-04T12:13:05.972Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:13:05.972Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test Aveiro
2025-11-04T12:13:05.973Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:13:05.973Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:05.973Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:05.973Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:06.027Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:06.027Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:06.028Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:06.028Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:06.030Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 3/5
2025-11-04T12:13:06.036Z  INFO 32387 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: e7b30442-40bb-4e69-99ae-7f5721ec9d88
2025-11-04T12:13:06.038Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:13:06.038Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1bb731a4]
2025-11-04T12:13:06.039Z DEBUG 32387 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:13:06.042Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:13:06.046Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:13:06.047Z DEBUG 32387 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:13:06.048Z DEBUG 32387 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3ef0bca5]
2025-11-04T12:13:06.048Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:13:06.048Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2026-12-13, timeslot=Tarde, description=Test Porto
2025-11-04T12:13:06.048Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:13:06.048Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:06.049Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:06.049Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:06.102Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:06.103Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:06.103Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:06.103Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:06.106Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 1/5
2025-11-04T12:13:06.111Z  INFO 32387 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1766f93a-35fa-4222-8948-769293f519e1
2025-11-04T12:13:06.113Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:13:06.113Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7e5aff78]
2025-11-04T12:13:06.114Z DEBUG 32387 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:13:06.119Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:13:06.454Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:13:06.528Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:13:06.534Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:13:06.534Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:13:06.534Z DEBUG 32387 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:13:06.534Z DEBUG 32387 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:13:06.534Z  INFO 32387 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:06.535Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:13:06.535Z  INFO 32387 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:13:06.535Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:06.535Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:06.537Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:06.537Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:13:06.540Z DEBUG 32387 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:06.543Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:13:06.543Z DEBUG 32387 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:13:06.543Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:13:06.543Z  INFO 32387 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:13:06.544Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-04T12:13:06.546Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:06.546Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:13:06.549Z DEBUG 32387 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:06.583Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-04T12:13:06.583Z DEBUG 32387 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:13:06.584Z  INFO 32387 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:13:06.584Z  INFO 32387 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-04T12:13:06.586Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:06.586Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:06.587Z  INFO 32387 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:06.587Z  INFO 32387 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:06.587Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:06.587Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:13:06.588Z DEBUG 32387 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:06.590Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:06.590Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:13:06.593Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:13:06.593Z DEBUG 32387 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:13:06.593Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:13:06.594Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:13:06.594Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:13:06.596Z DEBUG 32387 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:06.645Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:13:06.646Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:13:06.646Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:13:06.646Z  INFO 32387 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:13:06.646Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:13:06.646Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:13:06.647Z DEBUG 32387 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:13:08.087Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:13:08.102Z  INFO 32387 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-04T12:13:08.103Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:13:08.116Z  INFO 32387 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-04T12:13:08.161Z DEBUG 32387 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@22bf9122, started on Tue Nov 04 12:12:48 WET 2025
2025-11-04T12:13:08.163Z  INFO 32387 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:13:08.165Z  INFO 32387 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-04T12:13:08.166Z  INFO 32387 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-04T12:13:08.167Z DEBUG 32387 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@435e122, started on Tue Nov 04 12:12:51 WET 2025
2025-11-04T12:13:08.168Z  INFO 32387 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:13:08.168Z  INFO 32387 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-04T12:13:08.169Z  INFO 32387 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-04T12:13:08.170Z  INFO 32387 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-04T12:13:08.172Z  INFO 32387 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-04T12:13:08.174Z  INFO 32387 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:13:08.174Z  INFO 32387 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-04T12:13:08.175Z  INFO 32387 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-04T12:21:51.463Z  INFO 36675 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 36675 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:21:51.464Z  INFO 36675 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:21:51.477Z DEBUG 36675 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@544733a4
2025-11-04T12:21:52.006Z  INFO 36675 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:21:52.047Z  INFO 36675 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 33 ms. Found 2 JPA repository interfaces.
2025-11-04T12:21:52.378Z  INFO 36675 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:21:52.413Z  INFO 36675 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-04T12:21:52.435Z  INFO 36675 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:21:52.524Z  INFO 36675 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:21:52.548Z  INFO 36675 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-04T12:21:52.768Z  INFO 36675 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:21:52.771Z  INFO 36675 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-04T12:21:52.795Z  WARN 36675 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:21:52.813Z  INFO 36675 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:21:53.472Z  INFO 36675 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:21:53.521Z  INFO 36675 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:21:53.722Z  INFO 36675 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-04T12:21:54.236Z  WARN 36675 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:21:54.296Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:21:54.343Z DEBUG 36675 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:21:54.361Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:21:54.395Z DEBUG 36675 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:21:54.466Z  INFO 36675 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:21:54.506Z  INFO 36675 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T12:21:54.507Z  INFO 36675 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T12:21:54.507Z  INFO 36675 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-04T12:21:54.523Z  INFO 36675 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 3.342 seconds (process running for 5.719)
2025-11-04T12:21:54.563Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:54.610Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@11252b76]
2025-11-04T12:21:54.614Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:54.615Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-20, timeslot=Manhã, description=Booking 1
2025-11-04T12:21:54.619Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-04T12:21:54.620Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:54.675Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:54.681Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:54.971Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:54.973Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:54.978Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:54.979Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.077Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-04T12:21:55.125Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0034f0d1-341e-41c4-ab93-b1cf6460a0fb
2025-11-04T12:21:55.158Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.159Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4b7f66b3]
2025-11-04T12:21:55.176Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:55.177Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2ea1f31b]
2025-11-04T12:21:55.177Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:55.177Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-21, timeslot=Tarde, description=Booking 2
2025-11-04T12:21:55.178Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-21
2025-11-04T12:21:55.178Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.178Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.178Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:55.230Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:55.230Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:55.231Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:55.232Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.233Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-21: 0/5
2025-11-04T12:21:55.236Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d41b3390-e384-4eb8-a96b-c8796bcf3af4
2025-11-04T12:21:55.236Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.237Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5149d43e]
2025-11-04T12:21:55.238Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:55.239Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5cf93ce8]
2025-11-04T12:21:55.239Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:55.239Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-22, timeslot=Noite, description=Booking Porto
2025-11-04T12:21:55.239Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-22
2025-11-04T12:21:55.239Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.240Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.240Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:55.293Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:55.293Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:55.294Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:55.294Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.295Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-22: 0/5
2025-11-04T12:21:55.297Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d3c5d8ba-3f6b-4384-b29e-8a41394d68d5
2025-11-04T12:21:55.298Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.298Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@ab76053]
2025-11-04T12:21:55.300Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:21:55.305Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:21:55.306Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-04T12:21:55.337Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.338Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:21:55.398Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:55.399Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@683a26f9]
2025-11-04T12:21:55.399Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:55.399Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-01, timeslot=Manhã, description=Teste integração
2025-11-04T12:21:55.400Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-04T12:21:55.400Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.400Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.400Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:55.678Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:55.678Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:55.678Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:55.679Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.680Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-04T12:21:55.681Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: e76ff9c0-036e-4394-957f-4dab4890e38a
2025-11-04T12:21:55.682Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.682Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4fb5f99e]
2025-11-04T12:21:55.690Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:21:55.691Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-04T12:21:55.691Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-04T12:21:55.693Z ERROR 36675 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-04T12:21:55.694Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.694Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:21:55.699Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:55.700Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5451c2bd]
2025-11-04T12:21:55.700Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:55.700Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Lisboa, date=2025-12-25, timeslot=Manhã, description=Teste update estado
2025-11-04T12:21:55.700Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-04T12:21:55.700Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.701Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.701Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:55.754Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:55.755Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:55.756Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:55.757Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.758Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-04T12:21:55.760Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: fbc57779-d0b2-476c-aa22-36cd449be643
2025-11-04T12:21:55.761Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.761Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2df2d95]
2025-11-04T12:21:55.763Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:21:55.764Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-04T12:21:55.764Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/fbc57779-d0b2-476c-aa22-36cd449be643/status - Updating status
2025-11-04T12:21:55.765Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: fbc57779-d0b2-476c-aa22-36cd449be643, newStatus: IN_PROGRESS
2025-11-04T12:21:55.765Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: fbc57779-d0b2-476c-aa22-36cd449be643
2025-11-04T12:21:55.770Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-04T12:21:55.778Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.778Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@591488b2]
2025-11-04T12:21:55.788Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:55.789Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@436defcb]
2025-11-04T12:21:55.789Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:55.789Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-15, timeslot=Tarde, description=Teste GET por token
2025-11-04T12:21:55.790Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-04T12:21:55.790Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.790Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.790Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:55.843Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:55.843Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:55.844Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:55.844Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.845Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-04T12:21:55.848Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 3fac4030-d21e-4ae9-bdf8-2a375cde1c42
2025-11-04T12:21:55.849Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.850Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1c59a4a1]
2025-11-04T12:21:55.851Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:21:55.851Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/3fac4030-d21e-4ae9-bdf8-2a375cde1c42 - Fetching booking
2025-11-04T12:21:55.851Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 3fac4030-d21e-4ae9-bdf8-2a375cde1c42
2025-11-04T12:21:55.854Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.854Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@75773272]
2025-11-04T12:21:55.862Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:55.863Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2b601535]
2025-11-04T12:21:55.863Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:55.863Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2020-01-01, timeslot=Manhã, description=Data passada
2025-11-04T12:21:55.863Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-04T12:21:55.863Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.864Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.864Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:55.916Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:55.916Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:55.917Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:55.917Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.917Z  WARN 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-04T12:21:55.918Z ERROR 36675 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-04T12:21:55.918Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.918Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:21:55.925Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:21:55.926Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3232f9ec]
2025-11-04T12:21:55.926Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:21:55.926Z  INFO 36675 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Coimbra, date=2025-12-30, timeslot=Tarde, description=Teste estado inválido
2025-11-04T12:21:55.926Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-04T12:21:55.926Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.927Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:55.927Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:55.978Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:55.979Z DEBUG 36675 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:55.979Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:55.979Z  INFO 36675 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:55.980Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-04T12:21:55.983Z  INFO 36675 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 258de9b6-98eb-487d-b738-ed16c1cb1673
2025-11-04T12:21:55.984Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:21:55.984Z DEBUG 36675 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@b659e43]
2025-11-04T12:21:55.985Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:21:55.986Z DEBUG 36675 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-04T12:21:55.988Z  WARN 36675 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-04T12:21:55.997Z  INFO 36675 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:21:56.000Z  INFO 36675 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-04T12:21:56.003Z  INFO 36675 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:21:56.014Z  INFO 36675 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 36675 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:21:56.014Z  INFO 36675 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:21:56.015Z DEBUG 36675 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@51670993
2025-11-04T12:21:56.082Z  INFO 36675 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:21:56.086Z  INFO 36675 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T12:21:56.129Z  INFO 36675 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:21:56.130Z  INFO 36675 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:21:56.134Z  INFO 36675 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:21:56.134Z  INFO 36675 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-04T12:21:56.135Z  INFO 36675 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:21:56.135Z  INFO 36675 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-04T12:21:56.135Z  WARN 36675 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:21:56.136Z  INFO 36675 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:21:56.162Z  INFO 36675 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:21:56.168Z  INFO 36675 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:21:56.203Z  WARN 36675 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:21:56.213Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:21:56.220Z DEBUG 36675 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:21:56.223Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:21:56.226Z DEBUG 36675 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:21:56.241Z  INFO 36675 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:21:56.249Z  INFO 36675 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.246 seconds (process running for 7.446)
2025-11-04T12:21:56.522Z  INFO 36675 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:21:56.526Z  INFO 36675 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:21:56.527Z  INFO 36675 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:21:56.538Z  INFO 36675 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 36675 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:21:56.538Z  INFO 36675 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:21:56.600Z  INFO 36675 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:21:56.604Z  INFO 36675 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T12:21:56.743Z  INFO 36675 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-04T12:21:56.755Z  INFO 36675 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-04T12:21:56.755Z  INFO 36675 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-04T12:21:56.784Z  INFO 36675 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-04T12:21:56.784Z  INFO 36675 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 245 ms
2025-11-04T12:21:56.823Z  INFO 36675 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:21:56.824Z  INFO 36675 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:21:56.828Z  INFO 36675 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:21:56.828Z  INFO 36675 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-04T12:21:56.829Z  INFO 36675 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:21:56.829Z  INFO 36675 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-04T12:21:56.829Z  WARN 36675 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:21:56.829Z  INFO 36675 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:21:56.851Z  INFO 36675 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:21:56.855Z  INFO 36675 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:21:56.879Z  WARN 36675 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:21:56.887Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:21:56.895Z DEBUG 36675 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:21:56.898Z DEBUG 36675 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:21:56.901Z DEBUG 36675 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:21:56.917Z  INFO 36675 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:21:56.960Z  INFO 36675 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-04T12:21:56.962Z  INFO 36675 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.435 seconds (process running for 8.159)
2025-11-04T12:21:56.997Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:21:57.974Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-04T12:21:58.068Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-04T12:21:58.118Z  INFO 36675 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-04T12:21:58.119Z  INFO 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-04T12:21:58.119Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-04T12:21:58.119Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-04T12:21:58.119Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-04T12:21:58.119Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4421bfc1
2025-11-04T12:21:58.119Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@7de6dcf2
2025-11-04T12:21:58.119Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-04T12:21:58.119Z  INFO 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-11-04T12:21:58.122Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:21:58.123Z DEBUG 36675 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:21:58.124Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:58.124Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:58.124Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:58.178Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:58.179Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:58.181Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:58.181Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:58.184Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:21:58.185Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:21:58.194Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:21:58.199Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:21:58.199Z DEBUG 36675 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:21:58.200Z  INFO 36675 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:21:58.200Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:21:58.201Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:21:58.253Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:21:58.254Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:21:58.254Z  INFO 36675 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:21:58.254Z  INFO 36675 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:21:58.254Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:21:58.254Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:21:58.255Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:00.129Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-04T12:22:00.145Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-04T12:22:00.159Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manhã
2025-11-04T12:22:00.174Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colchão e mobília velha
2025-11-04T12:22:00.221Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:22:00.221Z DEBUG 36675 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:22:00.225Z DEBUG 36675 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@695e1cf7]
2025-11-04T12:22:00.225Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:22:00.225Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2025-11-20, timeslot=Manhã, description=Colchão e mobília velha
2025-11-04T12:22:00.226Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2025-11-20
2025-11-04T12:22:00.226Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:00.226Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:00.226Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:00.280Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:00.280Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:00.281Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:00.282Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:00.290Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2025-11-20: 0/5
2025-11-04T12:22:00.294Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f8dc9f34-ad78-44c0-96fc-7e33773590ff
2025-11-04T12:22:00.298Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:00.298Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@171a2c5b]
2025-11-04T12:22:00.300Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:22:02.235Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-04T12:22:02.250Z  INFO 36675 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-04T12:22:02.252Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:22:02.278Z  INFO 36675 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:22:02.278Z  INFO 36675 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:22:02.283Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:22:02.319Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:22:02.320Z DEBUG 36675 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:22:02.321Z DEBUG 36675 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@781938ba]
2025-11-04T12:22:02.321Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:22:02.321Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test booking
2025-11-04T12:22:02.321Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:22:02.321Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:02.322Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:02.322Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:02.375Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:02.376Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:02.377Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:02.377Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:02.380Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 0/5
2025-11-04T12:22:02.385Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: cd64085e-6905-46c2-9589-c22cccc0154c
2025-11-04T12:22:02.387Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:22:02.387Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@37e3d3f2]
2025-11-04T12:22:02.388Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:22:02.395Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: cd64085e-6905-46c2-9589-c22cccc0154c
2025-11-04T12:22:02.504Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:22:02.545Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:22:02.575Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: cd64085e-6905-46c2-9589-c22cccc0154c
2025-11-04T12:22:02.629Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/cd64085e-6905-46c2-9589-c22cccc0154c", parameters={}
2025-11-04T12:22:02.629Z DEBUG 36675 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:22:02.631Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/cd64085e-6905-46c2-9589-c22cccc0154c - Fetching booking
2025-11-04T12:22:02.631Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: cd64085e-6905-46c2-9589-c22cccc0154c
2025-11-04T12:22:02.635Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:02.636Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4f2a582c]
2025-11-04T12:22:02.639Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:04.134Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:22:04.143Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-04T12:22:04.158Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: cd64085e-6905-46c2-9589-c22cccc0154c
2025-11-04T12:22:04.159Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:22:04.176Z  INFO 36675 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:22:04.178Z  INFO 36675 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:22:04.186Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:22:04.212Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:22:04.213Z DEBUG 36675 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:22:04.223Z DEBUG 36675 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@866085a]
2025-11-04T12:22:04.223Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:22:04.223Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test booking
2025-11-04T12:22:04.223Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:22:04.224Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:04.224Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:04.224Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:04.278Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:04.280Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:04.281Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:04.281Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:04.286Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 1/5
2025-11-04T12:22:04.293Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c0066c47-f70b-4f1a-805d-d83fdca6cd6a
2025-11-04T12:22:04.295Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:22:04.295Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7611d97d]
2025-11-04T12:22:04.296Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:22:04.298Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: c0066c47-f70b-4f1a-805d-d83fdca6cd6a
2025-11-04T12:22:04.593Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:22:04.652Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:22:04.678Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-04T12:22:04.714Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-04T12:22:04.715Z DEBUG 36675 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:22:04.715Z  INFO 36675 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/INVALID - Fetching booking
2025-11-04T12:22:04.715Z  INFO 36675 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-04T12:22:04.717Z ERROR 36675 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-04T12:22:04.717Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:04.717Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:22:04.717Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-04T12:22:06.217Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:22:06.228Z  INFO 36675 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-04T12:22:06.229Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:22:06.240Z  INFO 36675 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:22:06.241Z  INFO 36675 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:22:06.252Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:22:06.284Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:22:06.284Z DEBUG 36675 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:22:06.285Z DEBUG 36675 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@679db65]
2025-11-04T12:22:06.285Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:22:06.285Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test Aveiro
2025-11-04T12:22:06.285Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:22:06.285Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.285Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.285Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:06.338Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:06.339Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:06.340Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:06.340Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:06.342Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 2/5
2025-11-04T12:22:06.344Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: daa22ccd-3361-4fd3-a1d3-e8528d53f291
2025-11-04T12:22:06.344Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:22:06.344Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@78000255]
2025-11-04T12:22:06.345Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:22:06.347Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:22:06.353Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:22:06.354Z DEBUG 36675 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:22:06.356Z DEBUG 36675 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@72c979c7]
2025-11-04T12:22:06.356Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:22:06.356Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2026-12-13, timeslot=Tarde, description=Test Porto
2025-11-04T12:22:06.357Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:22:06.357Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.358Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.358Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:06.411Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:06.411Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:06.412Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:06.413Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:06.416Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 0/5
2025-11-04T12:22:06.423Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f5ad07a8-4435-4956-9243-60842da13e06
2025-11-04T12:22:06.425Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:22:06.425Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3d3393d5]
2025-11-04T12:22:06.427Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:22:06.431Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:22:06.525Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:22:06.585Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:22:06.591Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:22:06.591Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:22:06.591Z DEBUG 36675 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:22:06.591Z DEBUG 36675 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:22:06.591Z  INFO 36675 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.592Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:22:06.592Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.592Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:22:06.592Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:06.599Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:06.600Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:22:06.604Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:06.606Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:22:06.607Z DEBUG 36675 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:22:06.607Z  INFO 36675 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:22:06.607Z  INFO 36675 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:22:06.610Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:06.610Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:22:06.613Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:06.644Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:06.645Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:06.645Z  INFO 36675 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:06.645Z  INFO 36675 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:06.646Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:06.646Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:22:06.647Z DEBUG 36675 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:06.649Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:22:06.649Z DEBUG 36675 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:22:06.649Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.650Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:06.650Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:06.961Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:06.962Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:06.963Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:06.963Z  INFO 36675 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:06.964Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:06.965Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:22:06.966Z DEBUG 36675 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:08.640Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-04T12:22:08.694Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-04T12:22:08.694Z DEBUG 36675 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:22:08.695Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:22:08.695Z  INFO 36675 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-04T12:22:08.699Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:08.699Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:22:08.702Z DEBUG 36675 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:10.220Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:22:10.236Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-04T12:22:10.237Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:22:10.256Z  INFO 36675 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:22:10.259Z  INFO 36675 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:22:10.274Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:22:10.301Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:22:10.301Z DEBUG 36675 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:22:10.302Z DEBUG 36675 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@72a3042b]
2025-11-04T12:22:10.302Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:22:10.302Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received DTO: municipality=Aveiro, date=2026-12-12, timeslot=Manhã, description=Test Aveiro
2025-11-04T12:22:10.302Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:22:10.302Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.303Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.303Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:10.355Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:10.356Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:10.357Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:10.357Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:10.360Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 3/5
2025-11-04T12:22:10.366Z  INFO 36675 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: dfd5f5b0-cc35-43e1-8aca-e76d42b83795
2025-11-04T12:22:10.368Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:22:10.368Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@47131a0d]
2025-11-04T12:22:10.370Z DEBUG 36675 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:22:10.372Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:22:10.378Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:22:10.379Z DEBUG 36675 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:22:10.381Z DEBUG 36675 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@72846c8a]
2025-11-04T12:22:10.382Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:22:10.382Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2026-12-13, timeslot=Tarde, description=Test Porto
2025-11-04T12:22:10.382Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:22:10.382Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.382Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.383Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:10.435Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:10.436Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:10.437Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:10.437Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:10.440Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 1/5
2025-11-04T12:22:10.446Z  INFO 36675 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c682ed0e-8b70-4b52-9f79-176f81e47de0
2025-11-04T12:22:10.449Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:22:10.449Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@75583d7f]
2025-11-04T12:22:10.450Z DEBUG 36675 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:22:10.453Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:22:10.560Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:22:10.617Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:22:10.623Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:22:10.623Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:22:10.623Z DEBUG 36675 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:22:10.623Z DEBUG 36675 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:22:10.623Z  INFO 36675 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.623Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:22:10.623Z  INFO 36675 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:22:10.623Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.623Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:10.626Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:10.626Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:22:10.630Z DEBUG 36675 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:10.632Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:22:10.633Z DEBUG 36675 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:22:10.633Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:22:10.633Z  INFO 36675 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:22:10.636Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:10.636Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:22:10.638Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-04T12:22:10.640Z DEBUG 36675 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:10.675Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:10.676Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:10.676Z  INFO 36675 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:10.676Z  INFO 36675 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:10.677Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:10.677Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:22:10.679Z DEBUG 36675 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:10.685Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:22:10.686Z DEBUG 36675 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:22:10.687Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.688Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:22:10.689Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:22:10.691Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-04T12:22:10.692Z DEBUG 36675 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:22:10.695Z  INFO 36675 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:22:10.695Z  INFO 36675 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-04T12:22:10.707Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:10.707Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:22:10.711Z DEBUG 36675 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:10.741Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:22:10.741Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:22:10.741Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:22:10.741Z  INFO 36675 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:22:10.742Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:22:10.742Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:22:10.742Z DEBUG 36675 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:22:12.235Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:22:12.251Z  INFO 36675 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-04T12:22:12.252Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:22:12.260Z  INFO 36675 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-04T12:22:12.326Z DEBUG 36675 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@544733a4, started on Tue Nov 04 12:21:51 WET 2025
2025-11-04T12:22:12.328Z  INFO 36675 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:22:12.394Z  INFO 36675 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-04T12:22:12.395Z  INFO 36675 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-04T12:22:12.395Z DEBUG 36675 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@51670993, started on Tue Nov 04 12:21:56 WET 2025
2025-11-04T12:22:12.396Z  INFO 36675 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:22:12.397Z  INFO 36675 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-04T12:22:12.397Z  INFO 36675 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-04T12:22:12.398Z  INFO 36675 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-04T12:22:12.400Z  INFO 36675 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-04T12:22:12.401Z  INFO 36675 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:22:12.401Z  INFO 36675 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-04T12:22:12.403Z  INFO 36675 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-04T12:31:47.670Z  INFO 41123 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 41123 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:31:47.671Z  INFO 41123 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:31:47.685Z DEBUG 41123 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@544733a4
2025-11-04T12:31:48.302Z  INFO 41123 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:31:48.351Z  INFO 41123 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 40 ms. Found 2 JPA repository interfaces.
2025-11-04T12:31:48.776Z  INFO 41123 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:31:48.822Z  INFO 41123 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-04T12:31:48.854Z  INFO 41123 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:31:48.965Z  INFO 41123 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:31:48.993Z  INFO 41123 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-04T12:31:49.224Z  INFO 41123 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:31:49.226Z  INFO 41123 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-04T12:31:49.252Z  WARN 41123 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:31:49.272Z  INFO 41123 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:31:49.927Z  INFO 41123 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:31:49.972Z  INFO 41123 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:31:50.174Z  INFO 41123 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-04T12:31:50.705Z  WARN 41123 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:31:50.766Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:31:50.814Z DEBUG 41123 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:31:50.832Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:31:50.865Z DEBUG 41123 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:31:50.938Z  INFO 41123 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:31:50.977Z  INFO 41123 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T12:31:50.978Z  INFO 41123 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T12:31:50.978Z  INFO 41123 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-04T12:31:51.000Z  INFO 41123 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 3.67 seconds (process running for 6.019)
2025-11-04T12:31:51.035Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:31:51.082Z DEBUG 41123 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6538fcf3]
2025-11-04T12:31:51.087Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:31:51.087Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:31:51.091Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-04T12:31:51.091Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:31:51.146Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:31:51.152Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:31:51.444Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:31:51.446Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:31:51.449Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:31:51.449Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:31:51.530Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-04T12:31:51.574Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 750e6b43-58ad-4ab0-b578-118745eb5203
2025-11-04T12:31:51.599Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:31:51.599Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6e3a4cfb]
2025-11-04T12:31:51.615Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:31:51.616Z DEBUG 41123 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@21e37205]
2025-11-04T12:31:51.617Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:31:51.617Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:31:51.617Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-21
2025-11-04T12:31:51.617Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:31:51.617Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:31:51.617Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:31:51.667Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:31:51.668Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:31:51.671Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:31:51.671Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:31:51.673Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-21: 0/5
2025-11-04T12:31:51.675Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 215d9f20-820c-47e0-8c23-688a256b85d6
2025-11-04T12:31:51.676Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:31:51.676Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@23b30560]
2025-11-04T12:31:51.678Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:31:51.678Z DEBUG 41123 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4bdf398a]
2025-11-04T12:31:51.678Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:31:51.679Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:31:51.679Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-22
2025-11-04T12:31:51.679Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:31:51.679Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:31:51.679Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:31:51.727Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:31:51.727Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:31:51.728Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:31:51.729Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:31:51.732Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-22: 0/5
2025-11-04T12:31:51.734Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 53f24062-66a3-434e-811f-de6ce307c006
2025-11-04T12:31:51.735Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:31:51.735Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@33f19889]
2025-11-04T12:31:51.737Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:31:51.745Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:31:51.753Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-04T12:31:51.784Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:31:51.784Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:31:51.842Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:31:51.843Z DEBUG 41123 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@171a1f81]
2025-11-04T12:31:51.843Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:31:51.843Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:31:51.843Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-04T12:31:51.843Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:31:51.843Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:31:51.844Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:31:51.892Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:31:51.893Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:31:51.894Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:31:51.895Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:31:51.898Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-04T12:31:51.905Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 77010653-3e6a-4e2b-9638-fa23ce1f3c26
2025-11-04T12:31:51.907Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:31:51.907Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@471e3b23]
2025-11-04T12:31:51.918Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:31:51.919Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-04T12:31:51.919Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-04T12:31:51.922Z ERROR 41123 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-04T12:31:51.922Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:31:51.922Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:31:51.928Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:31:51.929Z DEBUG 41123 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@26025cfc]
2025-11-04T12:31:51.929Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:31:51.929Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:31:51.929Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-04T12:31:51.929Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:31:51.930Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:31:51.930Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:31:51.979Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:31:51.980Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:31:51.981Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:31:51.981Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:31:51.984Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-04T12:31:51.990Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: e6e28354-2881-48c8-9807-9ae1c68a8d9e
2025-11-04T12:31:51.992Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:31:51.992Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@73cdf7bc]
2025-11-04T12:31:51.994Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:31:51.997Z DEBUG 41123 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-04T12:31:51.998Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/e6e28354-2881-48c8-9807-9ae1c68a8d9e/status - Updating status
2025-11-04T12:31:51.998Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: e6e28354-2881-48c8-9807-9ae1c68a8d9e, newStatus: IN_PROGRESS
2025-11-04T12:31:51.998Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: e6e28354-2881-48c8-9807-9ae1c68a8d9e
2025-11-04T12:31:52.004Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-04T12:31:52.012Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:31:52.012Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@18622a34]
2025-11-04T12:31:52.022Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:31:52.023Z DEBUG 41123 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4655969e]
2025-11-04T12:31:52.023Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:31:52.023Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:31:52.023Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-04T12:31:52.023Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:31:52.024Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:31:52.024Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:31:52.072Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:31:52.074Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:31:52.075Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:31:52.076Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:31:52.079Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-04T12:31:52.085Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d7498b0c-bf56-4488-9429-fd25c7662810
2025-11-04T12:31:52.086Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:31:52.087Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@67cc777b]
2025-11-04T12:31:52.088Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:31:52.089Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/d7498b0c-bf56-4488-9429-fd25c7662810 - Fetching booking
2025-11-04T12:31:52.089Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: d7498b0c-bf56-4488-9429-fd25c7662810
2025-11-04T12:31:52.091Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:31:52.091Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@71ed948f]
2025-11-04T12:31:52.099Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:31:52.100Z DEBUG 41123 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@54d90261]
2025-11-04T12:31:52.100Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:31:52.100Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:31:52.100Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-04T12:31:52.100Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:31:52.101Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:31:52.101Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:31:52.149Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:31:52.150Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:31:52.152Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:31:52.152Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:31:52.152Z  WARN 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-04T12:31:52.155Z ERROR 41123 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-04T12:31:52.156Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:31:52.156Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:31:52.165Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:31:52.166Z DEBUG 41123 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@a2a2056]
2025-11-04T12:31:52.166Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:31:52.166Z  INFO 41123 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:31:52.166Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-04T12:31:52.166Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:31:52.166Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:31:52.167Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:31:52.214Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:31:52.214Z DEBUG 41123 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:31:52.215Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:31:52.215Z  INFO 41123 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:31:52.216Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-04T12:31:52.220Z  INFO 41123 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 2be51c65-d1c3-447b-967c-f85f4929f0c6
2025-11-04T12:31:52.221Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:31:52.221Z DEBUG 41123 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@961e262]
2025-11-04T12:31:52.223Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:31:52.224Z DEBUG 41123 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-04T12:31:52.228Z  WARN 41123 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-04T12:31:52.236Z  INFO 41123 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:31:52.240Z  INFO 41123 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-04T12:31:52.244Z  INFO 41123 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:31:52.256Z  INFO 41123 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 41123 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:31:52.257Z  INFO 41123 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:31:52.257Z DEBUG 41123 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@44dad6b6
2025-11-04T12:31:52.320Z  INFO 41123 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:31:52.324Z  INFO 41123 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T12:31:52.363Z  INFO 41123 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:31:52.364Z  INFO 41123 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:31:52.368Z  INFO 41123 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:31:52.368Z  INFO 41123 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-04T12:31:52.369Z  INFO 41123 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:31:52.369Z  INFO 41123 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-04T12:31:52.370Z  WARN 41123 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:31:52.370Z  INFO 41123 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:31:52.392Z  INFO 41123 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:31:52.398Z  INFO 41123 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:31:52.435Z  WARN 41123 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:31:52.446Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:31:52.454Z DEBUG 41123 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:31:52.457Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:31:52.460Z DEBUG 41123 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:31:52.474Z  INFO 41123 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:31:52.483Z  INFO 41123 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.24 seconds (process running for 7.502)
2025-11-04T12:31:52.772Z  INFO 41123 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:31:52.775Z  INFO 41123 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:31:52.776Z  INFO 41123 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:31:52.787Z  INFO 41123 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 41123 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:31:52.787Z  INFO 41123 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:31:52.846Z  INFO 41123 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:31:52.851Z  INFO 41123 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-04T12:31:52.985Z  INFO 41123 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-04T12:31:52.997Z  INFO 41123 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-04T12:31:52.997Z  INFO 41123 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-04T12:31:53.028Z  INFO 41123 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-04T12:31:53.028Z  INFO 41123 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 240 ms
2025-11-04T12:31:53.068Z  INFO 41123 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:31:53.069Z  INFO 41123 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:31:53.072Z  INFO 41123 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:31:53.073Z  INFO 41123 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-04T12:31:53.073Z  INFO 41123 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:31:53.074Z  INFO 41123 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-04T12:31:53.074Z  WARN 41123 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:31:53.074Z  INFO 41123 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:31:53.094Z  INFO 41123 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:31:53.098Z  INFO 41123 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:31:53.121Z  WARN 41123 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:31:53.129Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:31:53.137Z DEBUG 41123 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:31:53.140Z DEBUG 41123 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:31:53.143Z DEBUG 41123 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:31:53.153Z  INFO 41123 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:31:53.196Z  INFO 41123 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-04T12:31:53.198Z  INFO 41123 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.422 seconds (process running for 8.217)
2025-11-04T12:31:53.236Z  INFO 41123 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:31:54.247Z  INFO 41123 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-04T12:31:54.338Z  INFO 41123 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-04T12:31:54.392Z  INFO 41123 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-04T12:31:54.392Z  INFO 41123 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-04T12:31:54.392Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-04T12:31:54.392Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-04T12:31:54.392Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-04T12:31:54.392Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6716acec
2025-11-04T12:31:54.392Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@5ab1595a
2025-11-04T12:31:54.392Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-04T12:31:54.392Z  INFO 41123 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-11-04T12:31:54.396Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:31:54.396Z DEBUG 41123 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:31:54.397Z  INFO 41123 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:31:54.397Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:31:54.398Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:31:54.446Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:31:54.448Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:31:54.449Z  INFO 41123 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:31:54.450Z  INFO 41123 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:31:54.452Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:31:54.453Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:31:54.456Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:31:54.459Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:31:54.459Z DEBUG 41123 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:31:54.459Z  INFO 41123 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:31:54.460Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:31:54.460Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:31:54.507Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:31:54.508Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:31:54.508Z  INFO 41123 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:31:54.508Z  INFO 41123 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:31:54.509Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:31:54.509Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:31:54.510Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:31:56.401Z  INFO 41123 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-04T12:31:56.418Z  INFO 41123 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-04T12:31:56.432Z  INFO 41123 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manhã
2025-11-04T12:31:56.447Z  INFO 41123 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colchão e mobília velha
2025-11-04T12:31:56.500Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:31:56.501Z DEBUG 41123 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:31:56.504Z DEBUG 41123 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@695e1cf7]
2025-11-04T12:31:56.504Z  INFO 41123 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:31:56.504Z  INFO 41123 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:31:56.504Z  INFO 41123 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2025-11-20
2025-11-04T12:31:56.505Z  INFO 41123 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:31:56.505Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:31:56.505Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:31:56.554Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:31:56.555Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:31:56.556Z  INFO 41123 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:31:56.556Z  INFO 41123 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:31:56.567Z  INFO 41123 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2025-11-20: 0/5
2025-11-04T12:31:56.572Z  INFO 41123 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 39f3957e-f6fc-4d49-85e0-27b7ec02588f
2025-11-04T12:31:56.576Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:31:56.576Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@171a2c5b]
2025-11-04T12:31:56.578Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:31:58.512Z  INFO 41123 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-04T12:31:58.524Z  INFO 41123 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-04T12:31:58.525Z  INFO 41123 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:31:58.552Z  INFO 41123 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:31:58.553Z  INFO 41123 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:31:58.561Z  INFO 41123 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:31:58.596Z DEBUG 41123 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:31:58.596Z DEBUG 41123 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:31:58.597Z DEBUG 41123 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@781938ba]
2025-11-04T12:31:58.598Z  INFO 41123 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:31:58.598Z  INFO 41123 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:31:58.598Z  INFO 41123 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:31:58.598Z  INFO 41123 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:31:58.598Z DEBUG 41123 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:31:58.599Z DEBUG 41123 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:31:58.647Z DEBUG 41123 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:31:58.648Z DEBUG 41123 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:31:58.649Z  INFO 41123 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:31:58.649Z  INFO 41123 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:31:58.653Z  INFO 41123 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 0/5
2025-11-04T12:31:58.658Z  INFO 41123 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: a0e9ad16-bdbc-498b-9961-01af8b7f7484
2025-11-04T12:31:58.659Z DEBUG 41123 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:31:58.660Z DEBUG 41123 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@37e3d3f2]
2025-11-04T12:31:58.660Z DEBUG 41123 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:31:58.668Z  INFO 41123 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: a0e9ad16-bdbc-498b-9961-01af8b7f7484
2025-11-04T12:31:58.784Z  INFO 41123 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:31:58.826Z  INFO 41123 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:31:58.855Z  INFO 41123 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: a0e9ad16-bdbc-498b-9961-01af8b7f7484
2025-11-04T12:31:58.894Z DEBUG 41123 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/a0e9ad16-bdbc-498b-9961-01af8b7f7484", parameters={}
2025-11-04T12:31:58.895Z DEBUG 41123 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:31:58.896Z  INFO 41123 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/a0e9ad16-bdbc-498b-9961-01af8b7f7484 - Fetching booking
2025-11-04T12:31:58.896Z  INFO 41123 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: a0e9ad16-bdbc-498b-9961-01af8b7f7484
2025-11-04T12:31:58.900Z DEBUG 41123 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:31:58.900Z DEBUG 41123 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4f2a582c]
2025-11-04T12:31:58.903Z DEBUG 41123 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:32:00.397Z  INFO 41123 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:32:00.402Z  INFO 41123 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-04T12:32:00.411Z  INFO 41123 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: a0e9ad16-bdbc-498b-9961-01af8b7f7484
2025-11-04T12:32:00.412Z  INFO 41123 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:32:00.429Z  INFO 41123 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:32:00.431Z  INFO 41123 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:32:00.442Z  INFO 41123 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:32:00.476Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:32:00.477Z DEBUG 41123 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:32:00.477Z DEBUG 41123 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@866085a]
2025-11-04T12:32:00.477Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:32:00.477Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:32:00.478Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:32:00.478Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:32:00.478Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:32:00.478Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:32:00.526Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:32:00.527Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:32:00.528Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:32:00.528Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:32:00.531Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 1/5
2025-11-04T12:32:00.536Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 760858d5-0df9-473a-9cca-fa0b8fc5be96
2025-11-04T12:32:00.537Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:32:00.537Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7611d97d]
2025-11-04T12:32:00.538Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:32:00.540Z  INFO 41123 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 760858d5-0df9-473a-9cca-fa0b8fc5be96
2025-11-04T12:32:00.841Z  INFO 41123 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:32:00.881Z  INFO 41123 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:32:00.907Z  INFO 41123 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-04T12:32:00.943Z DEBUG 41123 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-04T12:32:00.944Z DEBUG 41123 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:32:00.945Z  INFO 41123 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/INVALID - Fetching booking
2025-11-04T12:32:00.945Z  INFO 41123 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-04T12:32:00.947Z ERROR 41123 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-04T12:32:00.947Z DEBUG 41123 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:32:00.947Z DEBUG 41123 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:32:00.947Z DEBUG 41123 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-04T12:32:02.445Z  INFO 41123 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:32:02.450Z  INFO 41123 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-04T12:32:02.450Z  INFO 41123 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:32:02.462Z  INFO 41123 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:32:02.463Z  INFO 41123 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:32:02.468Z  INFO 41123 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:32:02.493Z DEBUG 41123 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:32:02.493Z DEBUG 41123 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:32:02.494Z DEBUG 41123 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@679db65]
2025-11-04T12:32:02.494Z  INFO 41123 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:32:02.494Z  INFO 41123 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:32:02.494Z  INFO 41123 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:32:02.494Z  INFO 41123 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:32:02.494Z DEBUG 41123 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:32:02.494Z DEBUG 41123 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:32:02.541Z DEBUG 41123 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:32:02.541Z DEBUG 41123 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:32:02.541Z  INFO 41123 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:32:02.541Z  INFO 41123 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:32:02.542Z  INFO 41123 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 2/5
2025-11-04T12:32:02.545Z  INFO 41123 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 5b180453-dc7e-4e0a-8ea5-5956ab03f55e
2025-11-04T12:32:02.546Z DEBUG 41123 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:32:02.546Z DEBUG 41123 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@78000255]
2025-11-04T12:32:02.547Z DEBUG 41123 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:32:02.549Z  INFO 41123 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:32:02.552Z DEBUG 41123 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:32:02.553Z DEBUG 41123 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:32:02.554Z DEBUG 41123 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@72c979c7]
2025-11-04T12:32:02.554Z  INFO 41123 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:32:02.554Z  INFO 41123 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:32:02.554Z  INFO 41123 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:32:02.554Z  INFO 41123 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:32:02.554Z DEBUG 41123 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:32:02.554Z DEBUG 41123 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:32:02.603Z DEBUG 41123 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:32:02.604Z DEBUG 41123 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:32:02.604Z  INFO 41123 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:32:02.604Z  INFO 41123 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:32:02.606Z  INFO 41123 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 0/5
2025-11-04T12:32:02.609Z  INFO 41123 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c5dc540f-f06f-4055-a038-c31643342011
2025-11-04T12:32:02.610Z DEBUG 41123 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:32:02.610Z DEBUG 41123 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3d3393d5]
2025-11-04T12:32:02.611Z DEBUG 41123 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:32:02.613Z  INFO 41123 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:32:02.941Z  INFO 41123 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:32:03.016Z  INFO 41123 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:32:03.020Z DEBUG 41123 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:32:03.021Z DEBUG 41123 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:32:03.021Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:32:03.021Z  INFO 41123 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:32:03.021Z DEBUG 41123 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:32:03.021Z DEBUG 41123 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:32:03.022Z DEBUG 41123 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:32:03.022Z  INFO 41123 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:32:03.022Z  INFO 41123 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:32:03.030Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:32:03.030Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:32:03.036Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:32:03.038Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:32:03.039Z DEBUG 41123 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:32:03.039Z  INFO 41123 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:32:03.039Z  INFO 41123 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:32:03.042Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:32:03.042Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:32:03.045Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:32:03.068Z DEBUG 41123 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:32:03.069Z DEBUG 41123 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:32:03.069Z  INFO 41123 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:32:03.069Z  INFO 41123 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:32:03.069Z DEBUG 41123 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:32:03.070Z DEBUG 41123 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:32:03.070Z DEBUG 41123 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:32:03.073Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:32:03.073Z DEBUG 41123 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:32:03.073Z  INFO 41123 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:32:03.074Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:32:03.074Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:32:03.121Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:32:03.122Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:32:03.123Z  INFO 41123 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:32:03.123Z  INFO 41123 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:32:03.124Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:32:03.124Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:32:03.126Z DEBUG 41123 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:32:05.062Z  INFO 41123 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-04T12:32:05.088Z DEBUG 41123 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-04T12:32:05.089Z DEBUG 41123 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:32:05.089Z  INFO 41123 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:32:05.089Z  INFO 41123 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-04T12:32:05.092Z DEBUG 41123 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:32:05.092Z DEBUG 41123 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:32:05.095Z DEBUG 41123 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:32:06.612Z  INFO 41123 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:32:06.622Z  INFO 41123 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-04T12:32:06.623Z  INFO 41123 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:32:06.640Z  INFO 41123 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:32:06.643Z  INFO 41123 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:32:06.665Z  INFO 41123 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:32:06.706Z DEBUG 41123 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:32:06.706Z DEBUG 41123 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:32:06.707Z DEBUG 41123 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@72a3042b]
2025-11-04T12:32:06.708Z  INFO 41123 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:32:06.708Z  INFO 41123 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:32:06.708Z  INFO 41123 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:32:06.708Z  INFO 41123 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:32:06.708Z DEBUG 41123 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:32:06.709Z DEBUG 41123 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:32:06.755Z DEBUG 41123 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:32:06.756Z DEBUG 41123 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:32:06.756Z  INFO 41123 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:32:06.756Z  INFO 41123 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:32:06.757Z  INFO 41123 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 3/5
2025-11-04T12:32:06.759Z  INFO 41123 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 2780434e-e7bd-4793-8aa8-a79157479c2e
2025-11-04T12:32:06.760Z DEBUG 41123 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:32:06.760Z DEBUG 41123 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@47131a0d]
2025-11-04T12:32:06.761Z DEBUG 41123 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:32:06.762Z  INFO 41123 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:32:06.765Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:32:06.765Z DEBUG 41123 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:32:06.765Z DEBUG 41123 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@72846c8a]
2025-11-04T12:32:06.765Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:32:06.765Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:32:06.766Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:32:06.766Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:32:06.766Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:32:06.766Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:32:06.815Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:32:06.816Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:32:06.817Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:32:06.817Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:32:06.821Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 1/5
2025-11-04T12:32:06.827Z  INFO 41123 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: b9577a07-14f6-495f-9c96-e23754b70205
2025-11-04T12:32:06.828Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:32:06.828Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@75583d7f]
2025-11-04T12:32:06.830Z DEBUG 41123 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:32:06.832Z  INFO 41123 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:32:06.952Z  INFO 41123 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:32:07.020Z  INFO 41123 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:32:07.026Z DEBUG 41123 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:32:07.026Z DEBUG 41123 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:32:07.026Z DEBUG 41123 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:32:07.026Z DEBUG 41123 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:32:07.026Z  INFO 41123 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:32:07.027Z  INFO 41123 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:32:07.027Z DEBUG 41123 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:32:07.027Z  INFO 41123 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:32:07.027Z DEBUG 41123 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:32:07.029Z DEBUG 41123 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:32:07.030Z DEBUG 41123 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:32:07.035Z  INFO 41123 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-04T12:32:07.036Z DEBUG 41123 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:32:07.038Z DEBUG 41123 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:32:07.038Z DEBUG 41123 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:32:07.038Z  INFO 41123 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:32:07.038Z  INFO 41123 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:32:07.041Z DEBUG 41123 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:32:07.041Z DEBUG 41123 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:32:07.045Z DEBUG 41123 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:32:07.072Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-04T12:32:07.072Z DEBUG 41123 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:32:07.074Z  INFO 41123 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:32:07.074Z  INFO 41123 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-04T12:32:07.074Z DEBUG 41123 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:32:07.074Z DEBUG 41123 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:32:07.075Z  INFO 41123 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:32:07.075Z  INFO 41123 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:32:07.075Z DEBUG 41123 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:32:07.075Z DEBUG 41123 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:32:07.076Z DEBUG 41123 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:32:07.078Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:32:07.078Z DEBUG 41123 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:32:07.079Z  INFO 41123 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:32:07.079Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:32:07.079Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:32:07.080Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:32:07.080Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:32:07.085Z DEBUG 41123 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:32:07.128Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:32:07.128Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:32:07.128Z  INFO 41123 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:32:07.128Z  INFO 41123 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:32:07.129Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:32:07.129Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:32:07.130Z DEBUG 41123 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:32:08.576Z  INFO 41123 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:32:08.593Z  INFO 41123 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-04T12:32:08.594Z  INFO 41123 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:32:08.609Z  INFO 41123 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-04T12:32:08.668Z DEBUG 41123 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@544733a4, started on Tue Nov 04 12:31:47 WET 2025
2025-11-04T12:32:08.670Z  INFO 41123 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:32:08.735Z  INFO 41123 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-04T12:32:08.736Z  INFO 41123 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-04T12:32:08.737Z DEBUG 41123 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@44dad6b6, started on Tue Nov 04 12:31:52 WET 2025
2025-11-04T12:32:08.737Z  INFO 41123 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:32:08.738Z  INFO 41123 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-04T12:32:08.738Z  INFO 41123 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-04T12:32:08.739Z  INFO 41123 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-04T12:32:08.741Z  INFO 41123 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-04T12:32:08.742Z  INFO 41123 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:32:08.743Z  INFO 41123 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-04T12:32:08.744Z  INFO 41123 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-04T12:38:58.067Z  INFO 44381 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 44381 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:38:58.068Z  INFO 44381 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:38:58.081Z DEBUG 44381 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@544733a4
2025-11-04T12:38:58.592Z  INFO 44381 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:38:58.633Z  INFO 44381 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2025-11-04T12:38:58.968Z  INFO 44381 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:38:59.005Z  INFO 44381 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-04T12:38:59.028Z  INFO 44381 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:38:59.117Z  INFO 44381 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:38:59.140Z  INFO 44381 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-04T12:38:59.354Z  INFO 44381 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:38:59.356Z  INFO 44381 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-04T12:38:59.380Z  WARN 44381 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:38:59.396Z  INFO 44381 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:39:00.062Z  INFO 44381 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:39:00.109Z  INFO 44381 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:39:00.319Z  INFO 44381 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-04T12:39:00.904Z  WARN 44381 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:39:00.969Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:39:01.022Z DEBUG 44381 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:39:01.040Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:39:01.076Z DEBUG 44381 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:39:01.163Z  INFO 44381 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:39:01.205Z  INFO 44381 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T12:39:01.205Z  INFO 44381 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T12:39:01.206Z  INFO 44381 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-04T12:39:01.223Z  INFO 44381 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 3.436 seconds (process running for 5.606)
2025-11-04T12:39:01.257Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:39:01.303Z DEBUG 44381 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@74c35a9f]
2025-11-04T12:39:01.307Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:39:01.308Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:39:01.312Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-04T12:39:01.312Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:01.366Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:01.372Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:01.683Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:01.685Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:01.689Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:01.690Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:01.788Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-04T12:39:01.840Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d44cc1a6-7e73-41f5-a3b0-3b46ff392c1a
2025-11-04T12:39:01.877Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:01.878Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5ae4332c]
2025-11-04T12:39:01.896Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:39:01.897Z DEBUG 44381 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3acb52c8]
2025-11-04T12:39:01.897Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:39:01.897Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:39:01.897Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-21
2025-11-04T12:39:01.897Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:01.898Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:01.898Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:01.958Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:01.959Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:01.959Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:01.960Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:01.962Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-21: 0/5
2025-11-04T12:39:01.964Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0597bcf7-efd6-4b5d-b133-43fa7a859e3a
2025-11-04T12:39:01.965Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:01.965Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4f835b4d]
2025-11-04T12:39:01.966Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:39:01.967Z DEBUG 44381 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@752ea66f]
2025-11-04T12:39:01.967Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:39:01.967Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:39:01.967Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-22
2025-11-04T12:39:01.968Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:01.968Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:01.968Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:02.376Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:02.377Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:02.379Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:02.379Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:02.380Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-22: 0/5
2025-11-04T12:39:02.382Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 49def54a-9a26-43fb-92cf-8c70c14da13b
2025-11-04T12:39:02.384Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:02.384Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6b2bdbfa]
2025-11-04T12:39:02.387Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:39:02.394Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:39:02.395Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-04T12:39:02.424Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:02.425Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:39:02.487Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:39:02.488Z DEBUG 44381 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@33488630]
2025-11-04T12:39:02.488Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:39:02.488Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:39:02.488Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-04T12:39:02.488Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:02.488Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:02.489Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:02.543Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:02.544Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:02.544Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:02.544Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:02.545Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-04T12:39:02.547Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0127cd16-fd9e-4c78-a522-9a95d7a4dfb5
2025-11-04T12:39:02.548Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:02.548Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@67f5ddc0]
2025-11-04T12:39:02.557Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:39:02.557Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T12:39:02.557Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-04T12:39:02.560Z ERROR 44381 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-04T12:39:02.561Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:02.561Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:39:02.567Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:39:02.568Z DEBUG 44381 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2471d63c]
2025-11-04T12:39:02.568Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:39:02.568Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:39:02.569Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-04T12:39:02.569Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:02.569Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:02.569Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:02.625Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:02.626Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:02.627Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:02.627Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:02.628Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-04T12:39:02.630Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 30491dca-af43-4f5e-a13c-37188c0dbbdf
2025-11-04T12:39:02.631Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:02.631Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5cc25785]
2025-11-04T12:39:02.633Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:39:02.634Z DEBUG 44381 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-04T12:39:02.635Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-04T12:39:02.635Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: 30491dca-af43-4f5e-a13c-37188c0dbbdf, newStatus: IN_PROGRESS
2025-11-04T12:39:02.635Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 30491dca-af43-4f5e-a13c-37188c0dbbdf
2025-11-04T12:39:02.641Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-04T12:39:02.650Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:02.650Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@23a6c5af]
2025-11-04T12:39:02.661Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:39:02.662Z DEBUG 44381 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1287e3e9]
2025-11-04T12:39:02.662Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:39:02.662Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:39:02.662Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-04T12:39:02.662Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:02.663Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:02.663Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:02.715Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:02.716Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:02.716Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:02.716Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:02.717Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-04T12:39:02.720Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c3b77c2f-10dc-4c7e-a79c-560e347ba368
2025-11-04T12:39:02.720Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:02.720Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@70170a60]
2025-11-04T12:39:02.722Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:39:02.722Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T12:39:02.722Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: c3b77c2f-10dc-4c7e-a79c-560e347ba368
2025-11-04T12:39:02.724Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:02.724Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@fbfd8c7]
2025-11-04T12:39:02.733Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:39:02.734Z DEBUG 44381 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6bd007e0]
2025-11-04T12:39:02.734Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:39:02.734Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:39:02.734Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-04T12:39:02.734Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:02.735Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:02.735Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:02.793Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:02.794Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:02.795Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:02.796Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:02.796Z  WARN 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-04T12:39:02.800Z ERROR 44381 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-04T12:39:02.801Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:02.801Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:39:02.817Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:39:02.818Z DEBUG 44381 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2cde7320]
2025-11-04T12:39:02.818Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:39:02.818Z  INFO 44381 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:39:02.819Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-04T12:39:02.819Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:02.819Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:02.820Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:02.874Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:02.875Z DEBUG 44381 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:02.877Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:02.878Z  INFO 44381 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:02.882Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-04T12:39:02.887Z  INFO 44381 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 22065c0e-843c-45a6-8d3a-48d88e1a1e93
2025-11-04T12:39:02.888Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:02.889Z DEBUG 44381 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1dec0a0c]
2025-11-04T12:39:02.890Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:39:02.891Z DEBUG 44381 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-04T12:39:02.894Z  WARN 44381 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-04T12:39:02.902Z  INFO 44381 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:39:02.905Z  INFO 44381 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-04T12:39:02.908Z  INFO 44381 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:39:02.920Z  INFO 44381 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 44381 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:39:02.920Z  INFO 44381 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:39:02.921Z DEBUG 44381 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4cc1ffad
2025-11-04T12:39:02.987Z  INFO 44381 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:39:02.991Z  INFO 44381 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T12:39:03.038Z  INFO 44381 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:39:03.039Z  INFO 44381 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:39:03.045Z  INFO 44381 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:39:03.046Z  INFO 44381 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-04T12:39:03.047Z  INFO 44381 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:39:03.047Z  INFO 44381 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-04T12:39:03.048Z  WARN 44381 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:39:03.048Z  INFO 44381 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:39:03.074Z  INFO 44381 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:39:03.080Z  INFO 44381 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:39:03.121Z  WARN 44381 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:39:03.130Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:39:03.139Z DEBUG 44381 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:39:03.143Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:39:03.147Z DEBUG 44381 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:39:03.165Z  INFO 44381 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:39:03.175Z  INFO 44381 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.267 seconds (process running for 7.558)
2025-11-04T12:39:03.473Z  INFO 44381 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:39:03.476Z  INFO 44381 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:39:03.478Z  INFO 44381 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:39:03.489Z  INFO 44381 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 44381 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:39:03.489Z  INFO 44381 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:39:03.548Z  INFO 44381 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:39:03.552Z  INFO 44381 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T12:39:03.671Z  INFO 44381 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-04T12:39:03.684Z  INFO 44381 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-04T12:39:03.684Z  INFO 44381 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-04T12:39:03.714Z  INFO 44381 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-04T12:39:03.714Z  INFO 44381 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 224 ms
2025-11-04T12:39:03.755Z  INFO 44381 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:39:03.756Z  INFO 44381 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:39:03.759Z  INFO 44381 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:39:03.760Z  INFO 44381 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-04T12:39:03.760Z  INFO 44381 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:39:03.760Z  INFO 44381 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-04T12:39:03.761Z  WARN 44381 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:39:03.761Z  INFO 44381 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:39:03.781Z  INFO 44381 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:39:03.785Z  INFO 44381 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:39:03.808Z  WARN 44381 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:39:03.815Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:39:03.823Z DEBUG 44381 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:39:03.825Z DEBUG 44381 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:39:03.827Z DEBUG 44381 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:39:03.844Z  INFO 44381 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:39:03.892Z  INFO 44381 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-04T12:39:03.894Z  INFO 44381 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.416 seconds (process running for 8.277)
2025-11-04T12:39:03.928Z  INFO 44381 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:39:04.917Z  INFO 44381 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-04T12:39:05.009Z  INFO 44381 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-04T12:39:05.063Z  INFO 44381 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-04T12:39:05.063Z  INFO 44381 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-04T12:39:05.063Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-04T12:39:05.063Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-04T12:39:05.063Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-04T12:39:05.064Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2d4696a0
2025-11-04T12:39:05.064Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@7d06c68d
2025-11-04T12:39:05.064Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-04T12:39:05.064Z  INFO 44381 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-04T12:39:05.074Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:39:05.075Z DEBUG 44381 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:39:05.076Z  INFO 44381 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:05.076Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:05.077Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:05.130Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:05.131Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:05.132Z  INFO 44381 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:05.133Z  INFO 44381 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:05.136Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:39:05.137Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:39:05.148Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:39:05.157Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:39:05.158Z DEBUG 44381 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:39:05.158Z  INFO 44381 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:05.159Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:05.159Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:05.215Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:05.216Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:05.217Z  INFO 44381 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:05.217Z  INFO 44381 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:05.218Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:39:05.219Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:39:05.221Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:39:07.060Z  INFO 44381 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-04T12:39:07.076Z  INFO 44381 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-04T12:39:07.088Z  INFO 44381 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manhã
2025-11-04T12:39:07.103Z  INFO 44381 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colchão e mobília velha
2025-11-04T12:39:07.147Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:39:07.148Z DEBUG 44381 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:39:07.151Z DEBUG 44381 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6def94d9]
2025-11-04T12:39:07.152Z  INFO 44381 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:39:07.152Z  INFO 44381 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:39:07.152Z  INFO 44381 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2025-11-20
2025-11-04T12:39:07.152Z  INFO 44381 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:07.153Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:07.153Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:07.206Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:07.206Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:07.207Z  INFO 44381 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:07.207Z  INFO 44381 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:07.219Z  INFO 44381 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2025-11-20: 0/5
2025-11-04T12:39:07.227Z  INFO 44381 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 50faf330-d554-447f-af8a-f10fc2265bee
2025-11-04T12:39:07.232Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:39:07.232Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7cc701f6]
2025-11-04T12:39:07.236Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:39:09.161Z  INFO 44381 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-04T12:39:09.172Z  INFO 44381 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-04T12:39:09.174Z  INFO 44381 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:39:09.193Z  INFO 44381 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:39:09.193Z  INFO 44381 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:39:09.198Z  INFO 44381 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:39:09.233Z DEBUG 44381 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:39:09.233Z DEBUG 44381 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:39:09.234Z DEBUG 44381 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5c18451b]
2025-11-04T12:39:09.234Z  INFO 44381 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:39:09.234Z  INFO 44381 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:39:09.235Z  INFO 44381 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:39:09.235Z  INFO 44381 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:09.235Z DEBUG 44381 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:09.235Z DEBUG 44381 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:09.288Z DEBUG 44381 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:09.289Z DEBUG 44381 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:09.290Z  INFO 44381 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:09.290Z  INFO 44381 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:09.293Z  INFO 44381 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 0/5
2025-11-04T12:39:09.300Z  INFO 44381 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f2443ba8-0077-46cd-8696-8be6713e09c8
2025-11-04T12:39:09.301Z DEBUG 44381 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:09.302Z DEBUG 44381 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@13e2aad3]
2025-11-04T12:39:09.303Z DEBUG 44381 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:39:09.312Z  INFO 44381 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: f2443ba8-0077-46cd-8696-8be6713e09c8
2025-11-04T12:39:09.443Z  INFO 44381 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:39:09.486Z  INFO 44381 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:39:09.514Z  INFO 44381 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: f2443ba8-0077-46cd-8696-8be6713e09c8
2025-11-04T12:39:09.567Z DEBUG 44381 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/f2443ba8-0077-46cd-8696-8be6713e09c8", parameters={}
2025-11-04T12:39:09.568Z DEBUG 44381 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:39:09.569Z  INFO 44381 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T12:39:09.569Z  INFO 44381 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: f2443ba8-0077-46cd-8696-8be6713e09c8
2025-11-04T12:39:09.574Z DEBUG 44381 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:39:09.574Z DEBUG 44381 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@ae6129a]
2025-11-04T12:39:09.576Z DEBUG 44381 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:39:11.069Z  INFO 44381 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:39:11.078Z  INFO 44381 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-04T12:39:11.090Z  INFO 44381 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: f2443ba8-0077-46cd-8696-8be6713e09c8
2025-11-04T12:39:11.091Z  INFO 44381 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:39:11.109Z  INFO 44381 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:39:11.111Z  INFO 44381 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:39:11.121Z  INFO 44381 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:39:11.166Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:39:11.167Z DEBUG 44381 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:39:11.167Z DEBUG 44381 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7850f736]
2025-11-04T12:39:11.168Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:39:11.168Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:39:11.168Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:39:11.168Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:11.168Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:11.168Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:11.221Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:11.222Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:11.223Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:11.223Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:11.227Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 1/5
2025-11-04T12:39:11.234Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 443a0989-96c6-4d8f-91c5-128027daf53f
2025-11-04T12:39:11.236Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:11.236Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6577ece]
2025-11-04T12:39:11.238Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:39:11.240Z  INFO 44381 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 443a0989-96c6-4d8f-91c5-128027daf53f
2025-11-04T12:39:11.568Z  INFO 44381 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:39:11.608Z  INFO 44381 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:39:11.633Z  INFO 44381 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-04T12:39:11.691Z DEBUG 44381 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-04T12:39:11.692Z DEBUG 44381 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:39:11.694Z  INFO 44381 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T12:39:11.694Z  INFO 44381 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-04T12:39:11.698Z ERROR 44381 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-04T12:39:11.699Z DEBUG 44381 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:39:11.699Z DEBUG 44381 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:39:11.699Z DEBUG 44381 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-04T12:39:13.198Z  INFO 44381 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:39:13.208Z  INFO 44381 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-04T12:39:13.210Z  INFO 44381 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:39:13.225Z  INFO 44381 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:39:13.226Z  INFO 44381 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:39:13.231Z  INFO 44381 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:39:13.255Z DEBUG 44381 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:39:13.256Z DEBUG 44381 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:39:13.257Z DEBUG 44381 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@25a298ec]
2025-11-04T12:39:13.258Z  INFO 44381 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:39:13.258Z  INFO 44381 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:39:13.258Z  INFO 44381 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:39:13.258Z  INFO 44381 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:13.258Z DEBUG 44381 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:13.258Z DEBUG 44381 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:13.311Z DEBUG 44381 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:13.312Z DEBUG 44381 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:13.313Z  INFO 44381 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:13.314Z  INFO 44381 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:13.317Z  INFO 44381 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 2/5
2025-11-04T12:39:13.323Z  INFO 44381 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: bad487cb-a2c4-447a-8de6-18437300a86e
2025-11-04T12:39:13.325Z DEBUG 44381 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:13.325Z DEBUG 44381 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5bf8a527]
2025-11-04T12:39:13.327Z DEBUG 44381 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:39:13.330Z  INFO 44381 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:39:13.336Z DEBUG 44381 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:39:13.337Z DEBUG 44381 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:39:13.338Z DEBUG 44381 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7c4799d2]
2025-11-04T12:39:13.338Z  INFO 44381 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:39:13.338Z  INFO 44381 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:39:13.338Z  INFO 44381 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:39:13.339Z  INFO 44381 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:13.339Z DEBUG 44381 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:13.339Z DEBUG 44381 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:13.392Z DEBUG 44381 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:13.393Z DEBUG 44381 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:13.393Z  INFO 44381 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:13.394Z  INFO 44381 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:13.397Z  INFO 44381 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 0/5
2025-11-04T12:39:13.403Z  INFO 44381 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 4648af06-acd4-4438-b79d-a75149b8be3d
2025-11-04T12:39:13.404Z DEBUG 44381 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:13.405Z DEBUG 44381 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@33bd7211]
2025-11-04T12:39:13.406Z DEBUG 44381 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:39:13.408Z  INFO 44381 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:39:13.722Z  INFO 44381 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:39:13.800Z  INFO 44381 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:39:13.805Z DEBUG 44381 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:39:13.805Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:39:13.805Z DEBUG 44381 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:39:13.805Z DEBUG 44381 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:39:13.806Z  INFO 44381 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:13.806Z  INFO 44381 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:39:13.806Z  INFO 44381 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:39:13.806Z DEBUG 44381 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:13.806Z DEBUG 44381 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:13.813Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:39:13.813Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:39:13.819Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:39:13.821Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:39:13.821Z DEBUG 44381 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:39:13.822Z  INFO 44381 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:39:13.822Z  INFO 44381 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:39:13.825Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:39:13.825Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:39:13.829Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:39:13.858Z DEBUG 44381 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:13.859Z DEBUG 44381 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:13.860Z  INFO 44381 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:13.860Z  INFO 44381 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:13.861Z DEBUG 44381 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:39:13.861Z DEBUG 44381 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:39:13.864Z DEBUG 44381 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:39:13.870Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:39:13.871Z DEBUG 44381 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:39:13.872Z  INFO 44381 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:13.873Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:13.873Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:13.926Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:13.927Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:13.928Z  INFO 44381 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:13.928Z  INFO 44381 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:13.929Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:39:13.930Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:39:13.932Z DEBUG 44381 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:39:15.857Z  INFO 44381 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-04T12:39:15.901Z DEBUG 44381 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-04T12:39:15.902Z DEBUG 44381 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:39:15.903Z  INFO 44381 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:39:15.903Z  INFO 44381 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-04T12:39:15.908Z DEBUG 44381 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:39:15.908Z DEBUG 44381 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:39:15.910Z DEBUG 44381 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:39:17.426Z  INFO 44381 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:39:17.440Z  INFO 44381 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-04T12:39:17.442Z  INFO 44381 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:39:17.458Z  INFO 44381 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:39:17.459Z  INFO 44381 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:39:17.465Z  INFO 44381 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:39:17.498Z DEBUG 44381 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:39:17.498Z DEBUG 44381 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:39:17.499Z DEBUG 44381 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1f030894]
2025-11-04T12:39:17.499Z  INFO 44381 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:39:17.499Z  INFO 44381 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:39:17.499Z  INFO 44381 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Aveiro, date: 2026-12-12
2025-11-04T12:39:17.499Z  INFO 44381 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:17.499Z DEBUG 44381 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:17.499Z DEBUG 44381 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:17.551Z DEBUG 44381 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:17.552Z DEBUG 44381 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:17.553Z  INFO 44381 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:17.553Z  INFO 44381 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:17.556Z  INFO 44381 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Aveiro on 2026-12-12: 3/5
2025-11-04T12:39:17.563Z  INFO 44381 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 39512d80-88d9-48bb-82a5-99f5b7410baa
2025-11-04T12:39:17.565Z DEBUG 44381 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:17.565Z DEBUG 44381 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2b6632a0]
2025-11-04T12:39:17.566Z DEBUG 44381 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:39:17.569Z  INFO 44381 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:39:17.575Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:39:17.575Z DEBUG 44381 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:39:17.577Z DEBUG 44381 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5bb3fe2e]
2025-11-04T12:39:17.577Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:39:17.577Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:39:17.577Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2026-12-13
2025-11-04T12:39:17.577Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:17.578Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:17.578Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:17.631Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:17.632Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:17.633Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:17.633Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:17.635Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2026-12-13: 1/5
2025-11-04T12:39:17.639Z  INFO 44381 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 6621920e-6cb6-4bc9-b55e-000b01b3fd3f
2025-11-04T12:39:17.641Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:39:17.641Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6e144225]
2025-11-04T12:39:17.642Z DEBUG 44381 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:39:17.645Z  INFO 44381 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:39:17.960Z  INFO 44381 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:39:18.048Z  INFO 44381 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:39:18.058Z DEBUG 44381 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:39:18.058Z DEBUG 44381 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:39:18.058Z DEBUG 44381 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:39:18.058Z DEBUG 44381 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:39:18.058Z  INFO 44381 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:18.059Z DEBUG 44381 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:18.059Z  INFO 44381 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:39:18.059Z  INFO 44381 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:39:18.059Z DEBUG 44381 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:18.062Z DEBUG 44381 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:39:18.062Z DEBUG 44381 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:39:18.066Z DEBUG 44381 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:39:18.066Z  INFO 44381 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-04T12:39:18.070Z DEBUG 44381 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:39:18.070Z DEBUG 44381 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:39:18.070Z  INFO 44381 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:39:18.070Z  INFO 44381 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:39:18.075Z DEBUG 44381 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:39:18.075Z DEBUG 44381 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:39:18.082Z DEBUG 44381 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:39:18.102Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-04T12:39:18.103Z DEBUG 44381 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:39:18.104Z  INFO 44381 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:39:18.104Z  INFO 44381 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-04T12:39:18.108Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:39:18.108Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:39:18.111Z DEBUG 44381 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:18.111Z DEBUG 44381 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:18.111Z  INFO 44381 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:18.111Z  INFO 44381 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:18.111Z DEBUG 44381 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:39:18.111Z DEBUG 44381 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:39:18.112Z DEBUG 44381 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:39:18.112Z DEBUG 44381 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:39:18.115Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:39:18.115Z DEBUG 44381 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:39:18.116Z  INFO 44381 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:39:18.117Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:39:18.117Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:39:18.169Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:39:18.170Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:39:18.170Z  INFO 44381 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:39:18.170Z  INFO 44381 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:39:18.171Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:39:18.171Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:39:18.172Z DEBUG 44381 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:39:19.605Z  INFO 44381 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:39:19.620Z  INFO 44381 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-04T12:39:19.621Z  INFO 44381 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:39:19.630Z  INFO 44381 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-04T12:39:19.693Z DEBUG 44381 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@544733a4, started on Tue Nov 04 12:38:58 WET 2025
2025-11-04T12:39:19.762Z  INFO 44381 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:39:19.764Z  INFO 44381 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-04T12:39:19.765Z  INFO 44381 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-04T12:39:19.765Z DEBUG 44381 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4cc1ffad, started on Tue Nov 04 12:39:02 WET 2025
2025-11-04T12:39:19.766Z  INFO 44381 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:39:19.766Z  INFO 44381 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-04T12:39:19.767Z  INFO 44381 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-04T12:39:19.768Z  INFO 44381 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-04T12:39:19.769Z  INFO 44381 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-04T12:39:19.771Z  INFO 44381 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:39:19.771Z  INFO 44381 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-04T12:39:19.772Z  INFO 44381 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-04T12:46:14.433Z  INFO 47646 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 47646 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:46:14.434Z  INFO 47646 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:46:14.447Z DEBUG 47646 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@544733a4
2025-11-04T12:46:15.008Z  INFO 47646 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:46:15.051Z  INFO 47646 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2025-11-04T12:46:15.417Z  INFO 47646 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:46:15.453Z  INFO 47646 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-04T12:46:15.477Z  INFO 47646 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:46:15.561Z  INFO 47646 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:46:15.583Z  INFO 47646 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-04T12:46:15.790Z  INFO 47646 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:46:15.792Z  INFO 47646 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-04T12:46:15.815Z  WARN 47646 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:46:15.832Z  INFO 47646 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:46:16.507Z  INFO 47646 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:46:16.550Z  INFO 47646 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:46:16.736Z  INFO 47646 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-04T12:46:17.284Z  WARN 47646 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:46:17.347Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:46:17.396Z DEBUG 47646 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:46:17.422Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:46:17.456Z DEBUG 47646 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:46:17.530Z  INFO 47646 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:46:17.572Z  INFO 47646 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T12:46:17.572Z  INFO 47646 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T12:46:17.573Z  INFO 47646 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-04T12:46:17.592Z  INFO 47646 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 3.489 seconds (process running for 5.773)
2025-11-04T12:46:17.627Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:46:17.674Z DEBUG 47646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@77f30b8e]
2025-11-04T12:46:17.679Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:46:17.679Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:46:17.684Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:46:17.684Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:17.739Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:17.745Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:18.029Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:18.030Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:18.033Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:18.034Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:18.130Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:46:18.179Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f513b035-888e-4442-8c9d-78d5424cc0ff
2025-11-04T12:46:18.212Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:18.213Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5c45adb2]
2025-11-04T12:46:18.230Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:46:18.231Z DEBUG 47646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7536dcbe]
2025-11-04T12:46:18.231Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:46:18.231Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:46:18.231Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:46:18.232Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:18.232Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:18.232Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:18.280Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:18.280Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:18.281Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:18.281Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:18.283Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:46:18.285Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ad299292-a8a1-495b-83e2-27096d2e9a3c
2025-11-04T12:46:18.286Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:18.286Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7ce3acc0]
2025-11-04T12:46:18.287Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:46:18.288Z DEBUG 47646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7a978cdb]
2025-11-04T12:46:18.288Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:46:18.288Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:46:18.288Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:46:18.288Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:18.289Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:18.289Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:18.340Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:18.340Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:18.341Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:18.341Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:18.342Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:46:18.344Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 631eafbb-9df0-40c7-b08d-e000dc86b847
2025-11-04T12:46:18.345Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:18.345Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@68165b96]
2025-11-04T12:46:18.347Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:46:18.352Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:46:18.353Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-04T12:46:18.384Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:18.385Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:46:18.441Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:46:18.441Z DEBUG 47646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@d173636]
2025-11-04T12:46:18.442Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:46:18.442Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:46:18.442Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:46:18.442Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:18.442Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:18.442Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:18.491Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:18.493Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:18.494Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:18.494Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:18.498Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:46:18.506Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 6a24b00c-8465-4a4a-a84b-73f21e77c001
2025-11-04T12:46:18.511Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:18.512Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@48ec519]
2025-11-04T12:46:18.551Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:46:18.553Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T12:46:18.553Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-04T12:46:18.561Z ERROR 47646 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-04T12:46:18.562Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:18.562Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:46:18.572Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:46:18.573Z DEBUG 47646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3574f8f4]
2025-11-04T12:46:18.573Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:46:18.573Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:46:18.573Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:46:18.573Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:18.574Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:18.574Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:18.622Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:18.622Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:18.623Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:18.623Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:18.624Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:46:18.627Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: e078bd04-d626-4b2d-b49f-2e3abb6c8075
2025-11-04T12:46:18.627Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:18.628Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2b9206f3]
2025-11-04T12:46:18.629Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:46:18.631Z DEBUG 47646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-04T12:46:18.631Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-04T12:46:18.632Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: e078bd04-d626-4b2d-b49f-2e3abb6c8075, newStatus: IN_PROGRESS
2025-11-04T12:46:18.632Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: e078bd04-d626-4b2d-b49f-2e3abb6c8075
2025-11-04T12:46:18.637Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-04T12:46:18.645Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:18.645Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@338ee33]
2025-11-04T12:46:18.655Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:46:18.656Z DEBUG 47646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5d96a45a]
2025-11-04T12:46:18.656Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:46:18.656Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:46:18.656Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:46:18.656Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:18.657Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:18.657Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:18.706Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:18.707Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:18.709Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:18.709Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:18.713Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:46:18.719Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 9320b454-77a1-4b3a-8bfc-40bc7424b234
2025-11-04T12:46:18.721Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:18.721Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@34eabd4c]
2025-11-04T12:46:18.723Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:46:18.723Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T12:46:18.723Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 9320b454-77a1-4b3a-8bfc-40bc7424b234
2025-11-04T12:46:18.726Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:18.726Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@b61a0cd]
2025-11-04T12:46:18.734Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:46:18.735Z DEBUG 47646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@22518cb9]
2025-11-04T12:46:18.735Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:46:18.735Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:46:18.735Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:46:18.735Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:18.736Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:18.736Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:18.785Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:18.786Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:18.788Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:18.789Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:18.789Z  WARN 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-04T12:46:18.793Z ERROR 47646 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-04T12:46:18.794Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:18.794Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:46:18.817Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:46:18.819Z DEBUG 47646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@366d7033]
2025-11-04T12:46:18.820Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:46:18.821Z  INFO 47646 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:46:18.822Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:46:18.822Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:18.823Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:18.824Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:19.350Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:19.351Z DEBUG 47646 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:19.353Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:19.354Z  INFO 47646 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:19.357Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:46:19.365Z  INFO 47646 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: e1d6df50-c278-40d4-b189-dd8545a3fd11
2025-11-04T12:46:19.369Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:19.369Z DEBUG 47646 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@36e115e7]
2025-11-04T12:46:19.375Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:46:19.377Z DEBUG 47646 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-04T12:46:19.383Z  WARN 47646 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-04T12:46:19.392Z  INFO 47646 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:46:19.395Z  INFO 47646 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-04T12:46:19.397Z  INFO 47646 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:46:19.408Z  INFO 47646 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 47646 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:46:19.409Z  INFO 47646 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:46:19.409Z DEBUG 47646 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@186deb87
2025-11-04T12:46:19.488Z  INFO 47646 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:46:19.492Z  INFO 47646 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T12:46:19.533Z  INFO 47646 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:46:19.534Z  INFO 47646 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:46:19.538Z  INFO 47646 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:46:19.539Z  INFO 47646 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-04T12:46:19.540Z  INFO 47646 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:46:19.540Z  INFO 47646 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-04T12:46:19.540Z  WARN 47646 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:46:19.541Z  INFO 47646 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:46:19.564Z  INFO 47646 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:46:19.570Z  INFO 47646 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:46:19.608Z  WARN 47646 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:46:19.619Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:46:19.626Z DEBUG 47646 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:46:19.629Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:46:19.632Z DEBUG 47646 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:46:19.652Z  INFO 47646 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:46:19.662Z  INFO 47646 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.265 seconds (process running for 7.843)
2025-11-04T12:46:19.965Z  INFO 47646 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:46:19.968Z  INFO 47646 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:46:19.970Z  INFO 47646 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:46:19.982Z  INFO 47646 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 47646 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:46:19.982Z  INFO 47646 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:46:20.046Z  INFO 47646 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:46:20.051Z  INFO 47646 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-04T12:46:20.223Z  INFO 47646 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-04T12:46:20.237Z  INFO 47646 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-04T12:46:20.237Z  INFO 47646 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-04T12:46:20.267Z  INFO 47646 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-04T12:46:20.267Z  INFO 47646 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 284 ms
2025-11-04T12:46:20.308Z  INFO 47646 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:46:20.309Z  INFO 47646 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:46:20.312Z  INFO 47646 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:46:20.313Z  INFO 47646 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-04T12:46:20.314Z  INFO 47646 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:46:20.314Z  INFO 47646 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-04T12:46:20.314Z  WARN 47646 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:46:20.314Z  INFO 47646 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:46:20.335Z  INFO 47646 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:46:20.339Z  INFO 47646 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:46:20.364Z  WARN 47646 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:46:20.372Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:46:20.382Z DEBUG 47646 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:46:20.385Z DEBUG 47646 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:46:20.388Z DEBUG 47646 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:46:20.400Z  INFO 47646 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:46:20.441Z  INFO 47646 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-04T12:46:20.443Z  INFO 47646 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.473 seconds (process running for 8.624)
2025-11-04T12:46:20.483Z  INFO 47646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:46:21.563Z  INFO 47646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-04T12:46:21.649Z  INFO 47646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-04T12:46:21.705Z  INFO 47646 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-04T12:46:21.706Z  INFO 47646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-04T12:46:21.706Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-04T12:46:21.706Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-04T12:46:21.706Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-04T12:46:21.706Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@74fb3f6b
2025-11-04T12:46:21.706Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@523ec82c
2025-11-04T12:46:21.706Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-04T12:46:21.706Z  INFO 47646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-11-04T12:46:21.710Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:46:21.711Z DEBUG 47646 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:46:21.711Z  INFO 47646 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:21.712Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:21.712Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:22.016Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:22.017Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:22.020Z  INFO 47646 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:22.020Z  INFO 47646 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:22.024Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:46:22.025Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:46:22.036Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:46:22.042Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:46:22.043Z DEBUG 47646 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:46:22.043Z  INFO 47646 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:22.044Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:22.044Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:22.094Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:22.095Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:22.096Z  INFO 47646 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:22.097Z  INFO 47646 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:22.098Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:46:22.098Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:46:22.100Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:46:23.707Z  INFO 47646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-04T12:46:23.725Z  INFO 47646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-04T12:46:23.738Z  INFO 47646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manhã
2025-11-04T12:46:23.753Z  INFO 47646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colchão e mobília velha
2025-11-04T12:46:23.791Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:46:23.792Z DEBUG 47646 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:46:23.794Z DEBUG 47646 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4a4e98a9]
2025-11-04T12:46:23.794Z  INFO 47646 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:46:23.794Z  INFO 47646 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:46:23.795Z  INFO 47646 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:46:23.795Z  INFO 47646 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:23.795Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:23.795Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:23.854Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:23.855Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:23.856Z  INFO 47646 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:23.856Z  INFO 47646 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:23.868Z  INFO 47646 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:46:23.881Z  INFO 47646 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1f1594f4-6cc7-4417-a1da-5f855a79f20b
2025-11-04T12:46:23.892Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:46:23.892Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@54ee1533]
2025-11-04T12:46:23.896Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:46:25.804Z  INFO 47646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-04T12:46:25.818Z  INFO 47646 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-04T12:46:25.819Z  INFO 47646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:46:25.845Z  INFO 47646 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:46:25.846Z  INFO 47646 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:46:25.851Z  INFO 47646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:46:25.890Z DEBUG 47646 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:46:25.890Z DEBUG 47646 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:46:25.892Z DEBUG 47646 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@529cfc66]
2025-11-04T12:46:25.892Z  INFO 47646 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:46:25.892Z  INFO 47646 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:46:25.892Z  INFO 47646 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:46:25.892Z  INFO 47646 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:25.893Z DEBUG 47646 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:25.893Z DEBUG 47646 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:25.943Z DEBUG 47646 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:25.944Z DEBUG 47646 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:25.945Z  INFO 47646 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:25.945Z  INFO 47646 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:25.948Z  INFO 47646 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:46:25.954Z  INFO 47646 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1d4d8270-cc87-4218-9324-51630f640ad7
2025-11-04T12:46:25.956Z DEBUG 47646 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:25.956Z DEBUG 47646 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1d66027e]
2025-11-04T12:46:25.958Z DEBUG 47646 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:46:25.969Z  INFO 47646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 1d4d8270-cc87-4218-9324-51630f640ad7
2025-11-04T12:46:26.295Z  INFO 47646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:46:26.334Z  INFO 47646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:46:26.362Z  INFO 47646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: 1d4d8270-cc87-4218-9324-51630f640ad7
2025-11-04T12:46:26.418Z DEBUG 47646 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/1d4d8270-cc87-4218-9324-51630f640ad7", parameters={}
2025-11-04T12:46:26.419Z DEBUG 47646 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:46:26.421Z  INFO 47646 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T12:46:26.421Z  INFO 47646 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 1d4d8270-cc87-4218-9324-51630f640ad7
2025-11-04T12:46:26.426Z DEBUG 47646 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:46:26.426Z DEBUG 47646 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@281e4637]
2025-11-04T12:46:26.429Z DEBUG 47646 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:46:27.923Z  INFO 47646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:46:27.932Z  INFO 47646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-04T12:46:27.945Z  INFO 47646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: 1d4d8270-cc87-4218-9324-51630f640ad7
2025-11-04T12:46:27.946Z  INFO 47646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:46:27.961Z  INFO 47646 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:46:27.962Z  INFO 47646 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:46:27.971Z  INFO 47646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:46:28.004Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:46:28.004Z DEBUG 47646 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:46:28.005Z DEBUG 47646 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5554aa73]
2025-11-04T12:46:28.005Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:46:28.005Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:46:28.005Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:46:28.005Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:28.006Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:28.006Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:28.055Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:28.056Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:28.057Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:28.057Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:28.060Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:46:28.067Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1c6a0a57-e6e7-4957-8de0-7117657a0f83
2025-11-04T12:46:28.069Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:28.069Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2b7e0f72]
2025-11-04T12:46:28.070Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:46:28.073Z  INFO 47646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 1c6a0a57-e6e7-4957-8de0-7117657a0f83
2025-11-04T12:46:28.164Z  INFO 47646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:46:28.200Z  INFO 47646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:46:28.226Z  INFO 47646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-04T12:46:28.287Z DEBUG 47646 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-04T12:46:28.288Z DEBUG 47646 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:46:28.288Z  INFO 47646 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T12:46:28.288Z  INFO 47646 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-04T12:46:28.291Z ERROR 47646 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-04T12:46:28.291Z DEBUG 47646 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:46:28.291Z DEBUG 47646 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:46:28.291Z DEBUG 47646 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-04T12:46:29.790Z  INFO 47646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:46:29.799Z  INFO 47646 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-04T12:46:29.800Z  INFO 47646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:46:29.819Z  INFO 47646 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:46:29.820Z  INFO 47646 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:46:29.830Z  INFO 47646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:46:29.861Z DEBUG 47646 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:46:29.862Z DEBUG 47646 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:46:29.863Z DEBUG 47646 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@525cc224]
2025-11-04T12:46:29.863Z  INFO 47646 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:46:29.863Z  INFO 47646 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:46:29.864Z  INFO 47646 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:46:29.864Z  INFO 47646 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:29.864Z DEBUG 47646 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:29.865Z DEBUG 47646 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:29.914Z DEBUG 47646 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:29.915Z DEBUG 47646 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:29.916Z  INFO 47646 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:29.916Z  INFO 47646 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:29.919Z  INFO 47646 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:46:29.925Z  INFO 47646 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c887e4a7-20f6-414d-8a4c-46fa0b63f0e7
2025-11-04T12:46:29.927Z DEBUG 47646 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:29.927Z DEBUG 47646 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2cf1f0ac]
2025-11-04T12:46:29.929Z DEBUG 47646 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:46:29.931Z  INFO 47646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:46:29.935Z DEBUG 47646 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:46:29.936Z DEBUG 47646 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:46:29.938Z DEBUG 47646 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@46955ae9]
2025-11-04T12:46:29.938Z  INFO 47646 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:46:29.938Z  INFO 47646 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:46:29.938Z  INFO 47646 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:46:29.938Z  INFO 47646 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:29.939Z DEBUG 47646 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:29.939Z DEBUG 47646 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:29.988Z DEBUG 47646 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:29.988Z DEBUG 47646 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:29.989Z  INFO 47646 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:29.990Z  INFO 47646 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:29.992Z  INFO 47646 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:46:29.994Z  INFO 47646 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 6527f82a-d770-4d96-be83-83bf67869864
2025-11-04T12:46:29.995Z DEBUG 47646 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:29.995Z DEBUG 47646 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@96fa670]
2025-11-04T12:46:29.996Z DEBUG 47646 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:46:29.997Z  INFO 47646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:46:30.111Z  INFO 47646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:46:30.177Z  INFO 47646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:46:30.182Z DEBUG 47646 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:46:30.182Z DEBUG 47646 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:46:30.182Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:46:30.182Z DEBUG 47646 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:46:30.182Z  INFO 47646 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:30.183Z DEBUG 47646 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:30.183Z DEBUG 47646 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:30.183Z  INFO 47646 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:46:30.183Z  INFO 47646 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:46:30.191Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:46:30.191Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:46:30.197Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:46:30.199Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:46:30.199Z DEBUG 47646 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:46:30.200Z  INFO 47646 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:46:30.200Z  INFO 47646 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:46:30.202Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:46:30.202Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:46:30.205Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:46:30.230Z DEBUG 47646 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:30.231Z DEBUG 47646 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:30.231Z  INFO 47646 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:30.231Z  INFO 47646 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:30.232Z DEBUG 47646 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:46:30.232Z DEBUG 47646 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:46:30.233Z DEBUG 47646 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:46:30.236Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:46:30.236Z DEBUG 47646 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:46:30.237Z  INFO 47646 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:30.238Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:30.238Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:30.287Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:30.287Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:30.288Z  INFO 47646 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:30.289Z  INFO 47646 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:30.289Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:46:30.290Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:46:30.292Z DEBUG 47646 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:46:32.232Z  INFO 47646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-04T12:46:32.287Z DEBUG 47646 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-04T12:46:32.287Z DEBUG 47646 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:46:32.288Z  INFO 47646 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:46:32.288Z  INFO 47646 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-04T12:46:32.293Z DEBUG 47646 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:46:32.293Z DEBUG 47646 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:46:32.296Z DEBUG 47646 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:46:33.825Z  INFO 47646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:46:33.832Z  INFO 47646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-04T12:46:33.833Z  INFO 47646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:46:33.844Z  INFO 47646 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:46:33.845Z  INFO 47646 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:46:33.850Z  INFO 47646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:46:33.874Z DEBUG 47646 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:46:33.875Z DEBUG 47646 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:46:33.876Z DEBUG 47646 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1138f2df]
2025-11-04T12:46:33.876Z  INFO 47646 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:46:33.876Z  INFO 47646 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:46:33.876Z  INFO 47646 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:46:33.876Z  INFO 47646 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:33.876Z DEBUG 47646 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:33.876Z DEBUG 47646 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:33.924Z DEBUG 47646 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:33.925Z DEBUG 47646 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:33.925Z  INFO 47646 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:33.926Z  INFO 47646 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:33.929Z  INFO 47646 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:46:33.934Z  INFO 47646 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 9600759a-8b7b-46de-9821-5ec857c336d9
2025-11-04T12:46:33.936Z DEBUG 47646 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:33.936Z DEBUG 47646 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6cfeba1b]
2025-11-04T12:46:33.937Z DEBUG 47646 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:46:33.939Z  INFO 47646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:46:33.942Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:46:33.942Z DEBUG 47646 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:46:33.944Z DEBUG 47646 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1e41f431]
2025-11-04T12:46:33.944Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:46:33.944Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:46:33.944Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:46:33.944Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:33.945Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:33.945Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:33.993Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:33.994Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:33.994Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:33.994Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:33.997Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:46:34.002Z  INFO 47646 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0c067e28-4beb-4ea0-836f-ce55e3b35888
2025-11-04T12:46:34.003Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:46:34.004Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4a106066]
2025-11-04T12:46:34.006Z DEBUG 47646 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:46:34.008Z  INFO 47646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:46:34.320Z  INFO 47646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:46:34.384Z  INFO 47646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:46:34.390Z DEBUG 47646 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:46:34.390Z DEBUG 47646 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:46:34.390Z DEBUG 47646 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:46:34.391Z  INFO 47646 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:34.391Z DEBUG 47646 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:46:34.391Z DEBUG 47646 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:34.391Z DEBUG 47646 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:34.391Z  INFO 47646 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:46:34.391Z  INFO 47646 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:46:34.395Z DEBUG 47646 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:46:34.395Z DEBUG 47646 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:46:34.401Z  INFO 47646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-04T12:46:34.401Z DEBUG 47646 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:46:34.405Z DEBUG 47646 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:46:34.406Z DEBUG 47646 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:46:34.406Z  INFO 47646 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:46:34.406Z  INFO 47646 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:46:34.410Z DEBUG 47646 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:46:34.410Z DEBUG 47646 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:46:34.415Z DEBUG 47646 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:46:34.437Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-04T12:46:34.437Z DEBUG 47646 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:46:34.438Z DEBUG 47646 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:34.439Z DEBUG 47646 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:34.439Z  INFO 47646 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:46:34.439Z  INFO 47646 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-04T12:46:34.439Z  INFO 47646 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:34.439Z  INFO 47646 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:34.440Z DEBUG 47646 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:46:34.440Z DEBUG 47646 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:46:34.440Z DEBUG 47646 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:46:34.443Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:46:34.444Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:46:34.444Z DEBUG 47646 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:46:34.444Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:46:34.444Z  INFO 47646 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:46:34.444Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:46:34.445Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:46:34.448Z DEBUG 47646 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:46:34.492Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:46:34.493Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:46:34.493Z  INFO 47646 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:46:34.493Z  INFO 47646 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:46:34.494Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:46:34.494Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:46:34.496Z DEBUG 47646 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:46:35.940Z  INFO 47646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:46:35.950Z  INFO 47646 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-04T12:46:35.950Z  INFO 47646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:46:35.962Z  INFO 47646 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-04T12:46:36.009Z DEBUG 47646 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@544733a4, started on Tue Nov 04 12:46:14 WET 2025
2025-11-04T12:46:36.012Z  INFO 47646 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:46:36.088Z  INFO 47646 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-04T12:46:36.089Z  INFO 47646 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-04T12:46:36.090Z DEBUG 47646 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@186deb87, started on Tue Nov 04 12:46:19 WET 2025
2025-11-04T12:46:36.091Z  INFO 47646 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:46:36.091Z  INFO 47646 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-04T12:46:36.092Z  INFO 47646 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-04T12:46:36.093Z  INFO 47646 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-04T12:46:36.094Z  INFO 47646 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-04T12:46:36.096Z  INFO 47646 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:46:36.097Z  INFO 47646 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-04T12:46:36.098Z  INFO 47646 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-04T12:57:20.726Z  INFO 53002 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 53002 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:57:20.727Z  INFO 53002 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:57:20.739Z DEBUG 53002 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@544733a4
2025-11-04T12:57:21.243Z  INFO 53002 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:57:21.285Z  INFO 53002 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2025-11-04T12:57:21.637Z  INFO 53002 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:57:21.678Z  INFO 53002 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-04T12:57:21.700Z  INFO 53002 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:57:21.785Z  INFO 53002 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:57:21.807Z  INFO 53002 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-04T12:57:22.023Z  INFO 53002 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:57:22.028Z  INFO 53002 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-04T12:57:22.056Z  WARN 53002 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:57:22.076Z  INFO 53002 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:57:22.770Z  INFO 53002 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:57:22.813Z  INFO 53002 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:57:22.996Z  INFO 53002 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-04T12:57:23.510Z  WARN 53002 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:57:23.571Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:57:23.623Z DEBUG 53002 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:57:23.641Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:57:23.681Z DEBUG 53002 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:57:23.759Z  INFO 53002 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:57:23.801Z  INFO 53002 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T12:57:23.801Z  INFO 53002 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T12:57:23.801Z  INFO 53002 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-04T12:57:23.819Z  INFO 53002 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 3.4 seconds (process running for 5.634)
2025-11-04T12:57:23.854Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:57:23.900Z DEBUG 53002 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@11252b76]
2025-11-04T12:57:23.904Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:57:23.904Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:57:23.909Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:57:23.909Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:23.968Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:23.974Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:24.418Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:24.426Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:24.437Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:24.438Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:24.543Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:57:24.591Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 04b4ff39-c7de-4436-bed8-6bbffed89c31
2025-11-04T12:57:24.624Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:24.625Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4b7f66b3]
2025-11-04T12:57:24.643Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:57:24.644Z DEBUG 53002 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2ea1f31b]
2025-11-04T12:57:24.644Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:57:24.644Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:57:24.644Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:57:24.644Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:24.645Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:24.645Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:24.697Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:24.698Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:24.698Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:24.698Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:24.700Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:57:24.702Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 245fdafa-030a-465d-aad5-e6a219478a53
2025-11-04T12:57:24.703Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:24.703Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5149d43e]
2025-11-04T12:57:24.704Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:57:24.705Z DEBUG 53002 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5cf93ce8]
2025-11-04T12:57:24.705Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:57:24.705Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:57:24.706Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:57:24.706Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:24.706Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:24.706Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:24.758Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:24.759Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:24.759Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:24.759Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:24.760Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:57:24.762Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ebe866e9-a413-489f-b7bf-7f2d15029539
2025-11-04T12:57:24.763Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:24.763Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@ab76053]
2025-11-04T12:57:24.764Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:57:24.770Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:57:24.770Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-04T12:57:24.801Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:24.802Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:57:24.856Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:57:24.857Z DEBUG 53002 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@683a26f9]
2025-11-04T12:57:24.857Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:57:24.857Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:57:24.858Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:57:24.858Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:24.858Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:24.858Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:24.910Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:24.911Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:24.911Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:24.912Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:24.913Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:57:24.915Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 3b4304f1-00d9-4cbb-8015-6209f015d461
2025-11-04T12:57:24.916Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:24.916Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4fb5f99e]
2025-11-04T12:57:24.925Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:57:24.926Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T12:57:24.926Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-04T12:57:24.928Z ERROR 53002 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-04T12:57:24.929Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:24.929Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:57:24.935Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:57:24.936Z DEBUG 53002 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5451c2bd]
2025-11-04T12:57:24.936Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:57:24.936Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:57:24.936Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:57:24.936Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:24.937Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:24.937Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:24.989Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:24.990Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:24.991Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:24.992Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:24.995Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:57:25.001Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 3e97857a-602b-4ee1-b131-dcc50f986f5a
2025-11-04T12:57:25.003Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:25.004Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2df2d95]
2025-11-04T12:57:25.006Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:57:25.009Z DEBUG 53002 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-04T12:57:25.009Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-04T12:57:25.010Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: 3e97857a-602b-4ee1-b131-dcc50f986f5a, newStatus: IN_PROGRESS
2025-11-04T12:57:25.010Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 3e97857a-602b-4ee1-b131-dcc50f986f5a
2025-11-04T12:57:25.016Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-04T12:57:25.025Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:25.025Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@32f8b79b]
2025-11-04T12:57:25.035Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:57:25.036Z DEBUG 53002 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@b61a0cd]
2025-11-04T12:57:25.036Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:57:25.036Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:57:25.037Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:57:25.037Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:25.037Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:25.037Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:25.090Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:25.091Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:25.092Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:25.092Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:25.095Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:57:25.102Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: abdf348e-66e0-467e-b942-6bd213a31a18
2025-11-04T12:57:25.103Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:25.104Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1a3818e3]
2025-11-04T12:57:25.105Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:57:25.106Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T12:57:25.106Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: abdf348e-66e0-467e-b942-6bd213a31a18
2025-11-04T12:57:25.109Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:25.109Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@17446dab]
2025-11-04T12:57:25.118Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:57:25.119Z DEBUG 53002 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@247cc879]
2025-11-04T12:57:25.119Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:57:25.119Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:57:25.120Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:57:25.120Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:25.120Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:25.120Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:25.174Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:25.175Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:25.176Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:25.177Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:25.177Z  WARN 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-04T12:57:25.180Z ERROR 53002 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-04T12:57:25.181Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:25.182Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:57:25.194Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:57:25.196Z DEBUG 53002 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4ff33674]
2025-11-04T12:57:25.197Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:57:25.197Z  INFO 53002 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:57:25.198Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:57:25.198Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:25.199Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:25.200Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:25.253Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:25.254Z DEBUG 53002 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:25.255Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:25.256Z  INFO 53002 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:25.259Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:57:25.265Z  INFO 53002 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c0892751-a088-4b7d-b816-8921d7e35c2a
2025-11-04T12:57:25.266Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:25.266Z DEBUG 53002 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5d73530f]
2025-11-04T12:57:25.268Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T12:57:25.269Z DEBUG 53002 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-04T12:57:25.272Z  WARN 53002 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-04T12:57:25.280Z  INFO 53002 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:57:25.284Z  INFO 53002 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-04T12:57:25.287Z  INFO 53002 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:57:25.297Z  INFO 53002 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 53002 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:57:25.297Z  INFO 53002 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:57:25.298Z DEBUG 53002 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@36a407c1
2025-11-04T12:57:25.361Z  INFO 53002 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:57:25.366Z  INFO 53002 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T12:57:25.407Z  INFO 53002 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:57:25.408Z  INFO 53002 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:57:25.412Z  INFO 53002 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:57:25.413Z  INFO 53002 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-04T12:57:25.414Z  INFO 53002 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:57:25.414Z  INFO 53002 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-04T12:57:25.414Z  WARN 53002 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:57:25.414Z  INFO 53002 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:57:25.439Z  INFO 53002 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:57:25.444Z  INFO 53002 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:57:25.485Z  WARN 53002 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:57:25.496Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:57:25.503Z DEBUG 53002 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:57:25.506Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:57:25.510Z DEBUG 53002 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:57:25.528Z  INFO 53002 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:57:25.538Z  INFO 53002 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.251 seconds (process running for 7.353)
2025-11-04T12:57:25.826Z  INFO 53002 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:57:25.829Z  INFO 53002 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:57:25.830Z  INFO 53002 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T12:57:25.842Z  INFO 53002 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 53002 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T12:57:25.842Z  INFO 53002 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-04T12:57:25.899Z  INFO 53002 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T12:57:25.904Z  INFO 53002 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-04T12:57:26.040Z  INFO 53002 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-04T12:57:26.053Z  INFO 53002 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-04T12:57:26.053Z  INFO 53002 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-04T12:57:26.082Z  INFO 53002 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-04T12:57:26.083Z  INFO 53002 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 240 ms
2025-11-04T12:57:26.121Z  INFO 53002 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T12:57:26.123Z  INFO 53002 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T12:57:26.130Z  INFO 53002 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T12:57:26.131Z  INFO 53002 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-04T12:57:26.132Z  INFO 53002 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T12:57:26.132Z  INFO 53002 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-04T12:57:26.133Z  WARN 53002 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T12:57:26.133Z  INFO 53002 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T12:57:26.164Z  INFO 53002 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T12:57:26.169Z  INFO 53002 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:57:26.195Z  WARN 53002 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T12:57:26.203Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T12:57:26.212Z DEBUG 53002 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T12:57:26.215Z DEBUG 53002 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T12:57:26.218Z DEBUG 53002 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T12:57:26.230Z  INFO 53002 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T12:57:26.276Z  INFO 53002 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-04T12:57:26.278Z  INFO 53002 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.448 seconds (process running for 8.093)
2025-11-04T12:57:26.324Z  INFO 53002 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:57:27.319Z  INFO 53002 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-04T12:57:27.414Z  INFO 53002 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-04T12:57:27.466Z  INFO 53002 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-04T12:57:27.466Z  INFO 53002 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-04T12:57:27.467Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-04T12:57:27.467Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-04T12:57:27.467Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-04T12:57:27.467Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7de6dcf2
2025-11-04T12:57:27.467Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@433fe5c7
2025-11-04T12:57:27.467Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-04T12:57:27.467Z  INFO 53002 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-11-04T12:57:27.470Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:57:27.471Z DEBUG 53002 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:57:27.472Z  INFO 53002 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:27.472Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:27.473Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:27.525Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:27.526Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:27.528Z  INFO 53002 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:27.528Z  INFO 53002 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:27.531Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:57:27.531Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:57:27.535Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:57:27.543Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:57:27.544Z DEBUG 53002 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:57:27.546Z  INFO 53002 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:27.547Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:27.547Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:27.600Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:27.601Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:27.602Z  INFO 53002 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:27.602Z  INFO 53002 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:27.602Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:57:27.602Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:57:27.603Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:57:29.467Z  INFO 53002 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-04T12:57:29.486Z  INFO 53002 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-04T12:57:29.499Z  INFO 53002 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manhã
2025-11-04T12:57:29.513Z  INFO 53002 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colchão e mobília velha
2025-11-04T12:57:29.547Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:57:29.547Z DEBUG 53002 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:57:29.549Z DEBUG 53002 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@48d5948a]
2025-11-04T12:57:29.550Z  INFO 53002 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:57:29.550Z  INFO 53002 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:57:29.550Z  INFO 53002 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:57:29.550Z  INFO 53002 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:29.550Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:29.550Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:29.604Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:29.605Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:29.606Z  INFO 53002 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:29.606Z  INFO 53002 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:29.610Z  INFO 53002 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:57:29.613Z  INFO 53002 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: b2ed8453-ba8c-491c-9056-ddd2a60b1c6b
2025-11-04T12:57:29.617Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:57:29.617Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@605c07e5]
2025-11-04T12:57:29.620Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:57:31.559Z  INFO 53002 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-04T12:57:31.571Z  INFO 53002 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-04T12:57:31.572Z  INFO 53002 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:57:31.603Z  INFO 53002 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:57:31.604Z  INFO 53002 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:57:31.613Z  INFO 53002 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:57:31.652Z DEBUG 53002 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:57:31.653Z DEBUG 53002 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:57:31.654Z DEBUG 53002 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@46955ae9]
2025-11-04T12:57:31.654Z  INFO 53002 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:57:31.654Z  INFO 53002 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:57:31.654Z  INFO 53002 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:57:31.654Z  INFO 53002 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:31.654Z DEBUG 53002 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:31.654Z DEBUG 53002 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:31.708Z DEBUG 53002 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:31.708Z DEBUG 53002 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:31.709Z  INFO 53002 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:31.710Z  INFO 53002 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:31.713Z  INFO 53002 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:57:31.719Z  INFO 53002 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 6ec43ff5-25b5-415c-bb6d-314b0217c2dc
2025-11-04T12:57:31.721Z DEBUG 53002 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:31.721Z DEBUG 53002 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@96fa670]
2025-11-04T12:57:31.722Z DEBUG 53002 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:57:31.733Z  INFO 53002 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 6ec43ff5-25b5-415c-bb6d-314b0217c2dc
2025-11-04T12:57:31.829Z  INFO 53002 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:57:31.870Z  INFO 53002 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:57:31.898Z  INFO 53002 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: 6ec43ff5-25b5-415c-bb6d-314b0217c2dc
2025-11-04T12:57:31.932Z DEBUG 53002 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/6ec43ff5-25b5-415c-bb6d-314b0217c2dc", parameters={}
2025-11-04T12:57:31.933Z DEBUG 53002 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:57:31.934Z  INFO 53002 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T12:57:31.934Z  INFO 53002 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 6ec43ff5-25b5-415c-bb6d-314b0217c2dc
2025-11-04T12:57:31.938Z DEBUG 53002 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:57:31.939Z DEBUG 53002 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4ead1dfa]
2025-11-04T12:57:31.941Z DEBUG 53002 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:57:33.435Z  INFO 53002 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:57:33.444Z  INFO 53002 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-04T12:57:33.457Z  INFO 53002 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: 6ec43ff5-25b5-415c-bb6d-314b0217c2dc
2025-11-04T12:57:33.459Z  INFO 53002 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:57:33.476Z  INFO 53002 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:57:33.477Z  INFO 53002 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:57:33.499Z  INFO 53002 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:57:33.532Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:57:33.532Z DEBUG 53002 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:57:33.533Z DEBUG 53002 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@781938ba]
2025-11-04T12:57:33.533Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:57:33.533Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:57:33.533Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:57:33.533Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:33.533Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:33.533Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:33.587Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:33.588Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:33.590Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:33.590Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:33.593Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:57:33.598Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 53a1a738-050d-4129-ad27-2d13c7523970
2025-11-04T12:57:33.600Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:33.600Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@69e60c5]
2025-11-04T12:57:33.601Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:57:33.604Z  INFO 53002 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 53a1a738-050d-4129-ad27-2d13c7523970
2025-11-04T12:57:33.724Z  INFO 53002 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T12:57:33.769Z  INFO 53002 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T12:57:33.794Z  INFO 53002 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-04T12:57:33.833Z DEBUG 53002 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-04T12:57:33.834Z DEBUG 53002 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T12:57:33.834Z  INFO 53002 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T12:57:33.834Z  INFO 53002 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-04T12:57:33.837Z ERROR 53002 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-04T12:57:33.837Z DEBUG 53002 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:57:33.837Z DEBUG 53002 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T12:57:33.838Z DEBUG 53002 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-04T12:57:35.335Z  INFO 53002 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T12:57:35.346Z  INFO 53002 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-04T12:57:35.348Z  INFO 53002 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:57:35.365Z  INFO 53002 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:57:35.366Z  INFO 53002 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:57:35.376Z  INFO 53002 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:57:35.410Z DEBUG 53002 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:57:35.410Z DEBUG 53002 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:57:35.411Z DEBUG 53002 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@866085a]
2025-11-04T12:57:35.412Z  INFO 53002 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:57:35.412Z  INFO 53002 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:57:35.412Z  INFO 53002 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:57:35.412Z  INFO 53002 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:35.412Z DEBUG 53002 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:35.413Z DEBUG 53002 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:35.466Z DEBUG 53002 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:35.466Z DEBUG 53002 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:35.467Z  INFO 53002 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:35.467Z  INFO 53002 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:35.470Z  INFO 53002 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:57:35.476Z  INFO 53002 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1ad4451e-2169-4a11-ad87-06106feb8b39
2025-11-04T12:57:35.478Z DEBUG 53002 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:35.478Z DEBUG 53002 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7611d97d]
2025-11-04T12:57:35.480Z DEBUG 53002 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:57:35.484Z  INFO 53002 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:57:35.492Z DEBUG 53002 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:57:35.492Z DEBUG 53002 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:57:35.494Z DEBUG 53002 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@43245233]
2025-11-04T12:57:35.494Z  INFO 53002 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:57:35.494Z  INFO 53002 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:57:35.494Z  INFO 53002 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:57:35.494Z  INFO 53002 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:35.495Z DEBUG 53002 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:35.495Z DEBUG 53002 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:35.548Z DEBUG 53002 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:35.549Z DEBUG 53002 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:35.551Z  INFO 53002 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:35.551Z  INFO 53002 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:35.556Z  INFO 53002 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:57:35.564Z  INFO 53002 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 7cc07464-a36a-4196-b2be-acd5222dba53
2025-11-04T12:57:35.567Z DEBUG 53002 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:35.567Z DEBUG 53002 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@cdebe1c]
2025-11-04T12:57:35.568Z DEBUG 53002 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:57:35.569Z  INFO 53002 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:57:35.650Z  INFO 53002 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:57:35.729Z  INFO 53002 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:57:35.734Z DEBUG 53002 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:57:35.734Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:57:35.734Z DEBUG 53002 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:57:35.734Z DEBUG 53002 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:57:35.735Z  INFO 53002 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:35.735Z  INFO 53002 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:57:35.735Z DEBUG 53002 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:35.735Z  INFO 53002 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:57:35.735Z DEBUG 53002 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:35.742Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:57:35.742Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:57:35.749Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:57:35.751Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:57:35.751Z DEBUG 53002 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:57:35.751Z  INFO 53002 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:57:35.751Z  INFO 53002 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:57:35.754Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:57:35.754Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:57:35.757Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:57:35.788Z DEBUG 53002 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:35.788Z DEBUG 53002 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:35.789Z  INFO 53002 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:35.789Z  INFO 53002 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:35.790Z DEBUG 53002 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:57:35.790Z DEBUG 53002 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:57:35.792Z DEBUG 53002 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:57:35.800Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:57:35.801Z DEBUG 53002 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:57:35.802Z  INFO 53002 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:35.803Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:35.803Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:35.856Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:35.857Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:35.858Z  INFO 53002 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:35.859Z  INFO 53002 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:35.860Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:57:35.860Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:57:35.862Z DEBUG 53002 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:57:37.786Z  INFO 53002 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-04T12:57:37.841Z DEBUG 53002 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-04T12:57:37.841Z DEBUG 53002 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:57:37.842Z  INFO 53002 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:57:37.842Z  INFO 53002 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-04T12:57:37.845Z DEBUG 53002 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:57:37.846Z DEBUG 53002 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:57:37.848Z DEBUG 53002 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:57:39.366Z  INFO 53002 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:57:39.374Z  INFO 53002 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-04T12:57:39.375Z  INFO 53002 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:57:39.382Z  INFO 53002 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T12:57:39.382Z  INFO 53002 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T12:57:39.385Z  INFO 53002 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T12:57:39.407Z DEBUG 53002 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:57:39.407Z DEBUG 53002 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:57:39.408Z DEBUG 53002 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@60952915]
2025-11-04T12:57:39.408Z  INFO 53002 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:57:39.408Z  INFO 53002 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:57:39.409Z  INFO 53002 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:57:39.409Z  INFO 53002 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:39.409Z DEBUG 53002 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:39.409Z DEBUG 53002 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:39.460Z DEBUG 53002 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:39.460Z DEBUG 53002 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:39.461Z  INFO 53002 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:39.462Z  INFO 53002 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:39.464Z  INFO 53002 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:57:39.467Z  INFO 53002 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 24e08347-7418-4d69-9b53-cc86ba640ed3
2025-11-04T12:57:39.467Z DEBUG 53002 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:39.467Z DEBUG 53002 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7868ab3c]
2025-11-04T12:57:39.468Z DEBUG 53002 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:57:39.471Z  INFO 53002 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T12:57:39.475Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T12:57:39.475Z DEBUG 53002 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T12:57:39.477Z DEBUG 53002 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3dfa1c5]
2025-11-04T12:57:39.477Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T12:57:39.477Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T12:57:39.477Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T12:57:39.477Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:39.478Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:39.478Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:39.530Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:39.531Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:39.532Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:39.532Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:39.535Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T12:57:39.542Z  INFO 53002 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 77748fce-6de7-432a-a61a-49789e43ffe6
2025-11-04T12:57:39.545Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T12:57:39.545Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2c12c56c]
2025-11-04T12:57:39.547Z DEBUG 53002 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T12:57:39.550Z  INFO 53002 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T12:57:39.671Z  INFO 53002 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T12:57:39.735Z  INFO 53002 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T12:57:39.739Z DEBUG 53002 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:57:39.740Z DEBUG 53002 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:57:39.740Z DEBUG 53002 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:57:39.740Z DEBUG 53002 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:57:39.740Z  INFO 53002 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:39.740Z  INFO 53002 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:57:39.740Z  INFO 53002 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:57:39.740Z DEBUG 53002 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:39.741Z DEBUG 53002 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:39.743Z DEBUG 53002 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:57:39.743Z DEBUG 53002 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:57:39.747Z DEBUG 53002 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:57:39.749Z DEBUG 53002 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T12:57:39.749Z DEBUG 53002 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:57:39.750Z  INFO 53002 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:57:39.750Z  INFO 53002 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T12:57:39.753Z DEBUG 53002 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:57:39.753Z DEBUG 53002 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:57:39.757Z DEBUG 53002 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:57:39.764Z  INFO 53002 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-04T12:57:39.792Z DEBUG 53002 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:39.792Z DEBUG 53002 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:39.793Z  INFO 53002 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:39.794Z  INFO 53002 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:39.795Z DEBUG 53002 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:57:39.795Z DEBUG 53002 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:57:39.797Z DEBUG 53002 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:57:39.802Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T12:57:39.802Z DEBUG 53002 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T12:57:39.803Z  INFO 53002 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T12:57:39.804Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T12:57:39.804Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T12:57:39.833Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-04T12:57:39.833Z DEBUG 53002 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T12:57:39.834Z  INFO 53002 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T12:57:39.834Z  INFO 53002 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-04T12:57:39.838Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:57:39.838Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T12:57:39.841Z DEBUG 53002 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:57:39.855Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T12:57:39.856Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T12:57:39.856Z  INFO 53002 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T12:57:39.856Z  INFO 53002 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T12:57:39.856Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T12:57:39.856Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T12:57:39.857Z DEBUG 53002 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T12:57:41.360Z  INFO 53002 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T12:57:41.376Z  INFO 53002 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-04T12:57:41.377Z  INFO 53002 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T12:57:41.385Z  INFO 53002 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-04T12:57:41.437Z DEBUG 53002 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@544733a4, started on Tue Nov 04 12:57:20 WET 2025
2025-11-04T12:57:41.508Z  INFO 53002 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:57:41.511Z  INFO 53002 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-04T12:57:41.512Z  INFO 53002 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-04T12:57:41.512Z DEBUG 53002 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@36a407c1, started on Tue Nov 04 12:57:25 WET 2025
2025-11-04T12:57:41.513Z  INFO 53002 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:57:41.514Z  INFO 53002 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-04T12:57:41.514Z  INFO 53002 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-04T12:57:41.515Z  INFO 53002 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-04T12:57:41.517Z  INFO 53002 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-04T12:57:41.518Z  INFO 53002 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T12:57:41.519Z  INFO 53002 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-04T12:57:41.520Z  INFO 53002 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-04T13:11:50.151Z  INFO 58788 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 58788 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T13:11:50.152Z  INFO 58788 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-04T13:11:50.166Z DEBUG 58788 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@67afc9b6
2025-11-04T13:11:50.767Z  INFO 58788 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T13:11:50.814Z  INFO 58788 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 38 ms. Found 2 JPA repository interfaces.
2025-11-04T13:11:51.193Z  INFO 58788 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T13:11:51.230Z  INFO 58788 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-04T13:11:51.252Z  INFO 58788 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T13:11:51.340Z  INFO 58788 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T13:11:51.362Z  INFO 58788 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-04T13:11:51.570Z  INFO 58788 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T13:11:51.573Z  INFO 58788 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-04T13:11:51.600Z  WARN 58788 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T13:11:51.619Z  INFO 58788 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T13:11:52.298Z  INFO 58788 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T13:11:52.341Z  INFO 58788 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:11:52.530Z  INFO 58788 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-04T13:11:53.057Z  WARN 58788 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T13:11:53.118Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T13:11:53.166Z DEBUG 58788 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T13:11:53.184Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T13:11:53.219Z DEBUG 58788 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T13:11:53.293Z  INFO 58788 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T13:11:53.335Z  INFO 58788 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T13:11:53.335Z  INFO 58788 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T13:11:53.336Z  INFO 58788 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-04T13:11:53.352Z  INFO 58788 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 3.524 seconds (process running for 5.782)
2025-11-04T13:11:53.387Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:11:53.436Z DEBUG 58788 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2b653f71]
2025-11-04T13:11:53.440Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:11:53.440Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:11:53.445Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:11:53.445Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:11:53.512Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:11:53.518Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:11:53.856Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:11:53.857Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:11:53.862Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:11:53.862Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:11:53.945Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:11:53.988Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 2bd64065-f2c9-4321-a582-244c8c0c8173
2025-11-04T13:11:54.018Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:11:54.019Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4f706528]
2025-11-04T13:11:54.036Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:11:54.036Z DEBUG 58788 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7e9bb983]
2025-11-04T13:11:54.037Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:11:54.037Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:11:54.037Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:11:54.037Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:11:54.037Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:11:54.037Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:11:54.093Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:11:54.094Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:11:54.097Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:11:54.097Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:11:54.098Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:11:54.101Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 181adf12-35c4-4fda-9b4d-60b03604e669
2025-11-04T13:11:54.102Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:11:54.102Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@26a0aa6d]
2025-11-04T13:11:54.104Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:11:54.105Z DEBUG 58788 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5d74e8a0]
2025-11-04T13:11:54.105Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:11:54.105Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:11:54.106Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:11:54.106Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:11:54.106Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:11:54.106Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:11:54.162Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:11:54.162Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:11:54.164Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:11:54.165Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:11:54.168Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:11:54.175Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ebd26a2d-e09d-4dea-9539-8d8c050a113f
2025-11-04T13:11:54.177Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:11:54.177Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7a4154c0]
2025-11-04T13:11:54.180Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:11:54.186Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:11:54.187Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-04T13:11:54.215Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:11:54.215Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:11:54.268Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:11:54.269Z DEBUG 58788 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@74ea8a33]
2025-11-04T13:11:54.269Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:11:54.269Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:11:54.269Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:11:54.269Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:11:54.270Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:11:54.270Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:11:54.325Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:11:54.326Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:11:54.328Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:11:54.328Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:11:54.331Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:11:54.337Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: bc78af3b-97a0-4d48-8e85-8fbc64f1a176
2025-11-04T13:11:54.340Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:11:54.340Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@28bbdc43]
2025-11-04T13:11:54.354Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:11:54.355Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:11:54.355Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-04T13:11:54.359Z ERROR 58788 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-04T13:11:54.360Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:11:54.360Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:11:54.368Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:11:54.369Z DEBUG 58788 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3a8d3643]
2025-11-04T13:11:54.369Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:11:54.369Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:11:54.370Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:11:54.370Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:11:54.370Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:11:54.371Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:11:54.424Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:11:54.425Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:11:54.425Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:11:54.425Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:11:54.426Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:11:54.429Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 20f33c15-eff3-4af3-a609-593cdac8e1e6
2025-11-04T13:11:54.430Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:11:54.430Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5eaa0712]
2025-11-04T13:11:54.432Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T13:11:54.434Z DEBUG 58788 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-04T13:11:54.434Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-04T13:11:54.434Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: 20f33c15-eff3-4af3-a609-593cdac8e1e6, newStatus: IN_PROGRESS
2025-11-04T13:11:54.434Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 20f33c15-eff3-4af3-a609-593cdac8e1e6
2025-11-04T13:11:54.440Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-04T13:11:54.448Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:11:54.448Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3467b97b]
2025-11-04T13:11:54.457Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:11:54.457Z DEBUG 58788 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2ebdeb5a]
2025-11-04T13:11:54.458Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:11:54.458Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:11:54.458Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:11:54.458Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:11:54.458Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:11:54.458Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:11:55.038Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:11:55.039Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:11:55.040Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:11:55.041Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:11:55.042Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:11:55.044Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 13d4a17d-146b-47bd-bb48-4edfabd4c615
2025-11-04T13:11:55.045Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:11:55.045Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4927d70d]
2025-11-04T13:11:55.046Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:11:55.046Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:11:55.046Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 13d4a17d-146b-47bd-bb48-4edfabd4c615
2025-11-04T13:11:55.048Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:11:55.048Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5ef71497]
2025-11-04T13:11:55.056Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:11:55.056Z DEBUG 58788 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@48baaf58]
2025-11-04T13:11:55.057Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:11:55.057Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:11:55.057Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:11:55.057Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:11:55.057Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:11:55.057Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:11:55.112Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:11:55.113Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:11:55.114Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:11:55.114Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:11:55.114Z  WARN 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-04T13:11:55.118Z ERROR 58788 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-04T13:11:55.119Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:11:55.120Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:11:55.131Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:11:55.131Z DEBUG 58788 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2b2b8ac5]
2025-11-04T13:11:55.132Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:11:55.132Z  INFO 58788 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:11:55.132Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:11:55.132Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:11:55.132Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:11:55.133Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:11:55.188Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:11:55.189Z DEBUG 58788 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:11:55.191Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:11:55.191Z  INFO 58788 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:11:55.195Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:11:55.202Z  INFO 58788 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: e58dc58e-daf6-4743-a984-b2f445418190
2025-11-04T13:11:55.204Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:11:55.205Z DEBUG 58788 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1fe2c45c]
2025-11-04T13:11:55.207Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T13:11:55.208Z DEBUG 58788 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-04T13:11:55.211Z  WARN 58788 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-04T13:11:55.219Z  INFO 58788 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:11:55.222Z  INFO 58788 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-04T13:11:55.225Z  INFO 58788 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T13:11:55.235Z  INFO 58788 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 58788 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T13:11:55.236Z  INFO 58788 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T13:11:55.236Z DEBUG 58788 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@1e073bf9
2025-11-04T13:11:55.304Z  INFO 58788 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T13:11:55.309Z  INFO 58788 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T13:11:55.346Z  INFO 58788 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T13:11:55.347Z  INFO 58788 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T13:11:55.351Z  INFO 58788 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T13:11:55.352Z  INFO 58788 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-04T13:11:55.353Z  INFO 58788 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T13:11:55.353Z  INFO 58788 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-04T13:11:55.353Z  WARN 58788 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T13:11:55.353Z  INFO 58788 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T13:11:55.376Z  INFO 58788 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T13:11:55.381Z  INFO 58788 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:11:55.418Z  WARN 58788 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T13:11:55.429Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T13:11:55.437Z DEBUG 58788 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T13:11:55.440Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T13:11:55.443Z DEBUG 58788 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T13:11:55.459Z  INFO 58788 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T13:11:55.469Z  INFO 58788 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.244 seconds (process running for 7.898)
2025-11-04T13:11:55.750Z  INFO 58788 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:11:55.753Z  INFO 58788 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:11:55.755Z  INFO 58788 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T13:11:55.765Z  INFO 58788 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 58788 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T13:11:55.765Z  INFO 58788 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-04T13:11:55.823Z  INFO 58788 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T13:11:55.828Z  INFO 58788 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-04T13:11:55.963Z  INFO 58788 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-04T13:11:55.975Z  INFO 58788 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-04T13:11:55.976Z  INFO 58788 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-04T13:11:56.006Z  INFO 58788 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-04T13:11:56.006Z  INFO 58788 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 240 ms
2025-11-04T13:11:56.045Z  INFO 58788 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T13:11:56.046Z  INFO 58788 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T13:11:56.050Z  INFO 58788 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T13:11:56.050Z  INFO 58788 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-04T13:11:56.051Z  INFO 58788 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T13:11:56.051Z  INFO 58788 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-04T13:11:56.051Z  WARN 58788 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T13:11:56.051Z  INFO 58788 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T13:11:56.071Z  INFO 58788 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T13:11:56.076Z  INFO 58788 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:11:56.106Z  WARN 58788 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T13:11:56.114Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T13:11:56.124Z DEBUG 58788 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T13:11:56.128Z DEBUG 58788 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T13:11:56.131Z DEBUG 58788 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T13:11:56.143Z  INFO 58788 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T13:11:56.188Z  INFO 58788 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-04T13:11:56.190Z  INFO 58788 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.435 seconds (process running for 8.619)
2025-11-04T13:11:56.223Z  INFO 58788 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:11:57.268Z  INFO 58788 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-04T13:11:57.358Z  INFO 58788 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-04T13:11:57.413Z  INFO 58788 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-04T13:11:57.413Z  INFO 58788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-04T13:11:57.413Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-04T13:11:57.413Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-04T13:11:57.414Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-04T13:11:57.414Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3462c9ab
2025-11-04T13:11:57.414Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@20313d10
2025-11-04T13:11:57.414Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-04T13:11:57.414Z  INFO 58788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-04T13:11:57.417Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:11:57.418Z DEBUG 58788 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:11:57.419Z  INFO 58788 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:11:57.419Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:11:57.420Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:11:57.474Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:11:57.475Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:11:57.477Z  INFO 58788 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:11:57.478Z  INFO 58788 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:11:57.481Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:11:57.482Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:11:57.493Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:11:57.500Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:11:57.501Z DEBUG 58788 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:11:57.502Z  INFO 58788 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:11:57.503Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:11:57.503Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:11:57.559Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:11:57.560Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:11:57.561Z  INFO 58788 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:11:57.561Z  INFO 58788 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:11:57.562Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:11:57.563Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:11:57.565Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:11:59.425Z  INFO 58788 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-04T13:11:59.447Z  INFO 58788 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-04T13:11:59.460Z  INFO 58788 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manhã
2025-11-04T13:11:59.476Z  INFO 58788 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colchão e mobília velha
2025-11-04T13:11:59.514Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:11:59.515Z DEBUG 58788 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:11:59.518Z DEBUG 58788 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3947b4d3]
2025-11-04T13:11:59.518Z  INFO 58788 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:11:59.518Z  INFO 58788 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:11:59.519Z  INFO 58788 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:11:59.519Z  INFO 58788 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:11:59.519Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:11:59.519Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:11:59.576Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:11:59.576Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:11:59.577Z  INFO 58788 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:11:59.578Z  INFO 58788 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:11:59.590Z  INFO 58788 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:11:59.595Z  INFO 58788 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c1b6f0dc-2d20-4abc-aafd-f411d513bfe0
2025-11-04T13:11:59.599Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:11:59.600Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7c09f5a7]
2025-11-04T13:11:59.602Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:12:01.529Z  INFO 58788 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-04T13:12:01.536Z  INFO 58788 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-04T13:12:01.536Z  INFO 58788 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:12:01.557Z  INFO 58788 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:12:01.559Z  INFO 58788 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:12:01.569Z  INFO 58788 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:12:01.616Z DEBUG 58788 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:12:01.617Z DEBUG 58788 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:12:01.618Z DEBUG 58788 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3cc9c26b]
2025-11-04T13:12:01.618Z  INFO 58788 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:12:01.618Z  INFO 58788 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:12:01.618Z  INFO 58788 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:12:01.618Z  INFO 58788 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:12:01.619Z DEBUG 58788 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:12:01.619Z DEBUG 58788 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:12:01.675Z DEBUG 58788 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:12:01.676Z DEBUG 58788 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:12:01.677Z  INFO 58788 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:12:01.677Z  INFO 58788 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:12:01.680Z  INFO 58788 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:12:01.687Z  INFO 58788 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d9fb1ee9-b8b7-4f24-b952-c715da3cf3bd
2025-11-04T13:12:01.689Z DEBUG 58788 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:12:01.689Z DEBUG 58788 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@733321b9]
2025-11-04T13:12:01.690Z DEBUG 58788 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:12:01.700Z  INFO 58788 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: d9fb1ee9-b8b7-4f24-b952-c715da3cf3bd
2025-11-04T13:12:02.018Z  INFO 58788 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T13:12:02.053Z  INFO 58788 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T13:12:02.086Z  INFO 58788 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: d9fb1ee9-b8b7-4f24-b952-c715da3cf3bd
2025-11-04T13:12:02.128Z DEBUG 58788 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/d9fb1ee9-b8b7-4f24-b952-c715da3cf3bd", parameters={}
2025-11-04T13:12:02.129Z DEBUG 58788 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:12:02.130Z  INFO 58788 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:12:02.130Z  INFO 58788 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: d9fb1ee9-b8b7-4f24-b952-c715da3cf3bd
2025-11-04T13:12:02.133Z DEBUG 58788 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:12:02.133Z DEBUG 58788 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6c44487b]
2025-11-04T13:12:02.134Z DEBUG 58788 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:12:03.630Z  INFO 58788 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T13:12:03.634Z  INFO 58788 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-04T13:12:03.639Z  INFO 58788 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: d9fb1ee9-b8b7-4f24-b952-c715da3cf3bd
2025-11-04T13:12:03.639Z  INFO 58788 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:12:03.650Z  INFO 58788 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:12:03.651Z  INFO 58788 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:12:03.659Z  INFO 58788 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:12:03.694Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:12:03.694Z DEBUG 58788 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:12:03.695Z DEBUG 58788 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@507e91df]
2025-11-04T13:12:03.695Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:12:03.695Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:12:03.695Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:12:03.695Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:12:03.696Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:12:03.696Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:12:03.749Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:12:03.750Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:12:03.750Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:12:03.750Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:12:03.751Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:12:03.753Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0a0e1afc-a143-42cd-b1fe-3e866097fab0
2025-11-04T13:12:03.754Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:12:03.754Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2e511362]
2025-11-04T13:12:03.755Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:12:03.756Z  INFO 58788 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 0a0e1afc-a143-42cd-b1fe-3e866097fab0
2025-11-04T13:12:03.852Z  INFO 58788 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T13:12:03.891Z  INFO 58788 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T13:12:03.917Z  INFO 58788 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-04T13:12:03.977Z DEBUG 58788 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-04T13:12:03.977Z DEBUG 58788 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:12:03.978Z  INFO 58788 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:12:03.978Z  INFO 58788 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-04T13:12:03.980Z ERROR 58788 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-04T13:12:03.980Z DEBUG 58788 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:12:03.980Z DEBUG 58788 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:12:03.980Z DEBUG 58788 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-04T13:12:05.479Z  INFO 58788 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T13:12:05.489Z  INFO 58788 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-04T13:12:05.490Z  INFO 58788 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:12:05.508Z  INFO 58788 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:12:05.509Z  INFO 58788 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:12:05.518Z  INFO 58788 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:12:05.547Z DEBUG 58788 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:12:05.548Z DEBUG 58788 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:12:05.549Z DEBUG 58788 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2164827d]
2025-11-04T13:12:05.549Z  INFO 58788 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:12:05.549Z  INFO 58788 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:12:05.549Z  INFO 58788 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:12:05.549Z  INFO 58788 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:12:05.550Z DEBUG 58788 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:12:05.550Z DEBUG 58788 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:12:05.604Z DEBUG 58788 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:12:05.605Z DEBUG 58788 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:12:05.607Z  INFO 58788 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:12:05.607Z  INFO 58788 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:12:05.611Z  INFO 58788 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:12:05.620Z  INFO 58788 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 288b429d-d970-4e67-83e4-4fefb2890687
2025-11-04T13:12:05.621Z DEBUG 58788 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:12:05.621Z DEBUG 58788 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5f3a7df2]
2025-11-04T13:12:05.623Z DEBUG 58788 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:12:05.624Z  INFO 58788 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T13:12:05.628Z DEBUG 58788 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:12:05.628Z DEBUG 58788 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:12:05.630Z DEBUG 58788 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@10bc2af]
2025-11-04T13:12:05.630Z  INFO 58788 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:12:05.630Z  INFO 58788 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:12:05.630Z  INFO 58788 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:12:05.630Z  INFO 58788 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:12:05.631Z DEBUG 58788 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:12:05.631Z DEBUG 58788 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:12:05.685Z DEBUG 58788 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:12:05.686Z DEBUG 58788 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:12:05.687Z  INFO 58788 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:12:05.687Z  INFO 58788 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:12:05.690Z  INFO 58788 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:12:05.691Z  INFO 58788 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 5b5cab05-d0a4-4ecd-aa45-8daeff527758
2025-11-04T13:12:05.692Z DEBUG 58788 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:12:05.692Z DEBUG 58788 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4ef126c5]
2025-11-04T13:12:05.693Z DEBUG 58788 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:12:05.694Z  INFO 58788 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T13:12:05.812Z  INFO 58788 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T13:12:05.883Z  INFO 58788 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T13:12:05.889Z DEBUG 58788 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:12:05.889Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:12:05.889Z DEBUG 58788 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:12:05.889Z DEBUG 58788 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:12:05.889Z  INFO 58788 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:12:05.890Z  INFO 58788 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:12:05.890Z DEBUG 58788 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:12:05.890Z  INFO 58788 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:12:05.890Z DEBUG 58788 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:12:05.898Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:12:05.898Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:12:05.903Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:12:05.905Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:12:05.905Z DEBUG 58788 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:12:05.906Z  INFO 58788 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:12:05.906Z  INFO 58788 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:12:05.908Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:12:05.908Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:12:05.912Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:12:05.944Z DEBUG 58788 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:12:05.944Z DEBUG 58788 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:12:05.945Z  INFO 58788 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:12:05.945Z  INFO 58788 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:12:05.946Z DEBUG 58788 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:12:05.946Z DEBUG 58788 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:12:05.947Z DEBUG 58788 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:12:05.951Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:12:05.951Z DEBUG 58788 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:12:05.952Z  INFO 58788 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:12:05.952Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:12:05.952Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:12:06.006Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:12:06.007Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:12:06.008Z  INFO 58788 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:12:06.008Z  INFO 58788 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:12:06.009Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:12:06.009Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:12:06.012Z DEBUG 58788 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:12:07.935Z  INFO 58788 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-04T13:12:07.984Z DEBUG 58788 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-04T13:12:07.984Z DEBUG 58788 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:12:07.985Z  INFO 58788 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:12:07.985Z  INFO 58788 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-04T13:12:07.989Z DEBUG 58788 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:12:07.989Z DEBUG 58788 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:12:07.992Z DEBUG 58788 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:12:09.512Z  INFO 58788 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T13:12:09.518Z  INFO 58788 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-04T13:12:09.518Z  INFO 58788 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:12:09.528Z  INFO 58788 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:12:09.529Z  INFO 58788 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:12:09.537Z  INFO 58788 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:12:09.568Z DEBUG 58788 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:12:09.568Z DEBUG 58788 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:12:09.569Z DEBUG 58788 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@46677ad5]
2025-11-04T13:12:09.569Z  INFO 58788 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:12:09.569Z  INFO 58788 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:12:09.569Z  INFO 58788 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:12:09.569Z  INFO 58788 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:12:09.569Z DEBUG 58788 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:12:09.569Z DEBUG 58788 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:12:09.636Z DEBUG 58788 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:12:09.637Z DEBUG 58788 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:12:09.638Z  INFO 58788 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:12:09.638Z  INFO 58788 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:12:09.641Z  INFO 58788 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:12:09.650Z  INFO 58788 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 7c1748c6-37d9-4524-8f6b-8d4073d76af0
2025-11-04T13:12:09.652Z DEBUG 58788 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:12:09.652Z DEBUG 58788 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@163bbdc6]
2025-11-04T13:12:09.653Z DEBUG 58788 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:12:09.655Z  INFO 58788 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T13:12:09.658Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:12:09.658Z DEBUG 58788 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:12:09.659Z DEBUG 58788 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@577dadb1]
2025-11-04T13:12:09.659Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:12:09.659Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:12:09.659Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:12:09.659Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:12:09.660Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:12:09.660Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:12:09.713Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:12:09.714Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:12:09.715Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:12:09.715Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:12:09.718Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:12:09.725Z  INFO 58788 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d32e05bc-2ad4-4862-a12e-46010e727bec
2025-11-04T13:12:09.728Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:12:09.728Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@27dccb96]
2025-11-04T13:12:09.730Z DEBUG 58788 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:12:09.733Z  INFO 58788 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T13:12:09.839Z  INFO 58788 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T13:12:09.906Z  INFO 58788 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T13:12:09.910Z DEBUG 58788 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:12:09.911Z DEBUG 58788 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:12:09.911Z DEBUG 58788 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:12:09.911Z  INFO 58788 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:12:09.911Z DEBUG 58788 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:12:09.911Z DEBUG 58788 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:12:09.911Z DEBUG 58788 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:12:09.912Z  INFO 58788 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:12:09.912Z  INFO 58788 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:12:09.914Z DEBUG 58788 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:12:09.914Z DEBUG 58788 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:12:09.918Z DEBUG 58788 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:12:09.919Z  INFO 58788 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-04T13:12:09.921Z DEBUG 58788 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:12:09.922Z DEBUG 58788 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:12:09.923Z  INFO 58788 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:12:09.923Z  INFO 58788 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:12:09.929Z DEBUG 58788 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:12:09.929Z DEBUG 58788 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:12:09.932Z DEBUG 58788 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:12:09.961Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-04T13:12:09.962Z DEBUG 58788 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:12:09.963Z  INFO 58788 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:12:09.963Z  INFO 58788 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-04T13:12:09.964Z DEBUG 58788 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:12:09.964Z DEBUG 58788 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:12:09.965Z  INFO 58788 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:12:09.965Z  INFO 58788 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:12:09.965Z DEBUG 58788 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:12:09.966Z DEBUG 58788 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:12:09.968Z DEBUG 58788 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:12:09.974Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:12:09.974Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:12:09.974Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:12:09.975Z DEBUG 58788 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:12:09.975Z  INFO 58788 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:12:09.976Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:12:09.977Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:12:09.981Z DEBUG 58788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:12:10.030Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:12:10.031Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:12:10.031Z  INFO 58788 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:12:10.031Z  INFO 58788 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:12:10.032Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:12:10.032Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:12:10.033Z DEBUG 58788 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:12:11.465Z  INFO 58788 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T13:12:11.483Z  INFO 58788 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-04T13:12:11.484Z  INFO 58788 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:12:11.502Z  INFO 58788 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-04T13:12:11.547Z DEBUG 58788 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@67afc9b6, started on Tue Nov 04 13:11:50 WET 2025
2025-11-04T13:12:11.549Z  INFO 58788 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:12:11.618Z  INFO 58788 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-04T13:12:11.619Z  INFO 58788 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-04T13:12:11.619Z DEBUG 58788 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@1e073bf9, started on Tue Nov 04 13:11:55 WET 2025
2025-11-04T13:12:11.620Z  INFO 58788 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:12:11.621Z  INFO 58788 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-04T13:12:11.621Z  INFO 58788 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-04T13:12:11.622Z  INFO 58788 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-04T13:12:11.624Z  INFO 58788 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-04T13:12:11.625Z  INFO 58788 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:12:11.626Z  INFO 58788 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-04T13:12:11.627Z  INFO 58788 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-04T13:22:21.819Z  INFO 63293 --- [main] p.r.h.s.unit.BookingControllerTest       : Starting BookingControllerTest using Java 21.0.9-ea with PID 63293 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T13:22:21.820Z  INFO 63293 --- [main] p.r.h.s.unit.BookingControllerTest       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T13:22:21.832Z DEBUG 63293 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@439d649c
2025-11-04T13:22:22.478Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-11-04T13:22:22.557Z DEBUG 63293 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T13:22:22.575Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T13:22:22.611Z DEBUG 63293 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T13:22:22.664Z  INFO 63293 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T13:22:22.664Z  INFO 63293 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T13:22:22.665Z  INFO 63293 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-04T13:22:22.683Z  INFO 63293 --- [main] p.r.h.s.unit.BookingControllerTest       : Started BookingControllerTest in 1.227 seconds (process running for 3.659)
2025-11-04T13:22:22.719Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:22.768Z DEBUG 63293 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3a19b933]
2025-11-04T13:22:22.772Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:22.773Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:22.774Z ERROR 63293 --- [main] p.r.h.controllers.BookingController      : Validation error: Municipality is required
2025-11-04T13:22:22.797Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:22.798Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:22:22.809Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-04T13:22:22.814Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-04T13:22:22.815Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:22.815Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:22:22.820Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T13:22:22.822Z DEBUG 63293 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED}]
2025-11-04T13:22:22.823Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-04T13:22:22.823Z ERROR 63293 --- [main] p.r.h.controllers.BookingController      : Error updating status: Not found
2025-11-04T13:22:22.824Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:22.824Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:22:22.828Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T13:22:22.829Z DEBUG 63293 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED, note=Done}]
2025-11-04T13:22:22.829Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-04T13:22:22.829Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:22.830Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@eefc1bf]
2025-11-04T13:22:22.841Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T13:22:22.841Z DEBUG 63293 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=RECEIVED}]
2025-11-04T13:22:22.842Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-04T13:22:22.842Z ERROR 63293 --- [main] p.r.h.controllers.BookingController      : Invalid request: Invalid transition
2025-11-04T13:22:22.842Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:22.842Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:22:22.846Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:22:22.846Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:22:22.847Z ERROR 63293 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found
2025-11-04T13:22:22.847Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:22.847Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:22:22.851Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:22:22.852Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:22:22.852Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:22.852Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@27ad03]
2025-11-04T13:22:22.879Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:22:22.882Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:22:22.886Z  WARN 63293 --- [main] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-11-04T13:22:22.888Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:22.888Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing UNKNOWN instances]
2025-11-04T13:22:22.898Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-04T13:22:22.898Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-04T13:22:22.898Z ERROR 63293 --- [main] p.r.h.controllers.BookingController      : Cannot cancel booking: Already cancelled
2025-11-04T13:22:22.899Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:22.899Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:22:22.902Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-04T13:22:22.903Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-04T13:22:22.903Z ERROR 63293 --- [main] p.r.h.controllers.BookingController      : Booking not found: Not found
2025-11-04T13:22:22.904Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:22.904Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:22:22.909Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:22.911Z DEBUG 63293 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6c945ef9]
2025-11-04T13:22:22.912Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:22.912Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:22.913Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:22.913Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7d4f7d5e]
2025-11-04T13:22:22.924Z  INFO 63293 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.integration.BookingControllerITTest]: BookingControllerITTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:22:22.935Z  INFO 63293 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.integration.BookingControllerITTest
2025-11-04T13:22:22.941Z  INFO 63293 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T13:22:22.958Z  INFO 63293 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 63293 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T13:22:22.959Z  INFO 63293 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-04T13:22:22.960Z DEBUG 63293 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@37bdd4b1
2025-11-04T13:22:23.125Z  INFO 63293 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T13:22:23.150Z  INFO 63293 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 2 JPA repository interfaces.
2025-11-04T13:22:23.377Z  INFO 63293 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T13:22:23.422Z  INFO 63293 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-04T13:22:23.451Z  INFO 63293 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T13:22:23.553Z  INFO 63293 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T13:22:23.575Z  INFO 63293 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-04T13:22:23.783Z  INFO 63293 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T13:22:23.785Z  INFO 63293 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-04T13:22:23.803Z  WARN 63293 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T13:22:23.817Z  INFO 63293 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T13:22:24.479Z  INFO 63293 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T13:22:24.522Z  INFO 63293 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:22:24.693Z  INFO 63293 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-04T13:22:25.162Z  WARN 63293 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T13:22:25.180Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T13:22:25.191Z DEBUG 63293 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T13:22:25.195Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T13:22:25.202Z DEBUG 63293 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T13:22:25.242Z  INFO 63293 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T13:22:25.276Z  INFO 63293 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T13:22:25.277Z  INFO 63293 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T13:22:25.277Z  INFO 63293 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-04T13:22:25.283Z  INFO 63293 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.342 seconds (process running for 6.259)
2025-11-04T13:22:25.287Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:25.291Z DEBUG 63293 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7bf48f0]
2025-11-04T13:22:25.291Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:25.291Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:25.296Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:22:25.296Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:25.354Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:25.367Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:25.639Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:25.640Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:25.644Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:25.644Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:25.738Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:22:25.787Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 02f7926f-e49d-4fac-81d0-2f7610d4baa7
2025-11-04T13:22:25.800Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:25.800Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3b0643f6]
2025-11-04T13:22:25.812Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:25.813Z DEBUG 63293 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4d5387a1]
2025-11-04T13:22:25.813Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:25.813Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:25.813Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:22:25.813Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:25.813Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:25.814Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:25.861Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:25.861Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:25.862Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:25.862Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:25.864Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:22:25.866Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: fd7963c9-c587-44ee-8721-cd336d4a5d65
2025-11-04T13:22:25.867Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:25.867Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@381f4e86]
2025-11-04T13:22:25.868Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:25.869Z DEBUG 63293 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@59347684]
2025-11-04T13:22:25.869Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:25.869Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:25.869Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:22:25.869Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:25.869Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:25.870Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:26.177Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:26.178Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:26.180Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:26.180Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:26.182Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:22:26.184Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f1ce6953-277a-4543-89bf-58018640a1ce
2025-11-04T13:22:26.186Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:26.186Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7cb76043]
2025-11-04T13:22:26.188Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:22:26.191Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:22:26.192Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-04T13:22:26.219Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:26.219Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:22:26.255Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:26.256Z DEBUG 63293 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@17a77d10]
2025-11-04T13:22:26.256Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:26.256Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:26.256Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:22:26.256Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:26.256Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:26.256Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:26.305Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:26.305Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:26.305Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:26.305Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:26.306Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:22:26.308Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 910da91a-b730-44ea-ae76-bb2cc73a0936
2025-11-04T13:22:26.309Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:26.309Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5a202948]
2025-11-04T13:22:26.318Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:22:26.319Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:22:26.319Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-04T13:22:26.321Z ERROR 63293 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-04T13:22:26.321Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:26.322Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:22:26.327Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:26.328Z DEBUG 63293 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@ff60edb]
2025-11-04T13:22:26.328Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:26.328Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:26.328Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:22:26.328Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:26.328Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:26.329Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:26.375Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:26.376Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:26.376Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:26.376Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:26.377Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:22:26.379Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: bca60099-1bd8-45e1-9d5a-950fa3c0833e
2025-11-04T13:22:26.380Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:26.380Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@46173049]
2025-11-04T13:22:26.381Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T13:22:26.382Z DEBUG 63293 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-04T13:22:26.382Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-04T13:22:26.383Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: bca60099-1bd8-45e1-9d5a-950fa3c0833e, newStatus: IN_PROGRESS
2025-11-04T13:22:26.383Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: bca60099-1bd8-45e1-9d5a-950fa3c0833e
2025-11-04T13:22:26.388Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-04T13:22:26.397Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:26.397Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@474d5b03]
2025-11-04T13:22:26.406Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:26.407Z DEBUG 63293 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@71789f5c]
2025-11-04T13:22:26.407Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:26.407Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:26.407Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:22:26.407Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:26.408Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:26.408Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:26.693Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:26.694Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:26.695Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:26.695Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:26.698Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:22:26.702Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 57a80022-ec1f-450b-bf77-3cf3f646dcb9
2025-11-04T13:22:26.703Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:26.704Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4819dcdf]
2025-11-04T13:22:26.706Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:22:26.706Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:22:26.706Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 57a80022-ec1f-450b-bf77-3cf3f646dcb9
2025-11-04T13:22:26.708Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:26.708Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6c9eb0ef]
2025-11-04T13:22:26.715Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:26.716Z DEBUG 63293 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6cb110c]
2025-11-04T13:22:26.716Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:26.716Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:26.716Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:22:26.716Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:26.716Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:26.716Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:26.765Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:26.766Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:26.767Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:26.767Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:26.767Z  WARN 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-04T13:22:26.770Z ERROR 63293 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-04T13:22:26.771Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:26.771Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:22:26.780Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:26.780Z DEBUG 63293 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@25184fb9]
2025-11-04T13:22:26.780Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:26.780Z  INFO 63293 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:26.781Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:22:26.781Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:26.781Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:26.781Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:26.829Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:26.829Z DEBUG 63293 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:26.830Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:26.830Z  INFO 63293 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:26.831Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:22:26.834Z  INFO 63293 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 04c59303-cdd2-4d13-a94b-d4a1aa864bf0
2025-11-04T13:22:26.834Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:26.835Z DEBUG 63293 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@32056ed9]
2025-11-04T13:22:26.836Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T13:22:26.836Z DEBUG 63293 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-04T13:22:26.839Z  WARN 63293 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-04T13:22:26.847Z  INFO 63293 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:22:26.853Z  INFO 63293 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-04T13:22:26.856Z  INFO 63293 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T13:22:26.866Z  INFO 63293 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 63293 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T13:22:26.867Z  INFO 63293 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T13:22:26.868Z DEBUG 63293 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4cf0c635
2025-11-04T13:22:26.925Z  INFO 63293 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T13:22:26.930Z  INFO 63293 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T13:22:26.968Z  INFO 63293 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T13:22:26.969Z  INFO 63293 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T13:22:26.974Z  INFO 63293 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T13:22:26.974Z  INFO 63293 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-04T13:22:26.975Z  INFO 63293 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T13:22:26.975Z  INFO 63293 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-04T13:22:26.975Z  WARN 63293 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T13:22:26.976Z  INFO 63293 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T13:22:26.999Z  INFO 63293 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T13:22:27.005Z  INFO 63293 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:22:27.044Z  WARN 63293 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T13:22:27.056Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T13:22:27.066Z DEBUG 63293 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T13:22:27.070Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T13:22:27.073Z DEBUG 63293 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T13:22:27.089Z  INFO 63293 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T13:22:27.101Z  INFO 63293 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.245 seconds (process running for 8.077)
2025-11-04T13:22:27.396Z  INFO 63293 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:22:27.399Z  INFO 63293 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:22:27.401Z  INFO 63293 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T13:22:27.411Z  INFO 63293 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 63293 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T13:22:27.411Z  INFO 63293 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-04T13:22:27.464Z  INFO 63293 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T13:22:27.468Z  INFO 63293 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T13:22:27.604Z  INFO 63293 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-04T13:22:27.618Z  INFO 63293 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-04T13:22:27.618Z  INFO 63293 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-04T13:22:27.647Z  INFO 63293 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-04T13:22:27.647Z  INFO 63293 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 235 ms
2025-11-04T13:22:27.686Z  INFO 63293 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T13:22:27.687Z  INFO 63293 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T13:22:27.691Z  INFO 63293 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T13:22:27.692Z  INFO 63293 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-04T13:22:27.692Z  INFO 63293 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T13:22:27.693Z  INFO 63293 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-04T13:22:27.693Z  WARN 63293 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T13:22:27.693Z  INFO 63293 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T13:22:27.715Z  INFO 63293 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T13:22:27.719Z  INFO 63293 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:22:27.741Z  WARN 63293 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T13:22:27.749Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T13:22:27.757Z DEBUG 63293 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T13:22:27.760Z DEBUG 63293 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T13:22:27.763Z DEBUG 63293 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T13:22:27.773Z  INFO 63293 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T13:22:27.819Z  INFO 63293 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-04T13:22:27.820Z  INFO 63293 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.419 seconds (process running for 8.796)
2025-11-04T13:22:27.851Z  INFO 63293 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:22:28.920Z  INFO 63293 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-04T13:22:29.023Z  INFO 63293 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-04T13:22:29.078Z  INFO 63293 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-04T13:22:29.078Z  INFO 63293 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-04T13:22:29.078Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-04T13:22:29.078Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-04T13:22:29.078Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-04T13:22:29.079Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@731cd4ad
2025-11-04T13:22:29.079Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@6f3db7d9
2025-11-04T13:22:29.079Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-04T13:22:29.079Z  INFO 63293 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-04T13:22:29.082Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:22:29.083Z DEBUG 63293 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:22:29.083Z  INFO 63293 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:29.084Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:29.084Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:29.132Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:29.133Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:29.134Z  INFO 63293 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:29.134Z  INFO 63293 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:29.136Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:22:29.137Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:22:29.146Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:22:29.155Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:22:29.156Z DEBUG 63293 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:22:29.158Z  INFO 63293 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:29.159Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:29.160Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:29.209Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:29.211Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:29.212Z  INFO 63293 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:29.213Z  INFO 63293 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:29.214Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:22:29.215Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:22:29.218Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:22:31.091Z  INFO 63293 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-04T13:22:31.108Z  INFO 63293 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-04T13:22:31.122Z  INFO 63293 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manhã
2025-11-04T13:22:31.137Z  INFO 63293 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colchão e mobília velha
2025-11-04T13:22:31.173Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:22:31.173Z DEBUG 63293 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:31.176Z DEBUG 63293 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@78b07abf]
2025-11-04T13:22:31.177Z  INFO 63293 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:31.177Z  INFO 63293 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:31.177Z  INFO 63293 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:22:31.177Z  INFO 63293 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:31.178Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:31.178Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:31.227Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:31.228Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:31.229Z  INFO 63293 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:31.229Z  INFO 63293 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:31.241Z  INFO 63293 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:22:31.249Z  INFO 63293 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 18f2da50-004c-4e04-86ae-e4c57addedb5
2025-11-04T13:22:31.253Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:22:31.253Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@74e8347e]
2025-11-04T13:22:31.255Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:22:33.186Z  INFO 63293 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-04T13:22:33.201Z  INFO 63293 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-04T13:22:33.202Z  INFO 63293 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:22:33.223Z  INFO 63293 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:22:33.224Z  INFO 63293 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:22:33.228Z  INFO 63293 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:22:33.259Z DEBUG 63293 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:22:33.259Z DEBUG 63293 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:33.260Z DEBUG 63293 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5d06656d]
2025-11-04T13:22:33.260Z  INFO 63293 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:33.260Z  INFO 63293 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:33.260Z  INFO 63293 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:22:33.260Z  INFO 63293 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:33.261Z DEBUG 63293 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:33.261Z DEBUG 63293 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:33.308Z DEBUG 63293 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:33.309Z DEBUG 63293 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:33.310Z  INFO 63293 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:33.311Z  INFO 63293 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:33.314Z  INFO 63293 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:22:33.319Z  INFO 63293 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 9d2c721e-9f3a-4e03-97ce-c8a75eab9fa8
2025-11-04T13:22:33.321Z DEBUG 63293 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:33.321Z DEBUG 63293 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@12fc8a86]
2025-11-04T13:22:33.323Z DEBUG 63293 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:22:33.331Z  INFO 63293 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 9d2c721e-9f3a-4e03-97ce-c8a75eab9fa8
2025-11-04T13:22:33.423Z  INFO 63293 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T13:22:33.474Z  INFO 63293 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T13:22:33.505Z  INFO 63293 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: 9d2c721e-9f3a-4e03-97ce-c8a75eab9fa8
2025-11-04T13:22:33.538Z DEBUG 63293 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/9d2c721e-9f3a-4e03-97ce-c8a75eab9fa8", parameters={}
2025-11-04T13:22:33.538Z DEBUG 63293 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:22:33.539Z  INFO 63293 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:22:33.539Z  INFO 63293 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 9d2c721e-9f3a-4e03-97ce-c8a75eab9fa8
2025-11-04T13:22:33.542Z DEBUG 63293 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:22:33.542Z DEBUG 63293 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@434388ab]
2025-11-04T13:22:33.544Z DEBUG 63293 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:22:35.040Z  INFO 63293 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T13:22:35.049Z  INFO 63293 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-04T13:22:35.061Z  INFO 63293 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: 9d2c721e-9f3a-4e03-97ce-c8a75eab9fa8
2025-11-04T13:22:35.062Z  INFO 63293 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:22:35.078Z  INFO 63293 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:22:35.081Z  INFO 63293 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:22:35.091Z  INFO 63293 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:22:35.126Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:22:35.127Z DEBUG 63293 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:35.128Z DEBUG 63293 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3fffbf8a]
2025-11-04T13:22:35.128Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:35.128Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:35.128Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:22:35.128Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:35.129Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:35.129Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:35.218Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:35.219Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:35.220Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:35.220Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:35.224Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:22:35.231Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: dd69e01e-bb26-4554-a699-991846296245
2025-11-04T13:22:35.233Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:35.234Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@41bfde68]
2025-11-04T13:22:35.235Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:22:35.237Z  INFO 63293 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: dd69e01e-bb26-4554-a699-991846296245
2025-11-04T13:22:35.347Z  INFO 63293 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T13:22:35.386Z  INFO 63293 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T13:22:35.413Z  INFO 63293 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-04T13:22:35.457Z DEBUG 63293 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-04T13:22:35.457Z DEBUG 63293 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:22:35.458Z  INFO 63293 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:22:35.458Z  INFO 63293 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-04T13:22:35.459Z ERROR 63293 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-04T13:22:35.460Z DEBUG 63293 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:22:35.460Z DEBUG 63293 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:22:35.460Z DEBUG 63293 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-04T13:22:36.959Z  INFO 63293 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T13:22:36.970Z  INFO 63293 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-04T13:22:36.971Z  INFO 63293 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:22:36.991Z  INFO 63293 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:22:36.993Z  INFO 63293 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:22:37.003Z  INFO 63293 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:22:37.027Z DEBUG 63293 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:22:37.028Z DEBUG 63293 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:37.028Z DEBUG 63293 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@12c13eca]
2025-11-04T13:22:37.028Z  INFO 63293 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:37.028Z  INFO 63293 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:37.029Z  INFO 63293 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:22:37.029Z  INFO 63293 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:37.029Z DEBUG 63293 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:37.029Z DEBUG 63293 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:37.078Z DEBUG 63293 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:37.078Z DEBUG 63293 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:37.079Z  INFO 63293 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:37.080Z  INFO 63293 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:37.082Z  INFO 63293 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:22:37.088Z  INFO 63293 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 293e9491-96d1-465f-a93a-629519ab9f17
2025-11-04T13:22:37.090Z DEBUG 63293 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:37.090Z DEBUG 63293 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6cac5128]
2025-11-04T13:22:37.092Z DEBUG 63293 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:22:37.094Z  INFO 63293 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T13:22:37.099Z DEBUG 63293 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:22:37.100Z DEBUG 63293 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:37.102Z DEBUG 63293 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4dd62bee]
2025-11-04T13:22:37.102Z  INFO 63293 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:37.102Z  INFO 63293 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:37.103Z  INFO 63293 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:22:37.103Z  INFO 63293 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:37.103Z DEBUG 63293 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:37.104Z DEBUG 63293 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:37.151Z DEBUG 63293 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:37.151Z DEBUG 63293 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:37.152Z  INFO 63293 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:37.152Z  INFO 63293 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:37.153Z  INFO 63293 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:22:37.156Z  INFO 63293 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 92377a35-9419-4242-a0ea-1376590ada93
2025-11-04T13:22:37.156Z DEBUG 63293 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:37.156Z DEBUG 63293 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@22cd61f]
2025-11-04T13:22:37.157Z DEBUG 63293 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:22:37.158Z  INFO 63293 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T13:22:37.235Z  INFO 63293 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T13:22:37.313Z  INFO 63293 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T13:22:37.318Z DEBUG 63293 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:22:37.318Z DEBUG 63293 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:22:37.318Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:22:37.318Z  INFO 63293 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:37.318Z DEBUG 63293 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:22:37.319Z DEBUG 63293 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:37.319Z DEBUG 63293 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:37.319Z  INFO 63293 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:22:37.319Z  INFO 63293 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:22:37.326Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:22:37.326Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:22:37.332Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:22:37.334Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:22:37.334Z DEBUG 63293 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:22:37.334Z  INFO 63293 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:22:37.334Z  INFO 63293 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:22:37.337Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:22:37.337Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:22:37.340Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:22:37.367Z DEBUG 63293 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:37.367Z DEBUG 63293 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:37.367Z  INFO 63293 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:37.368Z  INFO 63293 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:37.368Z DEBUG 63293 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:22:37.368Z DEBUG 63293 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:22:37.369Z DEBUG 63293 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:22:37.373Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:22:37.374Z DEBUG 63293 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:22:37.375Z  INFO 63293 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:37.376Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:37.376Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:37.425Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:37.425Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:37.427Z  INFO 63293 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:37.427Z  INFO 63293 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:37.428Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:22:37.428Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:22:37.430Z DEBUG 63293 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:22:39.362Z  INFO 63293 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-04T13:22:39.411Z DEBUG 63293 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-04T13:22:39.411Z DEBUG 63293 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:22:39.412Z  INFO 63293 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:22:39.412Z  INFO 63293 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-04T13:22:39.415Z DEBUG 63293 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:22:39.415Z DEBUG 63293 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:22:39.418Z DEBUG 63293 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:22:40.937Z  INFO 63293 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T13:22:40.953Z  INFO 63293 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-04T13:22:40.955Z  INFO 63293 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:22:40.969Z  INFO 63293 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:22:40.970Z  INFO 63293 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:22:40.981Z  INFO 63293 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:22:41.016Z DEBUG 63293 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:22:41.017Z DEBUG 63293 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:41.017Z DEBUG 63293 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@302363e2]
2025-11-04T13:22:41.017Z  INFO 63293 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:41.017Z  INFO 63293 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:41.018Z  INFO 63293 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:22:41.018Z  INFO 63293 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:41.018Z DEBUG 63293 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:41.018Z DEBUG 63293 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:41.067Z DEBUG 63293 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:41.067Z DEBUG 63293 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:41.068Z  INFO 63293 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:41.068Z  INFO 63293 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:41.069Z  INFO 63293 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:22:41.072Z  INFO 63293 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f77de282-1dd1-4350-aff7-32a7b6ba6bea
2025-11-04T13:22:41.072Z DEBUG 63293 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:41.072Z DEBUG 63293 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6ae2f833]
2025-11-04T13:22:41.073Z DEBUG 63293 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:22:41.074Z  INFO 63293 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T13:22:41.077Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:22:41.077Z DEBUG 63293 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:22:41.078Z DEBUG 63293 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5d3a4ab1]
2025-11-04T13:22:41.078Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:22:41.078Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:22:41.078Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:22:41.078Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:41.078Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:41.079Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:41.126Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:41.127Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:41.128Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:41.128Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:41.132Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:22:41.138Z  INFO 63293 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 096ac311-9181-4cd5-adc8-b53aa344fba1
2025-11-04T13:22:41.140Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:22:41.140Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4d30d829]
2025-11-04T13:22:41.142Z DEBUG 63293 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:22:41.144Z  INFO 63293 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T13:22:41.436Z  INFO 63293 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T13:22:41.512Z  INFO 63293 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T13:22:41.517Z DEBUG 63293 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:22:41.518Z DEBUG 63293 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:22:41.518Z DEBUG 63293 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:22:41.518Z DEBUG 63293 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:22:41.518Z  INFO 63293 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:41.518Z DEBUG 63293 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:41.518Z  INFO 63293 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:22:41.518Z DEBUG 63293 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:41.518Z  INFO 63293 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:22:41.521Z DEBUG 63293 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:22:41.521Z DEBUG 63293 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:22:41.525Z DEBUG 63293 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:22:41.527Z DEBUG 63293 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:22:41.527Z DEBUG 63293 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:22:41.527Z  INFO 63293 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-04T13:22:41.528Z  INFO 63293 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:22:41.528Z  INFO 63293 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:22:41.531Z DEBUG 63293 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:22:41.531Z DEBUG 63293 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:22:41.534Z DEBUG 63293 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:22:41.565Z DEBUG 63293 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:41.565Z DEBUG 63293 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:41.566Z  INFO 63293 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:41.566Z  INFO 63293 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:41.566Z DEBUG 63293 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:22:41.566Z DEBUG 63293 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:22:41.567Z DEBUG 63293 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:22:41.568Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-04T13:22:41.568Z DEBUG 63293 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:22:41.570Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:22:41.570Z DEBUG 63293 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:22:41.570Z  INFO 63293 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:22:41.570Z  INFO 63293 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:22:41.571Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:22:41.571Z  INFO 63293 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-04T13:22:41.571Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:22:41.576Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:22:41.576Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:22:41.580Z DEBUG 63293 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:22:41.618Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:22:41.618Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:22:41.619Z  INFO 63293 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:22:41.619Z  INFO 63293 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:22:41.619Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:22:41.619Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:22:41.621Z DEBUG 63293 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:22:43.108Z  INFO 63293 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T13:22:43.123Z  INFO 63293 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-04T13:22:43.124Z  INFO 63293 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:22:43.138Z  INFO 63293 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-04T13:22:43.195Z DEBUG 63293 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@439d649c, started on Tue Nov 04 13:22:21 WET 2025
2025-11-04T13:22:43.197Z DEBUG 63293 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@37bdd4b1, started on Tue Nov 04 13:22:22 WET 2025
2025-11-04T13:22:43.198Z  INFO 63293 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:22:43.269Z  INFO 63293 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-04T13:22:43.270Z  INFO 63293 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-04T13:22:43.270Z DEBUG 63293 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4cf0c635, started on Tue Nov 04 13:22:26 WET 2025
2025-11-04T13:22:43.271Z  INFO 63293 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:22:43.271Z  INFO 63293 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-04T13:22:43.272Z  INFO 63293 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-04T13:22:43.273Z  INFO 63293 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-04T13:22:43.275Z  INFO 63293 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-04T13:22:43.276Z  INFO 63293 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:22:43.277Z  INFO 63293 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-04T13:22:43.278Z  INFO 63293 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-04T13:28:07.059Z  INFO 66193 --- [main] p.r.h.s.unit.BookingControllerTest       : Starting BookingControllerTest using Java 21.0.9-ea with PID 66193 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T13:28:07.060Z  INFO 66193 --- [main] p.r.h.s.unit.BookingControllerTest       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T13:28:07.074Z DEBUG 66193 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6fe91918
2025-11-04T13:28:07.604Z  WARN 66193 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'bookingController' defined in file [/home/rodrigo-costa/Documentos/projtqs/api/target/classes/pt/rodrigo/hw1_tqs/controllers/BookingController.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'pt.rodrigo.hw1_tqs.services.BookingService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-11-04T13:28:07.611Z  INFO 66193 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-04T13:28:07.628Z ERROR 66193 --- [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in pt.rodrigo.hw1_tqs.controllers.BookingController required a bean of type 'pt.rodrigo.hw1_tqs.services.BookingService' that could not be found.


Action:

Consider defining a bean of type 'pt.rodrigo.hw1_tqs.services.BookingService' in your configuration.

2025-11-04T13:28:07.632Z  WARN 66193 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest@2a7b4b19]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@373e09c7 testClass = pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest, locations = [], classes = [pt.rodrigo.hw1_tqs.Hw1TqsApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3f04847e key = [org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientWebSecurityAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.security.saml2.Saml2RelyingPartyAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1f4dd016, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@598e5cb8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@1ab268bd, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@6a552721, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4bbc02ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@daf5ee01, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@363577a9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@8ce3f27, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@f091c3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159) ~[spring-test-6.2.12.jar:6.2.12]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.4.jar:3.5.4]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'bookingController' defined in file [/home/rodrigo-costa/Documentos/projtqs/api/target/classes/pt/rodrigo/hw1_tqs/controllers/BookingController.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'pt.rodrigo.hw1_tqs.services.BookingService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1228) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1194) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1130) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:990) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752) ~[spring-boot-3.5.7.jar:3.5.7]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-3.5.7.jar:3.5.7]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318) ~[spring-boot-3.5.7.jar:3.5.7]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144) ~[spring-boot-test-3.5.7.jar:3.5.7]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.2.12.jar:6.2.12]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.2.12.jar:6.2.12]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461) ~[spring-boot-3.5.7.jar:3.5.7]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563) ~[spring-boot-test-3.5.7.jar:3.5.7]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144) ~[spring-boot-test-3.5.7.jar:3.5.7]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110) ~[spring-boot-test-3.5.7.jar:3.5.7]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.2.12.jar:6.2.12]
	... 80 common frames omitted
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'pt.rodrigo.hw1_tqs.services.BookingService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:2314) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1733) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1653) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913) ~[spring-beans-6.2.12.jar:6.2.12]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-6.2.12.jar:6.2.12]
	... 106 common frames omitted

2025-11-04T13:28:07.642Z  WARN 66193 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest@18a66406]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@373e09c7 testClass = pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest, locations = [], classes = [pt.rodrigo.hw1_tqs.Hw1TqsApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3f04847e key = [org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientWebSecurityAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.security.saml2.Saml2RelyingPartyAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1f4dd016, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@598e5cb8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@1ab268bd, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@6a552721, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4bbc02ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@daf5ee01, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@363577a9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@8ce3f27, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@f091c3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159) ~[spring-test-6.2.12.jar:6.2.12]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.4.jar:3.5.4]

2025-11-04T13:28:07.645Z  WARN 66193 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest@52364a6e]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@373e09c7 testClass = pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest, locations = [], classes = [pt.rodrigo.hw1_tqs.Hw1TqsApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3f04847e key = [org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientWebSecurityAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.security.saml2.Saml2RelyingPartyAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1f4dd016, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@598e5cb8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@1ab268bd, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@6a552721, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4bbc02ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@daf5ee01, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@363577a9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@8ce3f27, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@f091c3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159) ~[spring-test-6.2.12.jar:6.2.12]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.4.jar:3.5.4]

2025-11-04T13:28:07.648Z  WARN 66193 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest@72187492]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@373e09c7 testClass = pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest, locations = [], classes = [pt.rodrigo.hw1_tqs.Hw1TqsApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3f04847e key = [org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientWebSecurityAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.security.saml2.Saml2RelyingPartyAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1f4dd016, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@598e5cb8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@1ab268bd, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@6a552721, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4bbc02ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@daf5ee01, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@363577a9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@8ce3f27, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@f091c3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159) ~[spring-test-6.2.12.jar:6.2.12]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.4.jar:3.5.4]

2025-11-04T13:28:07.652Z  WARN 66193 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest@5b20024b]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@373e09c7 testClass = pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest, locations = [], classes = [pt.rodrigo.hw1_tqs.Hw1TqsApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3f04847e key = [org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientWebSecurityAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.security.saml2.Saml2RelyingPartyAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1f4dd016, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@598e5cb8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@1ab268bd, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@6a552721, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4bbc02ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@daf5ee01, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@363577a9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@8ce3f27, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@f091c3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159) ~[spring-test-6.2.12.jar:6.2.12]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.4.jar:3.5.4]

2025-11-04T13:28:07.654Z  WARN 66193 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest@1e0383d3]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@373e09c7 testClass = pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest, locations = [], classes = [pt.rodrigo.hw1_tqs.Hw1TqsApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3f04847e key = [org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientWebSecurityAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.security.saml2.Saml2RelyingPartyAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1f4dd016, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@598e5cb8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@1ab268bd, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@6a552721, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4bbc02ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@daf5ee01, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@363577a9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@8ce3f27, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@f091c3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159) ~[spring-test-6.2.12.jar:6.2.12]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.4.jar:3.5.4]

2025-11-04T13:28:07.657Z  WARN 66193 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest@548d9d87]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@373e09c7 testClass = pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest, locations = [], classes = [pt.rodrigo.hw1_tqs.Hw1TqsApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3f04847e key = [org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientWebSecurityAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.security.saml2.Saml2RelyingPartyAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1f4dd016, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@598e5cb8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@1ab268bd, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@6a552721, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4bbc02ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@daf5ee01, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@363577a9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@8ce3f27, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@f091c3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159) ~[spring-test-6.2.12.jar:6.2.12]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.4.jar:3.5.4]

2025-11-04T13:28:07.659Z  WARN 66193 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest@fb79241]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@373e09c7 testClass = pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest, locations = [], classes = [pt.rodrigo.hw1_tqs.Hw1TqsApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3f04847e key = [org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientWebSecurityAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.security.saml2.Saml2RelyingPartyAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1f4dd016, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@598e5cb8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@1ab268bd, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@6a552721, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4bbc02ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@daf5ee01, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@363577a9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@8ce3f27, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@f091c3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159) ~[spring-test-6.2.12.jar:6.2.12]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.4.jar:3.5.4]

2025-11-04T13:28:07.661Z  WARN 66193 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest@1f81b020]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@373e09c7 testClass = pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest, locations = [], classes = [pt.rodrigo.hw1_tqs.Hw1TqsApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3f04847e key = [org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientWebSecurityAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.security.saml2.Saml2RelyingPartyAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1f4dd016, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@598e5cb8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@1ab268bd, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@6a552721, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4bbc02ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@daf5ee01, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@363577a9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@8ce3f27, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@f091c3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159) ~[spring-test-6.2.12.jar:6.2.12]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.4.jar:3.5.4]

2025-11-04T13:28:07.663Z  WARN 66193 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest@65dff28b]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@373e09c7 testClass = pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest, locations = [], classes = [pt.rodrigo.hw1_tqs.Hw1TqsApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3f04847e key = [org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientWebSecurityAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.security.saml2.Saml2RelyingPartyAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1f4dd016, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@598e5cb8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@1ab268bd, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@6a552721, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4bbc02ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@daf5ee01, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@363577a9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@8ce3f27, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@f091c3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159) ~[spring-test-6.2.12.jar:6.2.12]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.4.jar:3.5.4]

2025-11-04T13:28:07.665Z  WARN 66193 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest@13f6395d]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@373e09c7 testClass = pt.rodrigo.hw1_tqs.service.unit.BookingControllerTest, locations = [], classes = [pt.rodrigo.hw1_tqs.Hw1TqsApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@3f04847e key = [org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientWebSecurityAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.security.saml2.Saml2RelyingPartyAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1f4dd016, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@598e5cb8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@1ab268bd, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@6a552721, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@4bbc02ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@daf5ee01, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@363577a9, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@8ce3f27, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@f091c3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.12.jar:6.2.12]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159) ~[spring-test-6.2.12.jar:6.2.12]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.4.jar:3.5.4]

2025-11-04T13:28:07.671Z  INFO 66193 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.integration.BookingControllerITTest]: BookingControllerITTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:28:07.678Z  INFO 66193 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.integration.BookingControllerITTest
2025-11-04T13:28:07.682Z  INFO 66193 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T13:28:07.704Z  INFO 66193 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 66193 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T13:28:07.704Z  INFO 66193 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-04T13:28:07.705Z DEBUG 66193 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2978d342
2025-11-04T13:28:07.895Z  INFO 66193 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T13:28:07.928Z  INFO 66193 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-11-04T13:28:08.158Z  INFO 66193 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T13:28:08.197Z  INFO 66193 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-04T13:28:08.224Z  INFO 66193 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T13:28:08.319Z  INFO 66193 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T13:28:08.341Z  INFO 66193 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-04T13:28:08.554Z  INFO 66193 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T13:28:08.556Z  INFO 66193 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-04T13:28:08.576Z  WARN 66193 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T13:28:08.596Z  INFO 66193 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T13:28:09.258Z  INFO 66193 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T13:28:09.304Z  INFO 66193 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:28:09.493Z  INFO 66193 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-04T13:28:10.039Z  WARN 66193 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T13:28:10.101Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T13:28:10.156Z DEBUG 66193 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T13:28:10.172Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T13:28:10.208Z DEBUG 66193 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T13:28:10.274Z  INFO 66193 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T13:28:10.313Z  INFO 66193 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T13:28:10.313Z  INFO 66193 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T13:28:10.314Z  INFO 66193 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-04T13:28:10.330Z  INFO 66193 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.648 seconds (process running for 5.856)
2025-11-04T13:28:10.367Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:28:10.415Z DEBUG 66193 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@34671b61]
2025-11-04T13:28:10.419Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:28:10.420Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:28:10.424Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:28:10.424Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:10.484Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:10.490Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:10.787Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:10.790Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:10.795Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:10.795Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:10.881Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:28:10.929Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d76ded7b-a428-4d21-8a2b-5908faa5953a
2025-11-04T13:28:10.956Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:10.957Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7b4c56]
2025-11-04T13:28:10.979Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:28:10.980Z DEBUG 66193 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4f78c3aa]
2025-11-04T13:28:10.980Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:28:10.980Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:28:10.980Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:28:10.980Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:10.980Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:10.981Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:11.033Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:11.033Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:11.034Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:11.034Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:11.035Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:28:11.038Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 6f51377e-f9e1-4c14-9fab-69ebbea0e432
2025-11-04T13:28:11.039Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:11.039Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@256a1f3]
2025-11-04T13:28:11.040Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:28:11.041Z DEBUG 66193 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@25a174e8]
2025-11-04T13:28:11.041Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:28:11.041Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:28:11.041Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:28:11.041Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:11.041Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:11.041Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:11.092Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:11.092Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:11.093Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:11.093Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:11.094Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:28:11.097Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f9198818-bc15-4a47-b43c-151658be722a
2025-11-04T13:28:11.098Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:11.098Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5a2ace06]
2025-11-04T13:28:11.099Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:28:11.105Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:28:11.106Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-04T13:28:11.137Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:11.137Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:28:11.198Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:28:11.199Z DEBUG 66193 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2a72ac42]
2025-11-04T13:28:11.199Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:28:11.199Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:28:11.199Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:28:11.199Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:11.200Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:11.200Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:11.250Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:11.251Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:11.251Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:11.251Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:11.252Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:28:11.254Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 7d63d787-a176-44bf-b6ba-d1d1d27d41bc
2025-11-04T13:28:11.255Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:11.255Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2cff9100]
2025-11-04T13:28:11.263Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:28:11.264Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:28:11.264Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-04T13:28:11.266Z ERROR 66193 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-04T13:28:11.267Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:11.267Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:28:11.273Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:28:11.273Z DEBUG 66193 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7c2aa249]
2025-11-04T13:28:11.273Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:28:11.273Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:28:11.274Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:28:11.274Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:11.274Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:11.274Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:11.326Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:11.326Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:11.327Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:11.327Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:11.328Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:28:11.330Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f3fad0df-31ec-4f6b-8405-1b644a84abb1
2025-11-04T13:28:11.331Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:11.331Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@12b9a9d9]
2025-11-04T13:28:11.332Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T13:28:11.333Z DEBUG 66193 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-04T13:28:11.334Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-04T13:28:11.334Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: f3fad0df-31ec-4f6b-8405-1b644a84abb1, newStatus: IN_PROGRESS
2025-11-04T13:28:11.334Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: f3fad0df-31ec-4f6b-8405-1b644a84abb1
2025-11-04T13:28:11.340Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-04T13:28:11.349Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:11.349Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@27a3696f]
2025-11-04T13:28:11.359Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:28:11.359Z DEBUG 66193 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4528fd21]
2025-11-04T13:28:11.359Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:28:11.360Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:28:11.360Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:28:11.360Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:11.360Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:11.360Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:11.412Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:11.412Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:11.413Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:11.413Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:11.414Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:28:11.416Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: e6e80663-f8a8-4a9e-8d28-46facb921d12
2025-11-04T13:28:11.416Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:11.417Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6ede0b49]
2025-11-04T13:28:11.418Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:28:11.418Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:28:11.418Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: e6e80663-f8a8-4a9e-8d28-46facb921d12
2025-11-04T13:28:11.420Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:11.420Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6282b046]
2025-11-04T13:28:11.429Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:28:11.429Z DEBUG 66193 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3cb7e3c0]
2025-11-04T13:28:11.430Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:28:11.430Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:28:11.430Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:28:11.430Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:11.430Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:11.430Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:11.483Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:11.484Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:11.485Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:11.486Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:11.486Z  WARN 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-04T13:28:11.490Z ERROR 66193 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-04T13:28:11.491Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:11.491Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:28:11.505Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:28:11.506Z DEBUG 66193 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@97d3f57]
2025-11-04T13:28:11.507Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:28:11.507Z  INFO 66193 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:28:11.507Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:28:11.508Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:11.508Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:11.509Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:11.561Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:11.562Z DEBUG 66193 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:11.562Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:11.562Z  INFO 66193 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:11.564Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:28:11.569Z  INFO 66193 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: a197cdc7-69c6-4441-b8f8-bf1e123a79d6
2025-11-04T13:28:11.570Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:11.570Z DEBUG 66193 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@59a65b77]
2025-11-04T13:28:11.572Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T13:28:11.573Z DEBUG 66193 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-04T13:28:11.577Z  WARN 66193 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-04T13:28:11.584Z  INFO 66193 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:28:11.588Z  INFO 66193 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-04T13:28:11.591Z  INFO 66193 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T13:28:11.602Z  INFO 66193 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 66193 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T13:28:11.603Z  INFO 66193 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T13:28:11.604Z DEBUG 66193 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6358d8de
2025-11-04T13:28:11.667Z  INFO 66193 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T13:28:11.672Z  INFO 66193 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-04T13:28:11.736Z  INFO 66193 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T13:28:11.737Z  INFO 66193 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T13:28:11.744Z  INFO 66193 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T13:28:11.745Z  INFO 66193 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-04T13:28:11.747Z  INFO 66193 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T13:28:11.747Z  INFO 66193 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-04T13:28:11.748Z  WARN 66193 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T13:28:11.749Z  INFO 66193 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T13:28:11.776Z  INFO 66193 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T13:28:11.781Z  INFO 66193 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:28:11.823Z  WARN 66193 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T13:28:11.832Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T13:28:11.840Z DEBUG 66193 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T13:28:11.843Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T13:28:11.846Z DEBUG 66193 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T13:28:11.861Z  INFO 66193 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T13:28:11.870Z  INFO 66193 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.279 seconds (process running for 7.396)
2025-11-04T13:28:12.149Z  INFO 66193 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:28:12.152Z  INFO 66193 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:28:12.154Z  INFO 66193 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T13:28:12.163Z  INFO 66193 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 66193 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T13:28:12.164Z  INFO 66193 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-04T13:28:12.225Z  INFO 66193 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T13:28:12.229Z  INFO 66193 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T13:28:12.351Z  INFO 66193 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-04T13:28:12.363Z  INFO 66193 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-04T13:28:12.363Z  INFO 66193 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-04T13:28:12.392Z  INFO 66193 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-04T13:28:12.392Z  INFO 66193 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 228 ms
2025-11-04T13:28:12.433Z  INFO 66193 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T13:28:12.434Z  INFO 66193 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T13:28:12.437Z  INFO 66193 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T13:28:12.438Z  INFO 66193 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-04T13:28:12.438Z  INFO 66193 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T13:28:12.438Z  INFO 66193 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-04T13:28:12.438Z  WARN 66193 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T13:28:12.439Z  INFO 66193 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T13:28:12.459Z  INFO 66193 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T13:28:12.464Z  INFO 66193 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:28:12.485Z  WARN 66193 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T13:28:12.492Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T13:28:12.500Z DEBUG 66193 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T13:28:12.503Z DEBUG 66193 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T13:28:12.505Z DEBUG 66193 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T13:28:12.520Z  INFO 66193 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T13:28:12.564Z  INFO 66193 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-04T13:28:12.566Z  INFO 66193 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.413 seconds (process running for 8.091)
2025-11-04T13:28:12.597Z  INFO 66193 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:28:13.600Z  INFO 66193 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-04T13:28:13.688Z  INFO 66193 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-04T13:28:13.740Z  INFO 66193 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-04T13:28:13.740Z  INFO 66193 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-04T13:28:13.740Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-04T13:28:13.740Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-04T13:28:13.740Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-04T13:28:13.741Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@627c3c38
2025-11-04T13:28:13.741Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@118b8163
2025-11-04T13:28:13.741Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-04T13:28:13.741Z  INFO 66193 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-04T13:28:13.744Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:28:13.744Z DEBUG 66193 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:28:13.745Z  INFO 66193 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:13.745Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:13.746Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:13.796Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:13.797Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:13.798Z  INFO 66193 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:13.798Z  INFO 66193 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:13.799Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:28:13.799Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:28:13.803Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:28:13.806Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:28:13.806Z DEBUG 66193 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:28:13.806Z  INFO 66193 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:13.807Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:13.807Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:13.859Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:13.860Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:13.861Z  INFO 66193 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:13.862Z  INFO 66193 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:13.863Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:28:13.863Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:28:13.864Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:28:15.751Z  INFO 66193 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-04T13:28:15.768Z  INFO 66193 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-04T13:28:15.782Z  INFO 66193 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manhã
2025-11-04T13:28:15.797Z  INFO 66193 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colchão e mobília velha
2025-11-04T13:28:15.847Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:28:15.847Z DEBUG 66193 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:28:15.851Z DEBUG 66193 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5526fa7a]
2025-11-04T13:28:15.851Z  INFO 66193 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:28:15.851Z  INFO 66193 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:28:15.852Z  INFO 66193 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:28:15.852Z  INFO 66193 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:15.852Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:15.852Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:15.905Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:15.906Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:15.907Z  INFO 66193 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:15.907Z  INFO 66193 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:15.919Z  INFO 66193 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:28:15.928Z  INFO 66193 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0cd13c2c-939f-4f52-8484-4f45203aacdb
2025-11-04T13:28:15.933Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:28:15.933Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@14fd73da]
2025-11-04T13:28:15.935Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:28:17.864Z  INFO 66193 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-04T13:28:17.880Z  INFO 66193 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-04T13:28:17.881Z  INFO 66193 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:28:17.911Z  INFO 66193 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:28:17.912Z  INFO 66193 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:28:17.918Z  INFO 66193 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:28:17.951Z DEBUG 66193 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:28:17.952Z DEBUG 66193 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:28:17.952Z DEBUG 66193 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@26cb85b1]
2025-11-04T13:28:17.953Z  INFO 66193 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:28:17.953Z  INFO 66193 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:28:17.953Z  INFO 66193 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:28:17.953Z  INFO 66193 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:17.953Z DEBUG 66193 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:17.953Z DEBUG 66193 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:18.005Z DEBUG 66193 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:18.006Z DEBUG 66193 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:18.007Z  INFO 66193 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:18.007Z  INFO 66193 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:18.009Z  INFO 66193 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:28:18.014Z  INFO 66193 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0ed1b64c-b75b-4bd9-8295-3adfa5b6c761
2025-11-04T13:28:18.016Z DEBUG 66193 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:18.016Z DEBUG 66193 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@69316523]
2025-11-04T13:28:18.018Z DEBUG 66193 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:28:18.032Z  INFO 66193 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 0ed1b64c-b75b-4bd9-8295-3adfa5b6c761
2025-11-04T13:28:18.361Z  INFO 66193 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T13:28:18.399Z  INFO 66193 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T13:28:18.428Z  INFO 66193 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: 0ed1b64c-b75b-4bd9-8295-3adfa5b6c761
2025-11-04T13:28:18.490Z DEBUG 66193 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/0ed1b64c-b75b-4bd9-8295-3adfa5b6c761", parameters={}
2025-11-04T13:28:18.491Z DEBUG 66193 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:28:18.492Z  INFO 66193 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:28:18.493Z  INFO 66193 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 0ed1b64c-b75b-4bd9-8295-3adfa5b6c761
2025-11-04T13:28:18.497Z DEBUG 66193 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:28:18.498Z DEBUG 66193 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@48b2c305]
2025-11-04T13:28:18.501Z DEBUG 66193 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:28:19.994Z  INFO 66193 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T13:28:20.004Z  INFO 66193 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-04T13:28:20.016Z  INFO 66193 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: 0ed1b64c-b75b-4bd9-8295-3adfa5b6c761
2025-11-04T13:28:20.016Z  INFO 66193 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:28:20.034Z  INFO 66193 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:28:20.036Z  INFO 66193 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:28:20.046Z  INFO 66193 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:28:20.079Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:28:20.080Z DEBUG 66193 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:28:20.080Z DEBUG 66193 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5cb16794]
2025-11-04T13:28:20.080Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:28:20.080Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:28:20.081Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:28:20.081Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:20.081Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:20.081Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:20.132Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:20.133Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:20.134Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:20.135Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:20.138Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:28:20.144Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: dc6d1fb8-f5bb-4951-bb5c-4e8a07aeb454
2025-11-04T13:28:20.146Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:20.146Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@22922f81]
2025-11-04T13:28:20.148Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:28:20.151Z  INFO 66193 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: dc6d1fb8-f5bb-4951-bb5c-4e8a07aeb454
2025-11-04T13:28:20.233Z  INFO 66193 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T13:28:20.274Z  INFO 66193 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T13:28:20.303Z  INFO 66193 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-04T13:28:20.342Z DEBUG 66193 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-04T13:28:20.343Z DEBUG 66193 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:28:20.344Z  INFO 66193 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:28:20.344Z  INFO 66193 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-04T13:28:20.346Z ERROR 66193 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-04T13:28:20.347Z DEBUG 66193 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:28:20.347Z DEBUG 66193 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:28:20.347Z DEBUG 66193 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-04T13:28:21.845Z  INFO 66193 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T13:28:21.857Z  INFO 66193 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-04T13:28:21.857Z  INFO 66193 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:28:21.875Z  INFO 66193 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:28:21.876Z  INFO 66193 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:28:21.885Z  INFO 66193 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:28:21.911Z DEBUG 66193 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:28:21.911Z DEBUG 66193 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:28:21.912Z DEBUG 66193 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5dd034a9]
2025-11-04T13:28:21.912Z  INFO 66193 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:28:21.912Z  INFO 66193 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:28:21.912Z  INFO 66193 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:28:21.912Z  INFO 66193 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:21.912Z DEBUG 66193 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:21.913Z DEBUG 66193 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:21.963Z DEBUG 66193 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:21.964Z DEBUG 66193 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:21.965Z  INFO 66193 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:21.965Z  INFO 66193 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:21.968Z  INFO 66193 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:28:21.969Z  INFO 66193 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: daf6f956-5251-4a32-b733-64349457b1b2
2025-11-04T13:28:21.970Z DEBUG 66193 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:21.970Z DEBUG 66193 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@23728ca2]
2025-11-04T13:28:21.971Z DEBUG 66193 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:28:21.972Z  INFO 66193 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T13:28:21.976Z DEBUG 66193 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:28:21.977Z DEBUG 66193 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:28:21.978Z DEBUG 66193 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5d3a6dc0]
2025-11-04T13:28:21.978Z  INFO 66193 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:28:21.978Z  INFO 66193 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:28:21.979Z  INFO 66193 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:28:21.979Z  INFO 66193 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:21.980Z DEBUG 66193 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:21.980Z DEBUG 66193 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:22.033Z DEBUG 66193 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:22.034Z DEBUG 66193 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:22.036Z  INFO 66193 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:22.036Z  INFO 66193 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:22.039Z  INFO 66193 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:28:22.046Z  INFO 66193 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 8879588e-48a2-495c-8a2f-eb1f80022005
2025-11-04T13:28:22.048Z DEBUG 66193 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:22.048Z DEBUG 66193 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@12c0922c]
2025-11-04T13:28:22.050Z DEBUG 66193 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:28:22.051Z  INFO 66193 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T13:28:22.370Z  INFO 66193 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T13:28:22.455Z  INFO 66193 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T13:28:22.462Z DEBUG 66193 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:28:22.462Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:28:22.462Z DEBUG 66193 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:28:22.462Z DEBUG 66193 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:28:22.462Z  INFO 66193 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:22.463Z  INFO 66193 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:28:22.463Z  INFO 66193 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:28:22.463Z DEBUG 66193 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:22.463Z DEBUG 66193 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:22.470Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:28:22.471Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:28:22.476Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:28:22.478Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:28:22.479Z DEBUG 66193 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:28:22.479Z  INFO 66193 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:28:22.479Z  INFO 66193 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:28:22.482Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:28:22.482Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:28:22.485Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:28:22.516Z DEBUG 66193 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:22.517Z DEBUG 66193 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:22.518Z  INFO 66193 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:22.519Z  INFO 66193 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:22.520Z DEBUG 66193 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:28:22.521Z DEBUG 66193 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:28:22.523Z DEBUG 66193 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:28:22.530Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:28:22.531Z DEBUG 66193 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:28:22.532Z  INFO 66193 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:22.532Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:22.533Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:22.585Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:22.586Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:22.587Z  INFO 66193 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:22.587Z  INFO 66193 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:22.588Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:28:22.589Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:28:22.591Z DEBUG 66193 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:28:24.512Z  INFO 66193 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-04T13:28:24.568Z DEBUG 66193 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-04T13:28:24.569Z DEBUG 66193 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:28:24.570Z  INFO 66193 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:28:24.570Z  INFO 66193 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-04T13:28:24.574Z DEBUG 66193 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:28:24.574Z DEBUG 66193 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:28:24.577Z DEBUG 66193 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:28:26.095Z  INFO 66193 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T13:28:26.111Z  INFO 66193 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-04T13:28:26.113Z  INFO 66193 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:28:26.132Z  INFO 66193 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:28:26.133Z  INFO 66193 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:28:26.146Z  INFO 66193 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:28:26.184Z DEBUG 66193 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:28:26.184Z DEBUG 66193 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:28:26.185Z DEBUG 66193 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5091d27]
2025-11-04T13:28:26.185Z  INFO 66193 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:28:26.185Z  INFO 66193 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:28:26.185Z  INFO 66193 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:28:26.185Z  INFO 66193 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:26.185Z DEBUG 66193 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:26.185Z DEBUG 66193 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:26.237Z DEBUG 66193 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:26.238Z DEBUG 66193 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:26.239Z  INFO 66193 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:26.240Z  INFO 66193 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:26.243Z  INFO 66193 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:28:26.250Z  INFO 66193 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c0b1b91a-3add-44a1-9e2e-f1bc04fc3b2a
2025-11-04T13:28:26.254Z DEBUG 66193 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:26.254Z DEBUG 66193 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7fc482f2]
2025-11-04T13:28:26.256Z DEBUG 66193 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:28:26.259Z  INFO 66193 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T13:28:26.264Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:28:26.265Z DEBUG 66193 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:28:26.268Z DEBUG 66193 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@10e2afaa]
2025-11-04T13:28:26.269Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:28:26.269Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:28:26.270Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:28:26.270Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:26.271Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:26.272Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:26.324Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:26.325Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:26.327Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:26.327Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:26.331Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:28:26.337Z  INFO 66193 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: cb798901-0fe5-4881-b271-aa346835ad7c
2025-11-04T13:28:26.340Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:28:26.340Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@da1e185]
2025-11-04T13:28:26.342Z DEBUG 66193 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:28:26.345Z  INFO 66193 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T13:28:26.651Z  INFO 66193 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T13:28:26.719Z  INFO 66193 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T13:28:26.725Z DEBUG 66193 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:28:26.725Z DEBUG 66193 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:28:26.725Z DEBUG 66193 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:28:26.725Z DEBUG 66193 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:28:26.726Z  INFO 66193 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:26.726Z  INFO 66193 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:28:26.726Z  INFO 66193 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:28:26.726Z DEBUG 66193 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:26.726Z DEBUG 66193 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:26.729Z DEBUG 66193 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:28:26.729Z DEBUG 66193 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:28:26.733Z DEBUG 66193 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:28:26.736Z DEBUG 66193 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:28:26.737Z DEBUG 66193 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:28:26.738Z  INFO 66193 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:28:26.738Z  INFO 66193 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:28:26.741Z DEBUG 66193 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:28:26.741Z DEBUG 66193 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:28:26.743Z  INFO 66193 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-04T13:28:26.744Z DEBUG 66193 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:28:26.777Z DEBUG 66193 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:26.777Z DEBUG 66193 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:26.777Z  INFO 66193 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:26.777Z  INFO 66193 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:26.778Z DEBUG 66193 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:28:26.778Z DEBUG 66193 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:28:26.778Z DEBUG 66193 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:28:26.782Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:28:26.782Z DEBUG 66193 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:28:26.782Z  INFO 66193 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:28:26.783Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:28:26.783Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:28:26.802Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-04T13:28:26.802Z DEBUG 66193 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:28:26.803Z  INFO 66193 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:28:26.803Z  INFO 66193 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-04T13:28:26.807Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:28:26.807Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:28:26.812Z DEBUG 66193 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:28:26.834Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:28:26.834Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:28:26.834Z  INFO 66193 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:28:26.835Z  INFO 66193 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:28:26.835Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:28:26.835Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:28:26.836Z DEBUG 66193 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:28:28.316Z  INFO 66193 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T13:28:28.332Z  INFO 66193 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-04T13:28:28.333Z  INFO 66193 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:28:28.343Z  INFO 66193 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-04T13:28:28.398Z DEBUG 66193 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@2978d342, started on Tue Nov 04 13:28:07 WET 2025
2025-11-04T13:28:28.401Z  INFO 66193 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:28:28.471Z  INFO 66193 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-04T13:28:28.472Z  INFO 66193 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-04T13:28:28.472Z DEBUG 66193 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6358d8de, started on Tue Nov 04 13:28:11 WET 2025
2025-11-04T13:28:28.473Z  INFO 66193 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:28:28.474Z  INFO 66193 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-04T13:28:28.474Z  INFO 66193 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-04T13:28:28.475Z  INFO 66193 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-04T13:28:28.477Z  INFO 66193 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-04T13:28:28.478Z  INFO 66193 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:28:28.479Z  INFO 66193 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-04T13:28:28.480Z  INFO 66193 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-04T13:30:59.259Z  INFO 68059 --- [main] p.r.h.s.unit.BookingControllerTest       : Starting BookingControllerTest using Java 21.0.9-ea with PID 68059 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T13:30:59.261Z  INFO 68059 --- [main] p.r.h.s.unit.BookingControllerTest       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T13:30:59.275Z DEBUG 68059 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3da6950f
2025-11-04T13:30:59.918Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-11-04T13:31:00.000Z DEBUG 68059 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T13:31:00.019Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T13:31:00.059Z DEBUG 68059 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T13:31:00.113Z  INFO 68059 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T13:31:00.113Z  INFO 68059 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T13:31:00.114Z  INFO 68059 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-04T13:31:00.130Z  INFO 68059 --- [main] p.r.h.s.unit.BookingControllerTest       : Started BookingControllerTest in 1.25 seconds (process running for 3.483)
2025-11-04T13:31:00.166Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:00.212Z DEBUG 68059 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@70eb0c59]
2025-11-04T13:31:00.216Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:00.216Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:00.217Z ERROR 68059 --- [main] p.r.h.controllers.BookingController      : Validation error: Municipality is required
2025-11-04T13:31:00.240Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:00.241Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:31:00.252Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-04T13:31:00.257Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-04T13:31:00.258Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:00.258Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:31:00.263Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T13:31:00.265Z DEBUG 68059 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED}]
2025-11-04T13:31:00.265Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-04T13:31:00.266Z ERROR 68059 --- [main] p.r.h.controllers.BookingController      : Error updating status: Not found
2025-11-04T13:31:00.266Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:00.266Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:31:00.271Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T13:31:00.272Z DEBUG 68059 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=COMPLETED, note=Done}]
2025-11-04T13:31:00.272Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-04T13:31:00.272Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:00.273Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@626b8822]
2025-11-04T13:31:00.283Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T13:31:00.284Z DEBUG 68059 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=RECEIVED}]
2025-11-04T13:31:00.284Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-04T13:31:00.285Z ERROR 68059 --- [main] p.r.h.controllers.BookingController      : Invalid request: Invalid transition
2025-11-04T13:31:00.285Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:00.285Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:31:00.289Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:31:00.289Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:31:00.290Z ERROR 68059 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found
2025-11-04T13:31:00.290Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:00.290Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:31:00.294Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:31:00.295Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:31:00.295Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:00.295Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7bad8257]
2025-11-04T13:31:00.323Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:31:00.326Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:31:00.330Z  WARN 68059 --- [main] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-11-04T13:31:00.332Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:00.333Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing UNKNOWN instances]
2025-11-04T13:31:00.341Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-04T13:31:00.342Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-04T13:31:00.342Z ERROR 68059 --- [main] p.r.h.controllers.BookingController      : Cannot cancel booking: Already cancelled
2025-11-04T13:31:00.342Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:00.342Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:31:00.346Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#cancelBooking(String)
2025-11-04T13:31:00.346Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : DELETE /api/bookings/{token} - Cancelling booking
2025-11-04T13:31:00.346Z ERROR 68059 --- [main] p.r.h.controllers.BookingController      : Booking not found: Not found
2025-11-04T13:31:00.347Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:00.347Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:31:00.351Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:00.352Z DEBUG 68059 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@19323826]
2025-11-04T13:31:00.352Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:00.352Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:00.353Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:00.353Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@57c2bedf]
2025-11-04T13:31:00.359Z  INFO 68059 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.integration.BookingControllerITTest]: BookingControllerITTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:31:00.366Z  INFO 68059 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.integration.BookingControllerITTest
2025-11-04T13:31:00.370Z  INFO 68059 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T13:31:00.385Z  INFO 68059 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 68059 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T13:31:00.385Z  INFO 68059 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-04T13:31:00.386Z DEBUG 68059 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6a7b523b
2025-11-04T13:31:00.556Z  INFO 68059 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T13:31:00.580Z  INFO 68059 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 2 JPA repository interfaces.
2025-11-04T13:31:00.802Z  INFO 68059 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T13:31:00.848Z  INFO 68059 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-04T13:31:00.876Z  INFO 68059 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T13:31:00.978Z  INFO 68059 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T13:31:01.002Z  INFO 68059 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-04T13:31:01.211Z  INFO 68059 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T13:31:01.212Z  INFO 68059 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-04T13:31:01.231Z  WARN 68059 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T13:31:01.246Z  INFO 68059 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T13:31:01.884Z  INFO 68059 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T13:31:01.926Z  INFO 68059 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:31:02.097Z  INFO 68059 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-04T13:31:02.599Z  WARN 68059 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T13:31:02.618Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T13:31:02.627Z DEBUG 68059 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T13:31:02.632Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T13:31:02.637Z DEBUG 68059 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T13:31:02.672Z  INFO 68059 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T13:31:02.700Z  INFO 68059 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-04T13:31:02.700Z  INFO 68059 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-04T13:31:02.701Z  INFO 68059 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-04T13:31:02.707Z  INFO 68059 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.336 seconds (process running for 6.059)
2025-11-04T13:31:02.711Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:02.714Z DEBUG 68059 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@59858162]
2025-11-04T13:31:02.715Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:02.715Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:02.719Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:31:02.720Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:02.777Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:02.783Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:03.074Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:03.076Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:03.081Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:03.082Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:03.182Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:31:03.229Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ff934fb1-4dde-41dc-a7f7-a05131508c1a
2025-11-04T13:31:03.247Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:03.248Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5f9a3cc3]
2025-11-04T13:31:03.253Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:03.253Z DEBUG 68059 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1c1ae4bc]
2025-11-04T13:31:03.253Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:03.254Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:03.254Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:31:03.254Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:03.254Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:03.254Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:03.304Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:03.304Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:03.305Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:03.305Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:03.307Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:31:03.309Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c46923c7-0d48-44cc-bdbf-16e759ddba1d
2025-11-04T13:31:03.310Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:03.310Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7574ba9a]
2025-11-04T13:31:03.311Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:03.311Z DEBUG 68059 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6ed46340]
2025-11-04T13:31:03.312Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:03.312Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:03.312Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:31:03.312Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:03.312Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:03.312Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:03.360Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:03.361Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:03.362Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:03.362Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:03.363Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:31:03.365Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 5834bca6-9b06-48f5-b484-faad24fcb8d6
2025-11-04T13:31:03.365Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:03.365Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@11965dd4]
2025-11-04T13:31:03.367Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:31:03.368Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:31:03.369Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-04T13:31:03.397Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:03.398Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:31:03.431Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:03.431Z DEBUG 68059 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@65947da3]
2025-11-04T13:31:03.431Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:03.432Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:03.432Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:31:03.432Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:03.432Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:03.432Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:03.481Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:03.482Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:03.483Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:03.484Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:03.486Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:31:03.491Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 685408a9-9645-411e-8535-36749a06f73d
2025-11-04T13:31:03.493Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:03.493Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@ca97d7f]
2025-11-04T13:31:03.504Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:31:03.505Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:31:03.505Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-04T13:31:03.507Z ERROR 68059 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-04T13:31:03.507Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:03.507Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:31:03.514Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:03.515Z DEBUG 68059 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@adf5a5f]
2025-11-04T13:31:03.515Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:03.515Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:03.515Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:31:03.515Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:03.515Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:03.515Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:03.564Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:03.565Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:03.565Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:03.566Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:03.568Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:31:03.574Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ff479000-68f8-4119-be96-4e79d0bffa55
2025-11-04T13:31:03.576Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:03.576Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@67aa46d0]
2025-11-04T13:31:03.579Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T13:31:03.582Z DEBUG 68059 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-04T13:31:03.584Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/{token}/status - Updating status
2025-11-04T13:31:03.586Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: ff479000-68f8-4119-be96-4e79d0bffa55, newStatus: IN_PROGRESS
2025-11-04T13:31:03.586Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: ff479000-68f8-4119-be96-4e79d0bffa55
2025-11-04T13:31:03.592Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-04T13:31:03.602Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:03.602Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@37116413]
2025-11-04T13:31:03.612Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:03.612Z DEBUG 68059 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@18fcfe51]
2025-11-04T13:31:03.613Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:03.613Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:03.613Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:31:03.613Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:03.613Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:03.613Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:03.661Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:03.661Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:03.662Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:03.662Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:03.663Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:31:03.665Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f4280b6f-f554-4806-8c8a-e344d35e16a2
2025-11-04T13:31:03.665Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:03.666Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5880da84]
2025-11-04T13:31:03.667Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:31:03.667Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:31:03.667Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: f4280b6f-f554-4806-8c8a-e344d35e16a2
2025-11-04T13:31:03.670Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:03.670Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6c83ef4e]
2025-11-04T13:31:03.679Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:03.680Z DEBUG 68059 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@10335e87]
2025-11-04T13:31:03.681Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:03.681Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:03.681Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:31:03.681Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:03.682Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:03.682Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:03.731Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:03.731Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:03.731Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:03.731Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:03.731Z  WARN 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-04T13:31:03.732Z ERROR 68059 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-04T13:31:03.733Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:03.733Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:31:03.738Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:03.739Z DEBUG 68059 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@37ce54ef]
2025-11-04T13:31:03.739Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:03.739Z  INFO 68059 --- [main] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:03.739Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:31:03.739Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:03.740Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:03.740Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:03.787Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:03.787Z DEBUG 68059 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:03.788Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:03.788Z  INFO 68059 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:03.789Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:31:03.791Z  INFO 68059 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1008bb13-2f8b-447c-a29e-379e5a538bd9
2025-11-04T13:31:03.792Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:03.792Z DEBUG 68059 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6ed9ab0]
2025-11-04T13:31:03.793Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-04T13:31:03.794Z DEBUG 68059 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-04T13:31:03.797Z  WARN 68059 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-04T13:31:03.805Z  INFO 68059 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:31:03.808Z  INFO 68059 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-04T13:31:03.811Z  INFO 68059 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T13:31:03.823Z  INFO 68059 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 68059 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T13:31:03.823Z  INFO 68059 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-04T13:31:03.824Z DEBUG 68059 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7b802fba
2025-11-04T13:31:03.887Z  INFO 68059 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T13:31:03.893Z  INFO 68059 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-04T13:31:03.935Z  INFO 68059 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T13:31:03.936Z  INFO 68059 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T13:31:03.941Z  INFO 68059 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T13:31:03.941Z  INFO 68059 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-04T13:31:03.942Z  INFO 68059 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T13:31:03.942Z  INFO 68059 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-04T13:31:03.943Z  WARN 68059 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T13:31:03.943Z  INFO 68059 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T13:31:03.967Z  INFO 68059 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T13:31:03.974Z  INFO 68059 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:31:04.014Z  WARN 68059 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T13:31:04.023Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T13:31:04.034Z DEBUG 68059 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T13:31:04.039Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T13:31:04.041Z DEBUG 68059 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T13:31:04.057Z  INFO 68059 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T13:31:04.068Z  INFO 68059 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.257 seconds (process running for 7.42)
2025-11-04T13:31:04.377Z  INFO 68059 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:31:04.380Z  INFO 68059 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:31:04.381Z  INFO 68059 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-04T13:31:04.391Z  INFO 68059 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Starting CucumberSpringConfiguration using Java 21.0.9-ea with PID 68059 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-04T13:31:04.391Z  INFO 68059 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : No active profile set, falling back to 1 default profile: "default"
2025-11-04T13:31:04.439Z  INFO 68059 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-04T13:31:04.442Z  INFO 68059 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-04T13:31:04.558Z  INFO 68059 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-04T13:31:04.571Z  INFO 68059 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-04T13:31:04.571Z  INFO 68059 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-04T13:31:04.602Z  INFO 68059 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-04T13:31:04.602Z  INFO 68059 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 210 ms
2025-11-04T13:31:04.642Z  INFO 68059 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-04T13:31:04.643Z  INFO 68059 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-04T13:31:04.646Z  INFO 68059 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-04T13:31:04.647Z  INFO 68059 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-04T13:31:04.647Z  INFO 68059 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-04T13:31:04.648Z  INFO 68059 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-04T13:31:04.648Z  WARN 68059 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-04T13:31:04.648Z  INFO 68059 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-04T13:31:04.668Z  INFO 68059 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-04T13:31:04.672Z  INFO 68059 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:31:04.694Z  WARN 68059 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-04T13:31:04.701Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-04T13:31:04.708Z DEBUG 68059 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-04T13:31:04.711Z DEBUG 68059 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-04T13:31:04.713Z DEBUG 68059 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-04T13:31:04.723Z  INFO 68059 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-04T13:31:04.761Z  INFO 68059 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-04T13:31:04.763Z  INFO 68059 --- [main] p.r.h.b.c.CucumberSpringConfiguration    : Started CucumberSpringConfiguration in 0.382 seconds (process running for 8.115)
2025-11-04T13:31:04.794Z  INFO 68059 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:31:05.838Z  INFO 68059 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Citizen on homepage
2025-11-04T13:31:05.925Z  INFO 68059 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Navigated to citizen page
2025-11-04T13:31:05.980Z  INFO 68059 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-04T13:31:05.981Z  INFO 68059 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-04T13:31:05.981Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-04T13:31:05.981Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-04T13:31:05.981Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-04T13:31:05.981Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4479e0f
2025-11-04T13:31:05.981Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@c7e853a
2025-11-04T13:31:05.981Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-04T13:31:05.981Z  INFO 68059 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-11-04T13:31:05.984Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:31:05.985Z DEBUG 68059 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:31:05.985Z  INFO 68059 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:05.986Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:05.986Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:06.037Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:06.038Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:06.040Z  INFO 68059 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:06.040Z  INFO 68059 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:06.042Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:31:06.043Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:31:06.046Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:31:06.048Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:31:06.048Z DEBUG 68059 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:31:06.049Z  INFO 68059 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:06.049Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:06.049Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:06.099Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:06.100Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:06.101Z  INFO 68059 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:06.101Z  INFO 68059 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:06.102Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:31:06.102Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:31:06.103Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:31:07.986Z  INFO 68059 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected municipality: Aveiro
2025-11-04T13:31:08.003Z  INFO 68059 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered date: 2025-11-20
2025-11-04T13:31:08.017Z  INFO 68059 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Selected timeslot: Manhã
2025-11-04T13:31:08.032Z  INFO 68059 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Entered description: Colchão e mobília velha
2025-11-04T13:31:08.064Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:31:08.065Z DEBUG 68059 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:08.069Z DEBUG 68059 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7e4621d2]
2025-11-04T13:31:08.069Z  INFO 68059 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:08.070Z  INFO 68059 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:08.070Z  INFO 68059 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:31:08.070Z  INFO 68059 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:08.071Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:08.071Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:08.120Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:08.121Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:08.122Z  INFO 68059 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:08.122Z  INFO 68059 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:08.133Z  INFO 68059 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:31:08.138Z  INFO 68059 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 4c194899-8d1e-4ef0-a4d1-092233cd8a8d
2025-11-04T13:31:08.141Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:31:08.142Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@748e6c8]
2025-11-04T13:31:08.143Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:31:10.081Z  INFO 68059 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Form submitted
2025-11-04T13:31:10.095Z  INFO 68059 --- [main] p.r.h.bdd.steps.CitizenBookingSteps      : Booking created successfully
2025-11-04T13:31:10.096Z  INFO 68059 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:31:10.115Z  INFO 68059 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:31:10.116Z  INFO 68059 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:31:10.120Z  INFO 68059 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:31:10.155Z DEBUG 68059 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:31:10.155Z DEBUG 68059 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:10.156Z DEBUG 68059 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7b82fcd0]
2025-11-04T13:31:10.156Z  INFO 68059 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:10.156Z  INFO 68059 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:10.156Z  INFO 68059 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:31:10.157Z  INFO 68059 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:10.157Z DEBUG 68059 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:10.157Z DEBUG 68059 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:10.205Z DEBUG 68059 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:10.206Z DEBUG 68059 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:10.207Z  INFO 68059 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:10.207Z  INFO 68059 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:10.210Z  INFO 68059 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:31:10.216Z  INFO 68059 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 07be968b-7722-43fd-b3ec-f2f1bf4a19c0
2025-11-04T13:31:10.217Z DEBUG 68059 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:10.218Z DEBUG 68059 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@347807eb]
2025-11-04T13:31:10.219Z DEBUG 68059 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:31:10.225Z  INFO 68059 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 07be968b-7722-43fd-b3ec-f2f1bf4a19c0
2025-11-04T13:31:10.317Z  INFO 68059 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T13:31:10.357Z  INFO 68059 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T13:31:10.385Z  INFO 68059 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: 07be968b-7722-43fd-b3ec-f2f1bf4a19c0
2025-11-04T13:31:10.440Z DEBUG 68059 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/07be968b-7722-43fd-b3ec-f2f1bf4a19c0", parameters={}
2025-11-04T13:31:10.441Z DEBUG 68059 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:31:10.442Z  INFO 68059 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:31:10.442Z  INFO 68059 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 07be968b-7722-43fd-b3ec-f2f1bf4a19c0
2025-11-04T13:31:10.445Z DEBUG 68059 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:31:10.445Z DEBUG 68059 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5d74979f]
2025-11-04T13:31:10.446Z DEBUG 68059 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:31:11.943Z  INFO 68059 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T13:31:11.953Z  INFO 68059 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Booking details displayed
2025-11-04T13:31:11.967Z  INFO 68059 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Details contain: 07be968b-7722-43fd-b3ec-f2f1bf4a19c0
2025-11-04T13:31:11.968Z  INFO 68059 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:31:11.986Z  INFO 68059 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:31:11.987Z  INFO 68059 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:31:11.995Z  INFO 68059 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:31:12.023Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:31:12.024Z DEBUG 68059 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:12.024Z DEBUG 68059 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4a020254]
2025-11-04T13:31:12.024Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:12.024Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:12.025Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:31:12.025Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:12.025Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:12.025Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:12.073Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:12.074Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:12.075Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:12.075Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:12.079Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:31:12.086Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 19a4c33b-6c0b-45eb-85ec-a0dd5574f851
2025-11-04T13:31:12.088Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:12.088Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3437fd51]
2025-11-04T13:31:12.090Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:31:12.094Z  INFO 68059 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Created booking with token: 19a4c33b-6c0b-45eb-85ec-a0dd5574f851
2025-11-04T13:31:12.184Z  INFO 68059 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : User on homepage
2025-11-04T13:31:12.225Z  INFO 68059 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Navigated to search page
2025-11-04T13:31:12.253Z  INFO 68059 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Entered token: INVALID
2025-11-04T13:31:12.325Z DEBUG 68059 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings/INVALID", parameters={}
2025-11-04T13:31:12.326Z DEBUG 68059 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-04T13:31:12.327Z  INFO 68059 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : GET /api/bookings/{token} - Fetching booking
2025-11-04T13:31:12.327Z  INFO 68059 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: INVALID
2025-11-04T13:31:12.331Z ERROR 68059 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: INVALID
2025-11-04T13:31:12.332Z DEBUG 68059 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:31:12.332Z DEBUG 68059 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-04T13:31:12.332Z DEBUG 68059 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND
2025-11-04T13:31:13.831Z  INFO 68059 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Clicked search button
2025-11-04T13:31:13.843Z  INFO 68059 --- [main] p.rodrigo.hw1_tqs.bdd.steps.SearchSteps  : Error message displayed
2025-11-04T13:31:13.844Z  INFO 68059 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:31:13.865Z  INFO 68059 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:31:13.867Z  INFO 68059 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:31:13.876Z  INFO 68059 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:31:13.912Z DEBUG 68059 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:31:13.913Z DEBUG 68059 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:13.914Z DEBUG 68059 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7632ec14]
2025-11-04T13:31:13.914Z  INFO 68059 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:13.914Z  INFO 68059 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:13.915Z  INFO 68059 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:31:13.915Z  INFO 68059 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:13.915Z DEBUG 68059 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:13.915Z DEBUG 68059 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:13.965Z DEBUG 68059 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:13.966Z DEBUG 68059 --- [http-nio-8080-exec-8] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:13.967Z  INFO 68059 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:13.968Z  INFO 68059 --- [http-nio-8080-exec-8] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:13.972Z  INFO 68059 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:31:13.979Z  INFO 68059 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 75377e6f-a0ee-4772-9ebf-c4e1564bda69
2025-11-04T13:31:13.981Z DEBUG 68059 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:13.981Z DEBUG 68059 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@8bb9859]
2025-11-04T13:31:13.982Z DEBUG 68059 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:31:13.983Z  INFO 68059 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T13:31:13.992Z DEBUG 68059 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:31:13.993Z DEBUG 68059 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:13.995Z DEBUG 68059 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7833a650]
2025-11-04T13:31:13.995Z  INFO 68059 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:13.995Z  INFO 68059 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:13.996Z  INFO 68059 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:31:13.996Z  INFO 68059 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:13.996Z DEBUG 68059 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:13.997Z DEBUG 68059 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:14.046Z DEBUG 68059 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:14.046Z DEBUG 68059 --- [http-nio-8080-exec-9] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:14.047Z  INFO 68059 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:14.047Z  INFO 68059 --- [http-nio-8080-exec-9] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:14.050Z  INFO 68059 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:31:14.056Z  INFO 68059 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 22e8a071-2468-4fef-a93e-3afedfc44f9c
2025-11-04T13:31:14.058Z DEBUG 68059 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:14.059Z DEBUG 68059 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@37c94d1d]
2025-11-04T13:31:14.060Z DEBUG 68059 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:31:14.063Z  INFO 68059 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T13:31:14.163Z  INFO 68059 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T13:31:14.245Z  INFO 68059 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T13:31:14.249Z DEBUG 68059 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:31:14.250Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:31:14.250Z DEBUG 68059 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:31:14.250Z DEBUG 68059 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:31:14.250Z  INFO 68059 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:14.251Z  INFO 68059 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:31:14.251Z DEBUG 68059 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:14.251Z  INFO 68059 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:31:14.251Z DEBUG 68059 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:14.258Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:31:14.258Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:31:14.264Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:31:14.266Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:31:14.266Z DEBUG 68059 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:31:14.267Z  INFO 68059 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:31:14.267Z  INFO 68059 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:31:14.269Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:31:14.269Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:31:14.272Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:31:14.300Z DEBUG 68059 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:14.300Z DEBUG 68059 --- [http-nio-8080-exec-10] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:14.301Z  INFO 68059 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:14.301Z  INFO 68059 --- [http-nio-8080-exec-10] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:14.301Z DEBUG 68059 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:31:14.301Z DEBUG 68059 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:31:14.302Z DEBUG 68059 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:31:14.305Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:31:14.305Z DEBUG 68059 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:31:14.306Z  INFO 68059 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:14.306Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:14.306Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:14.353Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:14.354Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:14.355Z  INFO 68059 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:14.355Z  INFO 68059 --- [http-nio-8080-exec-3] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:14.356Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:31:14.357Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:31:14.359Z DEBUG 68059 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:31:16.302Z  INFO 68059 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected municipality filter: Aveiro
2025-11-04T13:31:16.331Z DEBUG 68059 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?municipality=Aveiro&page=0&size=100", parameters={masked}
2025-11-04T13:31:16.331Z DEBUG 68059 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:31:16.332Z  INFO 68059 --- [http-nio-8080-exec-4] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:31:16.332Z  INFO 68059 --- [http-nio-8080-exec-4] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Aveiro, date: null, status: null
2025-11-04T13:31:16.334Z DEBUG 68059 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:31:16.335Z DEBUG 68059 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:31:16.337Z DEBUG 68059 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:31:17.853Z  INFO 68059 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T13:31:17.871Z  INFO 68059 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings from Aveiro displayed
2025-11-04T13:31:17.872Z  INFO 68059 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:31:17.888Z  INFO 68059 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration]: CucumberSpringConfiguration does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-04T13:31:17.890Z  INFO 68059 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.bdd.config.CucumberSpringConfiguration
2025-11-04T13:31:17.899Z  INFO 68059 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Initializing Playwright browser
2025-11-04T13:31:17.928Z DEBUG 68059 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:31:17.928Z DEBUG 68059 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:17.929Z DEBUG 68059 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1b3ee47c]
2025-11-04T13:31:17.929Z  INFO 68059 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:17.929Z  INFO 68059 --- [http-nio-8080-exec-5] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:17.929Z  INFO 68059 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:31:17.929Z  INFO 68059 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:17.930Z DEBUG 68059 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:17.930Z DEBUG 68059 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:17.979Z DEBUG 68059 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:17.979Z DEBUG 68059 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:17.980Z  INFO 68059 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:17.980Z  INFO 68059 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:17.981Z  INFO 68059 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:31:17.984Z  INFO 68059 --- [http-nio-8080-exec-5] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 7d3f570f-f137-4264-a351-989b3e9538d4
2025-11-04T13:31:17.984Z DEBUG 68059 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:17.985Z DEBUG 68059 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@52ca2298]
2025-11-04T13:31:17.985Z DEBUG 68059 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:31:17.987Z  INFO 68059 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 1: Aveiro
2025-11-04T13:31:17.989Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-04T13:31:17.989Z DEBUG 68059 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-04T13:31:17.990Z DEBUG 68059 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5ccd785]
2025-11-04T13:31:17.990Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-04T13:31:17.990Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.h.controllers.BookingController      : Received new booking request DTO
2025-11-04T13:31:17.990Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking
2025-11-04T13:31:17.990Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:17.991Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:17.991Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:18.039Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:18.040Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:18.041Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:18.041Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:18.044Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Checked booking capacity against maxBookingsPerDay.
2025-11-04T13:31:18.047Z  INFO 68059 --- [http-nio-8080-exec-6] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: fdfb1e26-3b01-4f7f-a90a-0fb03740adae
2025-11-04T13:31:18.049Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-04T13:31:18.049Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3d13018c]
2025-11-04T13:31:18.050Z DEBUG 68059 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2025-11-04T13:31:18.052Z  INFO 68059 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Created test booking 2: Porto
2025-11-04T13:31:18.153Z  INFO 68059 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Staff member on homepage
2025-11-04T13:31:18.229Z  INFO 68059 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Navigated to staff page
2025-11-04T13:31:18.236Z DEBUG 68059 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:31:18.236Z DEBUG 68059 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:31:18.236Z DEBUG 68059 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:31:18.236Z DEBUG 68059 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:31:18.237Z  INFO 68059 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:18.237Z  INFO 68059 --- [http-nio-8080-exec-8] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:31:18.237Z  INFO 68059 --- [http-nio-8080-exec-8] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:31:18.237Z DEBUG 68059 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:18.237Z DEBUG 68059 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:18.240Z DEBUG 68059 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:31:18.240Z DEBUG 68059 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:31:18.243Z DEBUG 68059 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:31:18.246Z DEBUG 68059 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-04T13:31:18.246Z DEBUG 68059 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:31:18.247Z  INFO 68059 --- [http-nio-8080-exec-9] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:31:18.247Z  INFO 68059 --- [http-nio-8080-exec-9] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-04T13:31:18.249Z DEBUG 68059 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:31:18.249Z DEBUG 68059 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:31:18.250Z  INFO 68059 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Selected status filter: RECEIVED
2025-11-04T13:31:18.253Z DEBUG 68059 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:31:18.279Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?status=RECEIVED&page=0&size=100", parameters={masked}
2025-11-04T13:31:18.280Z DEBUG 68059 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-04T13:31:18.282Z  INFO 68059 --- [http-nio-8080-exec-1] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-04T13:31:18.282Z  INFO 68059 --- [http-nio-8080-exec-1] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: RECEIVED
2025-11-04T13:31:18.285Z DEBUG 68059 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:18.285Z DEBUG 68059 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:18.286Z  INFO 68059 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:18.286Z  INFO 68059 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:18.287Z DEBUG 68059 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:31:18.287Z DEBUG 68059 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:31:18.287Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:31:18.287Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-04T13:31:18.288Z DEBUG 68059 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:31:18.292Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-04T13:31:18.292Z DEBUG 68059 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-04T13:31:18.293Z  INFO 68059 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-04T13:31:18.294Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-04T13:31:18.294Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-04T13:31:18.297Z DEBUG 68059 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:31:18.341Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-04T13:31:18.342Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-04T13:31:18.342Z  INFO 68059 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-04T13:31:18.342Z  INFO 68059 --- [http-nio-8080-exec-2] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-04T13:31:18.342Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-04T13:31:18.342Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-04T13:31:18.343Z DEBUG 68059 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-04T13:31:19.784Z  INFO 68059 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Clicked filter button
2025-11-04T13:31:19.800Z  INFO 68059 --- [main] p.r.h.bdd.steps.StaffOperationsSteps     : Only bookings with status RECEIVED displayed
2025-11-04T13:31:19.801Z  INFO 68059 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing Playwright browser context
2025-11-04T13:31:19.818Z  INFO 68059 --- [main] p.r.hw1_tqs.bdd.config.PlaywrightHooks   : Closing all Playwright resources
2025-11-04T13:31:19.889Z DEBUG 68059 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3da6950f, started on Tue Nov 04 13:30:59 WET 2025
2025-11-04T13:31:19.891Z DEBUG 68059 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6a7b523b, started on Tue Nov 04 13:31:00 WET 2025
2025-11-04T13:31:19.892Z  INFO 68059 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:31:19.957Z  INFO 68059 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-04T13:31:19.958Z  INFO 68059 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-04T13:31:19.959Z DEBUG 68059 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@7b802fba, started on Tue Nov 04 13:31:03 WET 2025
2025-11-04T13:31:19.959Z  INFO 68059 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:31:19.960Z  INFO 68059 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-04T13:31:19.960Z  INFO 68059 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-04T13:31:19.961Z  INFO 68059 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-04T13:31:19.963Z  INFO 68059 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-04T13:31:19.964Z  INFO 68059 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-04T13:31:19.964Z  INFO 68059 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-04T13:31:19.965Z  INFO 68059 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
