2025-11-02T21:42:43.682Z  INFO 49846 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Starting Hw1TqsApplication using Java 21.0.9-ea with PID 49846 (/home/rodrigo-costa/Documentos/projtqs/api/target/classes started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T21:42:43.683Z  INFO 49846 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-02T21:42:43.742Z  INFO 49846 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T21:42:43.746Z  INFO 49846 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-02T21:42:43.785Z  INFO 49846 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-02T21:42:43.786Z  INFO 49846 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-02T21:42:43.786Z  INFO 49846 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-02T21:42:43.789Z  INFO 49846 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-02T21:42:43.790Z  INFO 49846 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 107 ms
2025-11-02T21:42:43.805Z  INFO 49846 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T21:42:43.806Z  INFO 49846 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T21:42:43.809Z  INFO 49846 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T21:42:43.809Z  INFO 49846 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-02T21:42:43.812Z  INFO 49846 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T21:42:43.813Z  INFO 49846 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-02T21:42:43.813Z  WARN 49846 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T21:42:43.814Z  INFO 49846 --- [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T21:42:43.858Z  INFO 49846 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T21:42:43.862Z  INFO 49846 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T21:42:43.908Z  WARN 49846 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T21:42:43.918Z DEBUG 49846 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T21:42:43.925Z DEBUG 49846 --- [restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T21:42:43.928Z DEBUG 49846 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T21:42:43.932Z DEBUG 49846 --- [restartedMain] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T21:42:43.944Z  INFO 49846 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T21:42:43.951Z  INFO 49846 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-11-02T21:42:43.955Z  INFO 49846 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-02T21:42:43.956Z  INFO 49846 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Started Hw1TqsApplication in 0.296 seconds (process running for 346.538)
2025-11-02T21:42:43.957Z  INFO 49846 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2025-11-02T21:42:47.360Z  INFO 49846 --- [File Watcher] rtingClassPathChangeChangedEventListener : Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-02T21:42:47.363Z  INFO 49846 --- [Thread-7] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-02T21:42:47.366Z  INFO 49846 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-02T21:42:47.371Z  INFO 49846 --- [Thread-7] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T21:42:47.376Z  WARN 49846 --- [Thread-7] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-02T21:42:47.378Z  INFO 49846 --- [Thread-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-02T21:42:47.379Z  INFO 49846 --- [Thread-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-02T21:42:47.471Z  INFO 49846 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Starting Hw1TqsApplication using Java 21.0.9-ea with PID 49846 (/home/rodrigo-costa/Documentos/projtqs/api/target/classes started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T21:42:47.472Z  INFO 49846 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-02T21:42:47.522Z  INFO 49846 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T21:42:47.526Z  INFO 49846 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-02T21:42:47.564Z  INFO 49846 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-02T21:42:47.564Z  INFO 49846 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-02T21:42:47.564Z  INFO 49846 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-02T21:42:47.568Z  INFO 49846 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-02T21:42:47.568Z  INFO 49846 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 96 ms
2025-11-02T21:42:47.583Z  INFO 49846 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T21:42:47.584Z  INFO 49846 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T21:42:47.587Z  INFO 49846 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T21:42:47.587Z  INFO 49846 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-11-02T21:42:47.588Z  INFO 49846 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T21:42:47.589Z  INFO 49846 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-11-02T21:42:47.589Z  WARN 49846 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T21:42:47.589Z  INFO 49846 --- [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T21:42:47.627Z  INFO 49846 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T21:42:47.630Z  INFO 49846 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T21:42:47.671Z  WARN 49846 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T21:42:47.682Z DEBUG 49846 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T21:42:47.688Z DEBUG 49846 --- [restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T21:42:47.691Z DEBUG 49846 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T21:42:47.695Z DEBUG 49846 --- [restartedMain] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T21:42:47.706Z  INFO 49846 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T21:42:47.713Z  INFO 49846 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-11-02T21:42:47.717Z  INFO 49846 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-02T21:42:47.718Z  INFO 49846 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Started Hw1TqsApplication in 0.266 seconds (process running for 350.3)
2025-11-02T21:42:47.719Z  INFO 49846 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2025-11-02T21:43:20.162Z  INFO 49846 --- [File Watcher] rtingClassPathChangeChangedEventListener : Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-02T21:43:20.164Z  INFO 49846 --- [Thread-12] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-02T21:43:20.166Z  INFO 49846 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-02T21:43:20.170Z  INFO 49846 --- [Thread-12] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T21:43:20.174Z  WARN 49846 --- [Thread-12] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-02T21:43:20.174Z  INFO 49846 --- [Thread-12] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-11-02T21:43:20.175Z  INFO 49846 --- [Thread-12] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-11-02T21:43:20.245Z  INFO 49846 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Starting Hw1TqsApplication using Java 21.0.9-ea with PID 49846 (/home/rodrigo-costa/Documentos/projtqs/api/target/classes started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T21:43:20.245Z  INFO 49846 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-02T21:43:20.304Z  INFO 49846 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T21:43:20.309Z  INFO 49846 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-02T21:43:20.349Z  INFO 49846 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-02T21:43:20.350Z  INFO 49846 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-02T21:43:20.350Z  INFO 49846 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-02T21:43:20.354Z  INFO 49846 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-02T21:43:20.354Z  INFO 49846 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 108 ms
2025-11-02T21:43:20.370Z  INFO 49846 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T21:43:20.371Z  INFO 49846 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T21:43:20.374Z  INFO 49846 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T21:43:20.374Z  INFO 49846 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2025-11-02T21:43:20.376Z  INFO 49846 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T21:43:20.376Z  INFO 49846 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2025-11-02T21:43:20.376Z  WARN 49846 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T21:43:20.376Z  INFO 49846 --- [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-4)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T21:43:20.404Z  INFO 49846 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T21:43:20.407Z  INFO 49846 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T21:43:20.444Z  WARN 49846 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T21:43:20.453Z DEBUG 49846 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T21:43:20.459Z DEBUG 49846 --- [restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T21:43:20.462Z DEBUG 49846 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T21:43:20.465Z DEBUG 49846 --- [restartedMain] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T21:43:20.475Z  INFO 49846 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T21:43:20.483Z  INFO 49846 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-11-02T21:43:20.487Z  INFO 49846 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-02T21:43:20.490Z  INFO 49846 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Started Hw1TqsApplication in 0.263 seconds (process running for 383.072)
2025-11-02T21:43:20.490Z  INFO 49846 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2025-11-02T21:44:06.083Z  INFO 49846 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-02T21:44:06.086Z  INFO 49846 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-02T21:44:06.091Z  INFO 49846 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T21:44:06.096Z  WARN 49846 --- [SpringApplicationShutdownHook] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-02T21:44:06.097Z  INFO 49846 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2025-11-02T21:44:06.099Z  INFO 49846 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.
2025-11-02T21:44:11.064Z  INFO 52791 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 52791 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T21:44:11.064Z  INFO 52791 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T21:44:11.077Z DEBUG 52791 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@13e9f2e2
2025-11-02T21:44:11.409Z  INFO 52791 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T21:44:11.447Z  INFO 52791 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 2 JPA repository interfaces.
2025-11-02T21:44:11.717Z  INFO 52791 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T21:44:11.741Z  INFO 52791 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T21:44:11.766Z  INFO 52791 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T21:44:11.915Z  INFO 52791 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T21:44:11.932Z  INFO 52791 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T21:44:12.031Z  INFO 52791 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T21:44:12.032Z  INFO 52791 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T21:44:12.044Z  WARN 52791 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T21:44:12.055Z  INFO 52791 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T21:44:12.458Z  INFO 52791 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T21:44:12.484Z  INFO 52791 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T21:44:12.714Z  INFO 52791 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T21:44:13.173Z  WARN 52791 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T21:44:13.226Z DEBUG 52791 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T21:44:13.276Z DEBUG 52791 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T21:44:13.296Z DEBUG 52791 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T21:44:13.329Z DEBUG 52791 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T21:44:13.392Z  INFO 52791 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T21:44:13.443Z  INFO 52791 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 2.557 seconds (process running for 3.025)
2025-11-02T21:44:13.739Z DEBUG 52791 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@13e9f2e2, started on Sun Nov 02 21:44:11 WET 2025
2025-11-02T21:44:13.741Z  INFO 52791 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T21:44:13.744Z  INFO 52791 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T21:44:13.746Z  INFO 52791 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T21:44:24.488Z  INFO 53037 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Starting Hw1TqsApplication using Java 21.0.9-ea with PID 53037 (/home/rodrigo-costa/Documentos/projtqs/api/target/classes started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T21:44:24.489Z  INFO 53037 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-02T21:44:24.509Z  INFO 53037 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-02T21:44:24.509Z  INFO 53037 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-02T21:44:24.778Z  INFO 53037 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T21:44:24.806Z  INFO 53037 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 22 ms. Found 2 JPA repository interfaces.
2025-11-02T21:44:25.052Z  INFO 53037 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-02T21:44:25.059Z  INFO 53037 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-02T21:44:25.060Z  INFO 53037 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-02T21:44:25.076Z  INFO 53037 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-02T21:44:25.076Z  INFO 53037 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 567 ms
2025-11-02T21:44:25.147Z  INFO 53037 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T21:44:25.166Z  INFO 53037 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T21:44:25.179Z  INFO 53037 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T21:44:25.284Z  INFO 53037 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T21:44:25.297Z  INFO 53037 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T21:44:25.382Z  INFO 53037 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T21:44:25.383Z  INFO 53037 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T21:44:25.393Z  WARN 53037 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T21:44:25.402Z  INFO 53037 --- [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T21:44:25.779Z  INFO 53037 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T21:44:25.804Z  INFO 53037 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T21:44:25.914Z  INFO 53037 --- [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T21:44:26.216Z  WARN 53037 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T21:44:26.259Z DEBUG 53037 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T21:44:26.278Z DEBUG 53037 --- [restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T21:44:26.291Z DEBUG 53037 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T21:44:26.313Z DEBUG 53037 --- [restartedMain] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T21:44:26.342Z  INFO 53037 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T21:44:26.373Z  INFO 53037 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-11-02T21:44:26.387Z  INFO 53037 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-02T21:44:26.391Z  INFO 53037 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Started Hw1TqsApplication in 2.097 seconds (process running for 2.255)
2025-11-02T21:44:47.398Z  INFO 53037 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-02T21:44:47.398Z  INFO 53037 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-02T21:44:47.398Z DEBUG 53037 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-11-02T21:44:47.398Z DEBUG 53037 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-11-02T21:44:47.398Z DEBUG 53037 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-11-02T21:44:47.399Z DEBUG 53037 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4342535c
2025-11-02T21:44:47.399Z DEBUG 53037 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@6f292fcb
2025-11-02T21:44:47.399Z DEBUG 53037 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-02T21:44:47.399Z  INFO 53037 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-02T21:44:47.403Z DEBUG 53037 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-02T21:44:47.403Z DEBUG 53037 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-02T21:44:47.408Z DEBUG 53037 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-02T21:44:47.408Z DEBUG 53037 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-02T21:44:47.415Z  INFO 53037 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T21:44:47.419Z  INFO 53037 --- [http-nio-8080-exec-2] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-02T21:44:47.419Z  INFO 53037 --- [http-nio-8080-exec-2] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-02T21:44:47.468Z DEBUG 53037 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T21:44:47.474Z DEBUG 53037 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T21:44:47.493Z DEBUG 53037 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-02T21:44:47.494Z DEBUG 53037 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 0 containing UNKNOWN instances]
2025-11-02T21:44:47.506Z DEBUG 53037 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-02T21:44:47.512Z DEBUG 53037 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/bookings?page=0&size=100", parameters={masked}
2025-11-02T21:44:47.512Z DEBUG 53037 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-02T21:44:47.512Z  INFO 53037 --- [http-nio-8080-exec-3] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-02T21:44:47.512Z  INFO 53037 --- [http-nio-8080-exec-3] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: null, date: null, status: null
2025-11-02T21:44:47.514Z DEBUG 53037 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-02T21:44:47.514Z DEBUG 53037 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 0 containing UNKNOWN instances]
2025-11-02T21:44:47.515Z DEBUG 53037 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-02T21:44:47.825Z DEBUG 53037 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T21:44:47.828Z DEBUG 53037 --- [http-nio-8080-exec-1] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T21:44:47.840Z  INFO 53037 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T21:44:47.840Z  INFO 53037 --- [http-nio-8080-exec-1] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T21:44:47.841Z DEBUG 53037 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-02T21:44:47.841Z DEBUG 53037 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-02T21:44:47.842Z DEBUG 53037 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-02T21:44:47.845Z DEBUG 53037 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-02T21:44:47.846Z DEBUG 53037 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-02T21:44:47.846Z  INFO 53037 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T21:44:47.847Z DEBUG 53037 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T21:44:47.847Z DEBUG 53037 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T21:44:47.903Z DEBUG 53037 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T21:44:47.903Z DEBUG 53037 --- [http-nio-8080-exec-4] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T21:44:47.903Z  INFO 53037 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T21:44:47.904Z  INFO 53037 --- [http-nio-8080-exec-4] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T21:44:47.904Z DEBUG 53037 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-02T21:44:47.904Z DEBUG 53037 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-02T21:44:47.905Z DEBUG 53037 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-02T21:44:48.792Z DEBUG 53037 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-02T21:44:48.792Z DEBUG 53037 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-02T21:44:48.793Z  INFO 53037 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T21:44:48.793Z DEBUG 53037 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T21:44:48.793Z DEBUG 53037 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T21:44:48.851Z DEBUG 53037 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T21:44:48.851Z DEBUG 53037 --- [http-nio-8080-exec-5] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T21:44:48.853Z  INFO 53037 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T21:44:48.853Z  INFO 53037 --- [http-nio-8080-exec-5] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T21:44:48.854Z DEBUG 53037 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-02T21:44:48.855Z DEBUG 53037 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-02T21:44:48.857Z DEBUG 53037 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-02T21:44:48.867Z DEBUG 53037 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/municipalities", parameters={}
2025-11-02T21:44:48.868Z DEBUG 53037 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.MunicipalityController#getAllMunicipalities()
2025-11-02T21:44:48.870Z  INFO 53037 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T21:44:48.872Z DEBUG 53037 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T21:44:48.873Z DEBUG 53037 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T21:44:48.932Z DEBUG 53037 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T21:44:48.933Z DEBUG 53037 --- [http-nio-8080-exec-6] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T21:44:48.934Z  INFO 53037 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T21:44:48.934Z  INFO 53037 --- [http-nio-8080-exec-6] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T21:44:48.935Z DEBUG 53037 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-02T21:44:48.936Z DEBUG 53037 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[Abrantes, Aguiar da Beira, Alandroal, Albergaria-a-velha, Albufeira, Alcanena, Alcobaça, Alcochete, (truncated)...]
2025-11-02T21:44:48.938Z DEBUG 53037 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-11-02T21:45:00.190Z DEBUG 53037 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/bookings", parameters={}
2025-11-02T21:45:00.190Z DEBUG 53037 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T21:45:00.202Z DEBUG 53037 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@36f1c57b]
2025-11-02T21:45:00.203Z  INFO 53037 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T21:45:00.203Z  INFO 53037 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Received DTO: municipality=Abrantes, date=2025-10-08, timeslot=Manhã, description=dsaDSA
2025-11-02T21:45:00.204Z  INFO 53037 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Abrantes, date: 2025-10-08
2025-11-02T21:45:00.204Z  INFO 53037 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T21:45:00.205Z DEBUG 53037 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T21:45:00.205Z DEBUG 53037 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T21:45:00.383Z DEBUG 53037 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T21:45:00.383Z DEBUG 53037 --- [http-nio-8080-exec-7] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T21:45:00.383Z  INFO 53037 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T21:45:00.384Z  INFO 53037 --- [http-nio-8080-exec-7] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T21:45:00.384Z  WARN 53037 --- [http-nio-8080-exec-7] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2025-10-08
2025-11-02T21:45:00.385Z ERROR 53037 --- [http-nio-8080-exec-7] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-02T21:45:00.388Z DEBUG 53037 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-11-02T21:45:00.388Z DEBUG 53037 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T21:45:00.389Z DEBUG 53037 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 400 BAD_REQUEST
2025-11-02T22:04:12.577Z  INFO 53037 --- [File Watcher] rtingClassPathChangeChangedEventListener : Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-02T22:04:12.584Z  INFO 53037 --- [Thread-5] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-02T22:04:12.588Z  INFO 53037 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-02T22:04:12.596Z  INFO 53037 --- [Thread-5] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:04:12.605Z  WARN 53037 --- [Thread-5] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-02T22:04:12.605Z  INFO 53037 --- [Thread-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:04:12.606Z  INFO 53037 --- [Thread-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:04:12.672Z  INFO 53037 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Starting Hw1TqsApplication using Java 21.0.9-ea with PID 53037 (/home/rodrigo-costa/Documentos/projtqs/api/target/classes started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:04:12.672Z  INFO 53037 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:04:12.730Z  INFO 53037 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:04:12.735Z  INFO 53037 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-02T22:04:12.775Z  INFO 53037 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-02T22:04:12.776Z  INFO 53037 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-02T22:04:12.776Z  INFO 53037 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-02T22:04:12.780Z  INFO 53037 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-02T22:04:12.780Z  INFO 53037 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 107 ms
2025-11-02T22:04:12.796Z  INFO 53037 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:04:12.796Z  INFO 53037 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:04:12.799Z  INFO 53037 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:04:12.800Z  INFO 53037 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-02T22:04:12.801Z  INFO 53037 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:04:12.801Z  INFO 53037 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-02T22:04:12.801Z  WARN 53037 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:04:12.802Z  INFO 53037 --- [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:04:12.832Z  INFO 53037 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:04:12.835Z  INFO 53037 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:04:12.875Z  WARN 53037 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:04:12.885Z DEBUG 53037 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:04:12.892Z DEBUG 53037 --- [restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:04:12.895Z DEBUG 53037 --- [restartedMain] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:04:12.898Z DEBUG 53037 --- [restartedMain] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:04:12.910Z  INFO 53037 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:04:12.917Z  INFO 53037 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-11-02T22:04:12.920Z  INFO 53037 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-02T22:04:12.922Z  INFO 53037 --- [restartedMain] pt.rodrigo.hw1_tqs.Hw1TqsApplication     : Started Hw1TqsApplication in 0.263 seconds (process running for 1188.786)
2025-11-02T22:04:12.923Z  INFO 53037 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2025-11-02T22:12:35.414Z  INFO 53037 --- [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-02T22:12:35.416Z  INFO 53037 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-02T22:12:35.421Z  INFO 53037 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:12:35.426Z  WARN 53037 --- [SpringApplicationShutdownHook] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2025-11-02T22:12:35.428Z  INFO 53037 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-02T22:12:35.431Z  INFO 53037 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-02T22:12:48.228Z  INFO 62707 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 62707 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:12:48.229Z  INFO 62707 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:12:48.243Z DEBUG 62707 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6d0be7ab
2025-11-02T22:12:48.573Z  INFO 62707 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:12:48.604Z  INFO 62707 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-11-02T22:12:48.884Z  INFO 62707 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:12:48.910Z  INFO 62707 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:12:48.927Z  INFO 62707 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:12:48.989Z  INFO 62707 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:12:49.004Z  INFO 62707 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:12:49.099Z  INFO 62707 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:12:49.100Z  INFO 62707 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:12:49.111Z  WARN 62707 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:12:49.120Z  INFO 62707 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:12:49.469Z  INFO 62707 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:12:49.495Z  INFO 62707 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:12:49.656Z  INFO 62707 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:12:50.036Z  WARN 62707 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:12:50.078Z DEBUG 62707 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:12:50.115Z DEBUG 62707 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:12:50.129Z DEBUG 62707 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:12:50.153Z DEBUG 62707 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:12:50.194Z  INFO 62707 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:12:50.231Z  INFO 62707 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 2.168 seconds (process running for 3.292)
2025-11-02T22:12:50.262Z DEBUG 62707 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6d0be7ab, started on Sun Nov 02 22:12:48 WET 2025
2025-11-02T22:12:50.265Z  INFO 62707 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:12:50.268Z  INFO 62707 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:12:50.275Z  INFO 62707 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:13:13.020Z  INFO 63011 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 63011 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:13:13.021Z  INFO 63011 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:13:13.035Z DEBUG 63011 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6d0be7ab
2025-11-02T22:13:13.357Z  INFO 63011 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:13:13.386Z  INFO 63011 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-11-02T22:13:13.673Z  INFO 63011 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:13:13.696Z  INFO 63011 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:13:13.712Z  INFO 63011 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:13:13.763Z  INFO 63011 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:13:13.778Z  INFO 63011 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:13:13.870Z  INFO 63011 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:13:13.871Z  INFO 63011 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:13:13.881Z  WARN 63011 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:13:13.891Z  INFO 63011 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:13:14.261Z  INFO 63011 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:13:14.287Z  INFO 63011 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:13:14.508Z  INFO 63011 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:13:14.966Z  WARN 63011 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:13:15.016Z DEBUG 63011 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:13:15.056Z DEBUG 63011 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:13:15.071Z DEBUG 63011 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:13:15.095Z DEBUG 63011 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:13:15.141Z  INFO 63011 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:13:15.178Z  INFO 63011 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 2.32 seconds (process running for 3.448)
2025-11-02T22:13:15.202Z DEBUG 63011 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6d0be7ab, started on Sun Nov 02 22:13:13 WET 2025
2025-11-02T22:13:15.206Z  INFO 63011 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:13:15.210Z  INFO 63011 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:13:15.212Z  INFO 63011 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:26:59.424Z  INFO 67525 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 67525 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:26:59.425Z  INFO 67525 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:26:59.439Z DEBUG 67525 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7
2025-11-02T22:26:59.750Z  INFO 67525 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:26:59.784Z  INFO 67525 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 2 JPA repository interfaces.
2025-11-02T22:27:00.068Z  INFO 67525 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:27:00.094Z  INFO 67525 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:27:00.109Z  INFO 67525 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:27:00.159Z  INFO 67525 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:27:00.173Z  INFO 67525 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:27:00.269Z  INFO 67525 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:27:00.270Z  INFO 67525 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:27:00.281Z  WARN 67525 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:27:00.290Z  INFO 67525 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:27:00.645Z  INFO 67525 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:27:00.671Z  INFO 67525 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:27:00.895Z  INFO 67525 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:27:01.285Z  WARN 67525 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:27:01.326Z DEBUG 67525 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:27:01.364Z DEBUG 67525 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:27:01.379Z DEBUG 67525 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:27:01.401Z DEBUG 67525 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:27:01.440Z  INFO 67525 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:27:01.481Z  INFO 67525 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 2.219 seconds (process running for 3.333)
2025-11-02T22:27:01.511Z DEBUG 67525 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7, started on Sun Nov 02 22:26:59 WET 2025
2025-11-02T22:27:01.515Z  INFO 67525 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:27:01.519Z  INFO 67525 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:27:01.521Z  INFO 67525 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:33:32.338Z  INFO 69782 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 69782 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:33:32.339Z  INFO 69782 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:33:32.352Z DEBUG 69782 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7
2025-11-02T22:33:32.682Z  INFO 69782 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:33:32.713Z  INFO 69782 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-11-02T22:33:32.968Z  INFO 69782 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:33:32.993Z  INFO 69782 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:33:33.009Z  INFO 69782 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:33:33.060Z  INFO 69782 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:33:33.074Z  INFO 69782 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:33:33.166Z  INFO 69782 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:33:33.167Z  INFO 69782 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:33:33.177Z  WARN 69782 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:33:33.186Z  INFO 69782 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:33:33.540Z  INFO 69782 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:33:33.566Z  INFO 69782 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:33:33.728Z  INFO 69782 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:33:34.120Z  WARN 69782 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:33:34.172Z DEBUG 69782 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:33:34.217Z DEBUG 69782 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:33:34.235Z DEBUG 69782 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:33:34.266Z DEBUG 69782 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:33:34.326Z  INFO 69782 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:33:34.368Z  INFO 69782 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 2.199 seconds (process running for 3.292)
2025-11-02T22:33:34.393Z DEBUG 69782 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7, started on Sun Nov 02 22:33:32 WET 2025
2025-11-02T22:33:34.397Z  INFO 69782 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:33:34.400Z  INFO 69782 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:33:34.402Z  INFO 69782 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:33:57.901Z  INFO 70104 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 70104 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:33:57.902Z  INFO 70104 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:33:57.916Z DEBUG 70104 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7
2025-11-02T22:33:58.228Z  INFO 70104 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:33:58.260Z  INFO 70104 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 2 JPA repository interfaces.
2025-11-02T22:33:58.520Z  INFO 70104 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:33:58.546Z  INFO 70104 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:33:58.566Z  INFO 70104 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:33:58.628Z  INFO 70104 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:33:58.646Z  INFO 70104 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:33:58.743Z  INFO 70104 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:33:58.744Z  INFO 70104 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:33:58.756Z  WARN 70104 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:33:58.765Z  INFO 70104 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:33:59.127Z  INFO 70104 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:33:59.154Z  INFO 70104 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:33:59.331Z  INFO 70104 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:33:59.724Z  WARN 70104 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:33:59.771Z DEBUG 70104 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:33:59.809Z DEBUG 70104 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:33:59.823Z DEBUG 70104 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:33:59.849Z DEBUG 70104 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:33:59.899Z  INFO 70104 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:33:59.940Z  INFO 70104 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 2.208 seconds (process running for 3.424)
2025-11-02T22:33:59.967Z DEBUG 70104 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7, started on Sun Nov 02 22:33:57 WET 2025
2025-11-02T22:33:59.970Z  INFO 70104 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:33:59.974Z  INFO 70104 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:33:59.976Z  INFO 70104 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:34:07.484Z  INFO 70372 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 70372 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:34:07.485Z  INFO 70372 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:34:07.498Z DEBUG 70372 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7
2025-11-02T22:34:07.829Z  INFO 70372 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:34:07.863Z  INFO 70372 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 28 ms. Found 2 JPA repository interfaces.
2025-11-02T22:34:08.173Z  INFO 70372 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:34:08.195Z  INFO 70372 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:34:08.209Z  INFO 70372 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:34:08.257Z  INFO 70372 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:34:08.270Z  INFO 70372 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:34:08.358Z  INFO 70372 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:34:08.359Z  INFO 70372 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:34:08.370Z  WARN 70372 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:34:08.379Z  INFO 70372 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:34:08.729Z  INFO 70372 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:34:08.755Z  INFO 70372 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:34:08.931Z  INFO 70372 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:34:09.347Z  WARN 70372 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:34:09.390Z DEBUG 70372 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:34:09.430Z DEBUG 70372 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:34:09.450Z DEBUG 70372 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:34:09.481Z DEBUG 70372 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:34:09.533Z  INFO 70372 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:34:09.578Z  INFO 70372 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 2.258 seconds (process running for 3.35)
2025-11-02T22:34:09.603Z DEBUG 70372 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7, started on Sun Nov 02 22:34:07 WET 2025
2025-11-02T22:34:09.605Z  INFO 70372 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:34:09.609Z  INFO 70372 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:34:09.610Z  INFO 70372 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:34:35.722Z  INFO 70710 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 70710 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:34:35.723Z  INFO 70710 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:34:35.743Z DEBUG 70710 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7
2025-11-02T22:34:36.074Z  INFO 70710 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:34:36.104Z  INFO 70710 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-11-02T22:34:36.367Z  INFO 70710 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:34:36.392Z  INFO 70710 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:34:36.410Z  INFO 70710 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:34:36.471Z  INFO 70710 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:34:36.485Z  INFO 70710 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:34:36.579Z  INFO 70710 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:34:36.581Z  INFO 70710 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:34:36.591Z  WARN 70710 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:34:36.600Z  INFO 70710 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:34:36.950Z  INFO 70710 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:34:36.976Z  INFO 70710 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:34:37.142Z  INFO 70710 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:34:37.553Z  WARN 70710 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:34:37.642Z DEBUG 70710 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:34:37.709Z DEBUG 70710 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:34:37.731Z DEBUG 70710 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:34:37.770Z DEBUG 70710 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:34:37.829Z  INFO 70710 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:34:37.873Z  INFO 70710 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 2.315 seconds (process running for 3.445)
2025-11-02T22:34:37.907Z DEBUG 70710 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7, started on Sun Nov 02 22:34:35 WET 2025
2025-11-02T22:34:37.910Z  INFO 70710 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:34:37.916Z  INFO 70710 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:34:37.918Z  INFO 70710 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:34:57.694Z  INFO 71073 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 71073 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:34:57.695Z  INFO 71073 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:34:57.709Z DEBUG 71073 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7
2025-11-02T22:34:58.020Z  INFO 71073 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:34:58.052Z  INFO 71073 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-11-02T22:34:58.322Z  INFO 71073 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:34:58.351Z  INFO 71073 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:34:58.375Z  INFO 71073 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:34:58.439Z  INFO 71073 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:34:58.454Z  INFO 71073 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:34:58.547Z  INFO 71073 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:34:58.548Z  INFO 71073 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:34:58.559Z  WARN 71073 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:34:58.568Z  INFO 71073 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:34:58.930Z  INFO 71073 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:34:58.957Z  INFO 71073 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:34:59.141Z  INFO 71073 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:34:59.552Z  WARN 71073 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:34:59.600Z DEBUG 71073 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:34:59.646Z DEBUG 71073 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:34:59.667Z DEBUG 71073 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:34:59.699Z DEBUG 71073 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:34:59.759Z  INFO 71073 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:34:59.809Z  INFO 71073 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 2.278 seconds (process running for 3.393)
2025-11-02T22:34:59.837Z DEBUG 71073 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7, started on Sun Nov 02 22:34:57 WET 2025
2025-11-02T22:34:59.839Z  INFO 71073 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:34:59.844Z  INFO 71073 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:34:59.845Z  INFO 71073 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:35:56.851Z  INFO 71632 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 71632 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:35:56.852Z  INFO 71632 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:35:56.866Z DEBUG 71632 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7
2025-11-02T22:35:57.176Z  INFO 71632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:35:57.214Z  INFO 71632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 29 ms. Found 2 JPA repository interfaces.
2025-11-02T22:35:57.467Z  INFO 71632 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:35:57.495Z  INFO 71632 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:35:57.517Z  INFO 71632 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:35:57.579Z  INFO 71632 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:35:57.593Z  INFO 71632 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:35:57.692Z  INFO 71632 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:35:57.693Z  INFO 71632 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:35:57.704Z  WARN 71632 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:35:57.714Z  INFO 71632 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:35:58.085Z  INFO 71632 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:35:58.112Z  INFO 71632 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:35:58.303Z  INFO 71632 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:35:58.719Z  WARN 71632 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:35:58.761Z DEBUG 71632 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:35:58.812Z DEBUG 71632 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:35:58.834Z DEBUG 71632 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:35:58.872Z DEBUG 71632 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:35:58.933Z  INFO 71632 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:35:58.982Z  INFO 71632 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 2.293 seconds (process running for 3.443)
2025-11-02T22:35:59.006Z DEBUG 71632 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7, started on Sun Nov 02 22:35:56 WET 2025
2025-11-02T22:35:59.008Z  INFO 71632 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:35:59.012Z  INFO 71632 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:35:59.014Z  INFO 71632 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:37:19.615Z  INFO 72234 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 72234 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:37:19.616Z  INFO 72234 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:37:19.632Z DEBUG 72234 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7
2025-11-02T22:37:19.952Z  INFO 72234 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:37:19.983Z  INFO 72234 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-11-02T22:37:20.234Z  INFO 72234 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:37:20.268Z  INFO 72234 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:37:20.308Z  INFO 72234 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:37:20.370Z  INFO 72234 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:37:20.384Z  INFO 72234 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:37:20.480Z  INFO 72234 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:37:20.482Z  INFO 72234 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:37:20.493Z  WARN 72234 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:37:20.502Z  INFO 72234 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:37:20.868Z  INFO 72234 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:37:20.897Z  INFO 72234 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:37:21.087Z  INFO 72234 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:37:21.501Z  WARN 72234 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:37:21.542Z DEBUG 72234 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:37:21.583Z DEBUG 72234 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:37:21.599Z DEBUG 72234 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:37:21.626Z DEBUG 72234 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:37:21.673Z  INFO 72234 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:37:21.715Z  INFO 72234 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 2.267 seconds (process running for 3.357)
2025-11-02T22:37:21.738Z DEBUG 72234 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4c6b4ed7, started on Sun Nov 02 22:37:19 WET 2025
2025-11-02T22:37:21.741Z  INFO 72234 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:37:21.744Z  INFO 72234 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:37:21.746Z  INFO 72234 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:38:02.542Z  INFO 72673 --- [main] p.r.h.i.BookingControllerITest           : Starting BookingControllerITest using Java 21.0.9-ea with PID 72673 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:38:02.543Z  INFO 72673 --- [main] p.r.h.i.BookingControllerITest           : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:38:02.550Z DEBUG 72673 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6215366a
2025-11-02T22:38:02.864Z  INFO 72673 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:38:02.894Z  INFO 72673 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-11-02T22:38:03.152Z  INFO 72673 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:38:03.179Z  INFO 72673 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:38:03.199Z  INFO 72673 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:38:03.257Z  INFO 72673 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:38:03.272Z  INFO 72673 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:38:03.358Z  INFO 72673 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:38:03.360Z  INFO 72673 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:38:03.371Z  WARN 72673 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:38:03.381Z  INFO 72673 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:38:03.740Z  INFO 72673 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:38:03.768Z  INFO 72673 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:38:03.949Z  INFO 72673 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:38:04.334Z  WARN 72673 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:38:04.378Z DEBUG 72673 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:38:04.420Z DEBUG 72673 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:38:04.440Z DEBUG 72673 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:38:04.474Z DEBUG 72673 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:38:04.533Z  INFO 72673 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:38:04.576Z  INFO 72673 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-02T22:38:04.577Z  INFO 72673 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-02T22:38:04.577Z  INFO 72673 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-02T22:38:04.595Z  INFO 72673 --- [main] p.r.h.i.BookingControllerITest           : Started BookingControllerITest in 2.225 seconds (process running for 3.453)
2025-11-02T22:38:04.623Z DEBUG 72673 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:38:04.658Z DEBUG 72673 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6dd8dfe5]
2025-11-02T22:38:04.661Z  INFO 72673 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:38:04.661Z  INFO 72673 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-20, timeslot=Manhã, description=Booking 1
2025-11-02T22:38:04.665Z  INFO 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-02T22:38:04.665Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:38:04.721Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:38:04.724Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:38:05.080Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:38:05.081Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:38:05.083Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:38:05.083Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:38:05.140Z  INFO 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-02T22:38:05.170Z  INFO 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c67c2754-e61b-4fa5-9e20-6310f5b7cfaa
2025-11-02T22:38:05.186Z DEBUG 72673 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:38:05.187Z DEBUG 72673 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@24c00206]
2025-11-02T22:38:05.223Z DEBUG 72673 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:38:05.224Z DEBUG 72673 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4e6b3894]
2025-11-02T22:38:05.224Z  INFO 72673 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:38:05.224Z  INFO 72673 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Bragaa, date=2025-12-01, timeslot=Manhã, description=Teste integração
2025-11-02T22:38:05.224Z  INFO 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Bragaa, date: 2025-12-01
2025-11-02T22:38:05.224Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:38:05.225Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:38:05.225Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:38:05.282Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:38:05.284Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:38:05.286Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:38:05.286Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:38:05.287Z  WARN 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Invalid municipality attempted: Bragaa
2025-11-02T22:38:05.290Z ERROR 72673 --- [main] p.r.h.controllers.BookingController      : Validation error: Invalid municipality: Bragaa
2025-11-02T22:38:05.291Z DEBUG 72673 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:38:05.292Z DEBUG 72673 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:38:05.307Z DEBUG 72673 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-02T22:38:05.309Z  INFO 72673 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-02T22:38:05.310Z  INFO 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-02T22:38:05.313Z ERROR 72673 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-02T22:38:05.314Z DEBUG 72673 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:38:05.314Z DEBUG 72673 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:38:05.320Z DEBUG 72673 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:38:05.320Z DEBUG 72673 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7decdae9]
2025-11-02T22:38:05.321Z  INFO 72673 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:38:05.321Z  INFO 72673 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Lisboa, date=2025-12-25, timeslot=Manhã, description=Teste update estado
2025-11-02T22:38:05.321Z  INFO 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-02T22:38:05.321Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:38:05.322Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:38:05.322Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:38:05.380Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:38:05.382Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:38:05.384Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:38:05.384Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:38:05.390Z  INFO 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-02T22:38:05.395Z  INFO 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: e2c646df-e498-495d-bc4b-b52436504f7e
2025-11-02T22:38:05.397Z DEBUG 72673 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:38:05.398Z DEBUG 72673 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@40f9f97e]
2025-11-02T22:38:05.415Z DEBUG 72673 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:38:05.417Z DEBUG 72673 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@66579498]
2025-11-02T22:38:05.417Z  INFO 72673 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:38:05.417Z  INFO 72673 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-15, timeslot=Tarde, description=Teste GET por token
2025-11-02T22:38:05.418Z  INFO 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-02T22:38:05.418Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:38:05.418Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:38:05.419Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:38:05.476Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:38:05.477Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:38:05.478Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:38:05.478Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:38:05.481Z  INFO 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-02T22:38:05.488Z  INFO 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 05a97c7f-d677-4c3a-afae-21d4e5798e08
2025-11-02T22:38:05.491Z DEBUG 72673 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:38:05.491Z DEBUG 72673 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@24ab86eb]
2025-11-02T22:38:05.502Z DEBUG 72673 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:38:05.503Z DEBUG 72673 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@580cb668]
2025-11-02T22:38:05.503Z  INFO 72673 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:38:05.503Z  INFO 72673 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2020-01-01, timeslot=Manhã, description=Data passada
2025-11-02T22:38:05.503Z  INFO 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-02T22:38:05.503Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:38:05.504Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:38:05.504Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:38:05.561Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:38:05.562Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:38:05.563Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:38:05.564Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:38:05.564Z  WARN 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-02T22:38:05.565Z ERROR 72673 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-02T22:38:05.565Z DEBUG 72673 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:38:05.566Z DEBUG 72673 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:38:05.589Z DEBUG 72673 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:38:05.590Z DEBUG 72673 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4b2c1cbf]
2025-11-02T22:38:05.590Z  INFO 72673 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:38:05.590Z  INFO 72673 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Coimbra, date=2025-12-30, timeslot=Tarde, description=Teste estado inválido
2025-11-02T22:38:05.590Z  INFO 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-02T22:38:05.590Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:38:05.591Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:38:05.591Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:38:05.648Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:38:05.650Z DEBUG 72673 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:38:05.651Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:38:05.651Z  INFO 72673 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:38:05.654Z  INFO 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-02T22:38:05.661Z  INFO 72673 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: b6adb170-1487-4d90-97d1-cafa51a9e0a7
2025-11-02T22:38:05.662Z DEBUG 72673 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:38:05.663Z DEBUG 72673 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2465e8be]
2025-11-02T22:38:05.675Z  INFO 72673 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-02T22:38:05.681Z  INFO 72673 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-02T22:38:05.685Z  INFO 72673 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-02T22:38:05.702Z  INFO 72673 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 72673 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:38:05.702Z  INFO 72673 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:38:05.703Z DEBUG 72673 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@411b4a70
2025-11-02T22:38:05.768Z  INFO 72673 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:38:05.773Z  INFO 72673 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-02T22:38:05.813Z  INFO 72673 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:38:05.814Z  INFO 72673 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:38:05.818Z  INFO 72673 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:38:05.818Z  INFO 72673 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-02T22:38:05.819Z  INFO 72673 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:38:05.819Z  INFO 72673 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-02T22:38:05.820Z  WARN 72673 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:38:05.820Z  INFO 72673 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:38:05.842Z  INFO 72673 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:38:05.847Z  INFO 72673 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:38:05.884Z  WARN 72673 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:38:05.895Z DEBUG 72673 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:38:05.903Z DEBUG 72673 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:38:05.907Z DEBUG 72673 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:38:05.910Z DEBUG 72673 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:38:05.925Z  INFO 72673 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:38:05.946Z  INFO 72673 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.26 seconds (process running for 4.803)
2025-11-02T22:38:05.957Z DEBUG 72673 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6215366a, started on Sun Nov 02 22:38:02 WET 2025
2025-11-02T22:38:05.966Z  INFO 72673 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:38:05.970Z  INFO 72673 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:38:05.971Z  INFO 72673 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:38:05.972Z DEBUG 72673 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@411b4a70, started on Sun Nov 02 22:38:05 WET 2025
2025-11-02T22:38:05.973Z  INFO 72673 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:38:05.974Z  INFO 72673 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-02T22:38:05.981Z  INFO 72673 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-02T22:38:31.749Z  INFO 73050 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 73050 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:38:31.750Z  INFO 73050 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:38:31.758Z DEBUG 73050 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6215366a
2025-11-02T22:38:32.078Z  INFO 73050 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:38:32.115Z  INFO 73050 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 30 ms. Found 2 JPA repository interfaces.
2025-11-02T22:38:32.378Z  INFO 73050 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:38:32.407Z  INFO 73050 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:38:32.426Z  INFO 73050 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:38:32.479Z  INFO 73050 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:38:32.492Z  INFO 73050 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:38:32.575Z  INFO 73050 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:38:32.576Z  INFO 73050 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:38:32.586Z  WARN 73050 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:38:32.594Z  INFO 73050 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:38:32.951Z  INFO 73050 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:38:32.977Z  INFO 73050 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:38:33.181Z  INFO 73050 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:38:33.609Z  WARN 73050 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:38:33.656Z DEBUG 73050 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:38:33.702Z DEBUG 73050 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:38:33.725Z DEBUG 73050 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:38:33.761Z DEBUG 73050 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:38:33.811Z  INFO 73050 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:38:33.850Z  INFO 73050 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-02T22:38:33.850Z  INFO 73050 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-02T22:38:33.851Z  INFO 73050 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-02T22:38:33.868Z  INFO 73050 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.298 seconds (process running for 3.461)
2025-11-02T22:38:33.894Z DEBUG 73050 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:38:33.934Z DEBUG 73050 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2e5f860b]
2025-11-02T22:38:33.936Z  INFO 73050 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:38:33.937Z  INFO 73050 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-20, timeslot=Manhã, description=Booking 1
2025-11-02T22:38:33.940Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-02T22:38:33.940Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:38:33.989Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:38:33.992Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:38:34.304Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:38:34.305Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:38:34.307Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:38:34.307Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:38:34.352Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-02T22:38:34.378Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: eab10127-0a0b-470c-93b9-453589dcf47c
2025-11-02T22:38:34.393Z DEBUG 73050 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:38:34.393Z DEBUG 73050 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@22d178d3]
2025-11-02T22:38:34.431Z DEBUG 73050 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:38:34.432Z DEBUG 73050 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@67feb5d0]
2025-11-02T22:38:34.432Z  INFO 73050 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:38:34.432Z  INFO 73050 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-01, timeslot=Manhã, description=Teste integração
2025-11-02T22:38:34.432Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-02T22:38:34.432Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:38:34.433Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:38:34.433Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:38:34.485Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:38:34.486Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:38:34.488Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:38:34.489Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:38:34.490Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-02T22:38:34.492Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0f28d555-3851-4923-893c-cb68d5bab5cd
2025-11-02T22:38:34.493Z DEBUG 73050 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:38:34.493Z DEBUG 73050 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6d82a9bb]
2025-11-02T22:38:34.501Z DEBUG 73050 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-02T22:38:34.503Z  INFO 73050 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-02T22:38:34.503Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-02T22:38:34.507Z ERROR 73050 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-02T22:38:34.508Z DEBUG 73050 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:38:34.508Z DEBUG 73050 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:38:34.513Z DEBUG 73050 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:38:34.514Z DEBUG 73050 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1e098fc5]
2025-11-02T22:38:34.514Z  INFO 73050 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:38:34.514Z  INFO 73050 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Lisboa, date=2025-12-25, timeslot=Manhã, description=Teste update estado
2025-11-02T22:38:34.514Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-02T22:38:34.514Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:38:34.515Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:38:34.515Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:38:34.569Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:38:34.570Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:38:34.571Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:38:34.572Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:38:34.573Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-02T22:38:34.578Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d6e926f1-1157-418d-9571-77c3c9464a65
2025-11-02T22:38:34.580Z DEBUG 73050 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:38:34.580Z DEBUG 73050 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@790ed2d9]
2025-11-02T22:38:34.592Z DEBUG 73050 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:38:34.594Z DEBUG 73050 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@203ad254]
2025-11-02T22:38:34.594Z  INFO 73050 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:38:34.594Z  INFO 73050 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-15, timeslot=Tarde, description=Teste GET por token
2025-11-02T22:38:34.595Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-02T22:38:34.595Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:38:34.596Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:38:34.596Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:38:34.647Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:38:34.648Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:38:34.648Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:38:34.648Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:38:34.649Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-02T22:38:34.651Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d711ad31-1f58-4866-88c9-4306e0aa33d7
2025-11-02T22:38:34.652Z DEBUG 73050 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:38:34.652Z DEBUG 73050 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@23885f6a]
2025-11-02T22:38:34.660Z DEBUG 73050 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:38:34.660Z DEBUG 73050 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@15be8dc4]
2025-11-02T22:38:34.660Z  INFO 73050 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:38:34.661Z  INFO 73050 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2020-01-01, timeslot=Manhã, description=Data passada
2025-11-02T22:38:34.661Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-02T22:38:34.661Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:38:34.661Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:38:34.661Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:38:34.713Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:38:34.714Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:38:34.715Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:38:34.715Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:38:34.715Z  WARN 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-02T22:38:34.718Z ERROR 73050 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-02T22:38:34.718Z DEBUG 73050 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:38:34.718Z DEBUG 73050 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:38:34.739Z DEBUG 73050 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:38:34.740Z DEBUG 73050 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@88edd90]
2025-11-02T22:38:34.740Z  INFO 73050 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:38:34.740Z  INFO 73050 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Coimbra, date=2025-12-30, timeslot=Tarde, description=Teste estado inválido
2025-11-02T22:38:34.740Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-02T22:38:34.740Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:38:34.740Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:38:34.740Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:38:34.793Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:38:34.795Z DEBUG 73050 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:38:34.796Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:38:34.796Z  INFO 73050 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:38:34.800Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-02T22:38:34.807Z  INFO 73050 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 7061d379-f05b-49cb-8012-dc9c8a64a064
2025-11-02T22:38:34.809Z DEBUG 73050 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:38:34.809Z DEBUG 73050 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@27b5c8d0]
2025-11-02T22:38:34.820Z  INFO 73050 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-02T22:38:34.825Z  INFO 73050 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-02T22:38:34.828Z  INFO 73050 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-02T22:38:34.840Z  INFO 73050 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 73050 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:38:34.840Z  INFO 73050 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:38:34.841Z DEBUG 73050 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4bd06a2f
2025-11-02T22:38:34.926Z  INFO 73050 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:38:34.931Z  INFO 73050 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-02T22:38:34.971Z  INFO 73050 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:38:34.972Z  INFO 73050 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:38:34.976Z  INFO 73050 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:38:34.976Z  INFO 73050 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-02T22:38:34.977Z  INFO 73050 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:38:34.977Z  INFO 73050 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-02T22:38:34.977Z  WARN 73050 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:38:34.978Z  INFO 73050 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:38:34.997Z  INFO 73050 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:38:35.001Z  INFO 73050 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:38:35.045Z  WARN 73050 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:38:35.055Z DEBUG 73050 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:38:35.062Z DEBUG 73050 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:38:35.066Z DEBUG 73050 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:38:35.069Z DEBUG 73050 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:38:35.085Z  INFO 73050 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:38:35.094Z  INFO 73050 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.265 seconds (process running for 4.686)
2025-11-02T22:38:35.104Z DEBUG 73050 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6215366a, started on Sun Nov 02 22:38:31 WET 2025
2025-11-02T22:38:35.105Z  INFO 73050 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:38:35.108Z  INFO 73050 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:38:35.109Z  INFO 73050 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:38:35.110Z DEBUG 73050 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4bd06a2f, started on Sun Nov 02 22:38:34 WET 2025
2025-11-02T22:38:35.111Z  INFO 73050 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:38:35.111Z  INFO 73050 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-02T22:38:35.139Z  INFO 73050 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-02T22:38:58.805Z  INFO 73405 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 73405 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:38:58.806Z  INFO 73405 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:38:58.813Z DEBUG 73405 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6215366a
2025-11-02T22:38:59.140Z  INFO 73405 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:38:59.175Z  INFO 73405 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-11-02T22:38:59.442Z  INFO 73405 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:38:59.466Z  INFO 73405 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:38:59.481Z  INFO 73405 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:38:59.534Z  INFO 73405 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:38:59.547Z  INFO 73405 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:38:59.639Z  INFO 73405 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:38:59.640Z  INFO 73405 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:38:59.651Z  WARN 73405 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:38:59.661Z  INFO 73405 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:39:00.023Z  INFO 73405 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:39:00.055Z  INFO 73405 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:39:00.292Z  INFO 73405 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:39:00.720Z  WARN 73405 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:39:00.761Z DEBUG 73405 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:39:00.807Z DEBUG 73405 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:39:00.831Z DEBUG 73405 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:39:00.879Z DEBUG 73405 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:39:00.947Z  INFO 73405 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:39:01.006Z  INFO 73405 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-02T22:39:01.006Z  INFO 73405 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-02T22:39:01.007Z  INFO 73405 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-02T22:39:01.028Z  INFO 73405 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.394 seconds (process running for 3.506)
2025-11-02T22:39:01.059Z DEBUG 73405 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:39:01.098Z DEBUG 73405 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6dd8dfe5]
2025-11-02T22:39:01.101Z  INFO 73405 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:39:01.101Z  INFO 73405 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-20, timeslot=Manhã, description=Booking 1
2025-11-02T22:39:01.104Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-02T22:39:01.105Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:39:01.161Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:39:01.164Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:39:01.454Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:39:01.455Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:39:01.458Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:39:01.458Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:39:01.509Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-02T22:39:01.540Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 58da14e9-fb22-4b7b-8aa9-1f3d8cd7652e
2025-11-02T22:39:01.556Z DEBUG 73405 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:39:01.557Z DEBUG 73405 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@24c00206]
2025-11-02T22:39:01.596Z DEBUG 73405 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:39:01.597Z DEBUG 73405 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4e6b3894]
2025-11-02T22:39:01.597Z  INFO 73405 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:39:01.597Z  INFO 73405 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-01, timeslot=Manhã, description=Teste integração
2025-11-02T22:39:01.598Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-02T22:39:01.598Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:39:01.598Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:39:01.598Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:39:01.656Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:39:01.657Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:39:01.658Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:39:01.659Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:39:01.662Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-02T22:39:01.664Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: b2251f23-69f6-4642-97b4-5937fbb0f9cb
2025-11-02T22:39:01.666Z DEBUG 73405 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:39:01.666Z DEBUG 73405 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@67feb5d0]
2025-11-02T22:39:01.679Z DEBUG 73405 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-02T22:39:01.681Z  INFO 73405 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-02T22:39:01.681Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-02T22:39:01.685Z ERROR 73405 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-02T22:39:01.685Z DEBUG 73405 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:39:01.685Z DEBUG 73405 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:39:01.692Z DEBUG 73405 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:39:01.693Z DEBUG 73405 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4499e444]
2025-11-02T22:39:01.693Z  INFO 73405 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:39:01.693Z  INFO 73405 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Lisboa, date=2025-12-25, timeslot=Manhã, description=Teste update estado
2025-11-02T22:39:01.693Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-02T22:39:01.693Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:39:01.694Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:39:01.694Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:39:01.751Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:39:01.751Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:39:01.752Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:39:01.752Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:39:01.753Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-02T22:39:01.755Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 87738dee-f612-4b4d-b810-2798ee0438f7
2025-11-02T22:39:01.756Z DEBUG 73405 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:39:01.756Z DEBUG 73405 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@673e239b]
2025-11-02T22:39:01.766Z DEBUG 73405 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:39:01.767Z DEBUG 73405 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4a8d6ad4]
2025-11-02T22:39:01.767Z  INFO 73405 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:39:01.767Z  INFO 73405 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-15, timeslot=Tarde, description=Teste GET por token
2025-11-02T22:39:01.767Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-02T22:39:01.767Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:39:01.767Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:39:01.768Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:39:01.827Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:39:01.828Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:39:01.830Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:39:01.830Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:39:01.833Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-02T22:39:01.839Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: c327ebb7-900a-4bac-8e7b-8075497241f5
2025-11-02T22:39:01.841Z DEBUG 73405 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:39:01.841Z DEBUG 73405 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6642ea55]
2025-11-02T22:39:01.864Z DEBUG 73405 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:39:01.866Z DEBUG 73405 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@5970734c]
2025-11-02T22:39:01.866Z  INFO 73405 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:39:01.866Z  INFO 73405 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2020-01-01, timeslot=Manhã, description=Data passada
2025-11-02T22:39:01.866Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-02T22:39:01.866Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:39:01.867Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:39:01.867Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:39:01.933Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:39:01.934Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:39:01.935Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:39:01.935Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:39:01.936Z  WARN 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-02T22:39:01.939Z ERROR 73405 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-02T22:39:01.939Z DEBUG 73405 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:39:01.939Z DEBUG 73405 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:39:01.966Z DEBUG 73405 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:39:01.967Z DEBUG 73405 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@56d70e0d]
2025-11-02T22:39:01.967Z  INFO 73405 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:39:01.967Z  INFO 73405 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Coimbra, date=2025-12-30, timeslot=Tarde, description=Teste estado inválido
2025-11-02T22:39:01.967Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-02T22:39:01.967Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:39:01.968Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:39:01.968Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:39:02.027Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:39:02.028Z DEBUG 73405 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:39:02.029Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:39:02.029Z  INFO 73405 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:39:02.032Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-02T22:39:02.036Z  INFO 73405 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0118bec4-c338-42a0-97d9-41a15d4acd04
2025-11-02T22:39:02.037Z DEBUG 73405 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:39:02.037Z DEBUG 73405 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@4acdc330]
2025-11-02T22:39:02.047Z  INFO 73405 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-02T22:39:02.050Z  INFO 73405 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-02T22:39:02.053Z  INFO 73405 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-02T22:39:02.068Z  INFO 73405 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 73405 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:39:02.068Z  INFO 73405 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:39:02.069Z DEBUG 73405 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6fd33f5a
2025-11-02T22:39:02.144Z  INFO 73405 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:39:02.150Z  INFO 73405 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-02T22:39:02.195Z  INFO 73405 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:39:02.196Z  INFO 73405 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:39:02.201Z  INFO 73405 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:39:02.202Z  INFO 73405 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-02T22:39:02.203Z  INFO 73405 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:39:02.203Z  INFO 73405 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-02T22:39:02.203Z  WARN 73405 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:39:02.204Z  INFO 73405 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:39:02.228Z  INFO 73405 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:39:02.233Z  INFO 73405 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:39:02.270Z  WARN 73405 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:39:02.281Z DEBUG 73405 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:39:02.289Z DEBUG 73405 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:39:02.292Z DEBUG 73405 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:39:02.295Z DEBUG 73405 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:39:02.314Z  INFO 73405 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:39:02.327Z  INFO 73405 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.274 seconds (process running for 4.805)
2025-11-02T22:39:02.335Z DEBUG 73405 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6215366a, started on Sun Nov 02 22:38:58 WET 2025
2025-11-02T22:39:02.337Z  INFO 73405 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:39:02.340Z  INFO 73405 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:39:02.341Z  INFO 73405 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:39:02.341Z DEBUG 73405 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6fd33f5a, started on Sun Nov 02 22:39:02 WET 2025
2025-11-02T22:39:02.342Z  INFO 73405 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:39:02.343Z  INFO 73405 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-02T22:39:02.365Z  INFO 73405 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-02T22:40:57.918Z  INFO 74203 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 74203 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:40:57.919Z  INFO 74203 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:40:57.926Z DEBUG 74203 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6215366a
2025-11-02T22:40:58.245Z  INFO 74203 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:40:58.278Z  INFO 74203 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-11-02T22:40:58.555Z  INFO 74203 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:40:58.578Z  INFO 74203 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:40:58.593Z  INFO 74203 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:40:58.648Z  INFO 74203 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:40:58.663Z  INFO 74203 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:40:58.750Z  INFO 74203 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:40:58.751Z  INFO 74203 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:40:58.762Z  WARN 74203 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:40:58.771Z  INFO 74203 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:40:59.134Z  INFO 74203 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:40:59.161Z  INFO 74203 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:40:59.324Z  INFO 74203 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:40:59.744Z  WARN 74203 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:40:59.793Z DEBUG 74203 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:40:59.870Z DEBUG 74203 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:40:59.889Z DEBUG 74203 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:40:59.929Z DEBUG 74203 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:40:59.990Z  INFO 74203 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:41:00.031Z  INFO 74203 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-02T22:41:00.031Z  INFO 74203 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-02T22:41:00.032Z  INFO 74203 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-02T22:41:00.050Z  INFO 74203 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.307 seconds (process running for 3.457)
2025-11-02T22:41:00.079Z DEBUG 74203 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:41:00.119Z DEBUG 74203 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2489ee11]
2025-11-02T22:41:00.122Z  INFO 74203 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:41:00.123Z  INFO 74203 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-20, timeslot=Manhã, description=Booking 1
2025-11-02T22:41:00.126Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-02T22:41:00.126Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:41:00.177Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:41:00.180Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:41:00.775Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:41:00.776Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:41:00.778Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:41:00.778Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:41:00.853Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-02T22:41:00.883Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d78073d9-cfc8-4ad8-a45e-c56463107ebc
2025-11-02T22:41:00.902Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:41:00.903Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1fa51751]
2025-11-02T22:41:00.942Z DEBUG 74203 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:41:00.943Z DEBUG 74203 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@18092b96]
2025-11-02T22:41:00.943Z  INFO 74203 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:41:00.943Z  INFO 74203 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-01, timeslot=Manhã, description=Teste integração
2025-11-02T22:41:00.944Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-02T22:41:00.944Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:41:00.944Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:41:00.944Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:41:00.995Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:41:00.996Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:41:00.998Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:41:00.998Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:41:01.003Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-02T22:41:01.010Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 34c31d10-6439-46d6-9551-30ab5da3cc11
2025-11-02T22:41:01.013Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:41:01.014Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@521a3128]
2025-11-02T22:41:01.044Z DEBUG 74203 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-02T22:41:01.046Z  INFO 74203 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-02T22:41:01.046Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-02T22:41:01.050Z ERROR 74203 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-02T22:41:01.050Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:41:01.050Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:41:01.056Z DEBUG 74203 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:41:01.057Z DEBUG 74203 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@33ed34a9]
2025-11-02T22:41:01.057Z  INFO 74203 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:41:01.057Z  INFO 74203 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Lisboa, date=2025-12-25, timeslot=Manhã, description=Teste update estado
2025-11-02T22:41:01.057Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-02T22:41:01.057Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:41:01.058Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:41:01.058Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:41:01.106Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:41:01.106Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:41:01.107Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:41:01.107Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:41:01.108Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-02T22:41:01.110Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 5e02fe27-1249-42e1-bc48-a96797164a8f
2025-11-02T22:41:01.110Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:41:01.111Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@d9c54e6]
2025-11-02T22:41:01.113Z DEBUG 74203 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-02T22:41:01.114Z DEBUG 74203 --- [main] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-11-02T22:41:01.115Z DEBUG 74203 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/bookings/5e02fe27-1249-42e1-bc48-a96797164a8f/state.]
2025-11-02T22:41:01.124Z DEBUG 74203 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:41:01.125Z DEBUG 74203 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6b092322]
2025-11-02T22:41:01.126Z  INFO 74203 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:41:01.126Z  INFO 74203 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-15, timeslot=Tarde, description=Teste GET por token
2025-11-02T22:41:01.126Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-02T22:41:01.126Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:41:01.126Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:41:01.127Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:41:01.178Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:41:01.179Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:41:01.181Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:41:01.182Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:41:01.185Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-02T22:41:01.191Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: a65087c8-fda1-4261-b4e3-0f6964daac9a
2025-11-02T22:41:01.192Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:41:01.192Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@38ffec31]
2025-11-02T22:41:01.194Z DEBUG 74203 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-02T22:41:01.195Z  INFO 74203 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/a65087c8-fda1-4261-b4e3-0f6964daac9a - Fetching booking
2025-11-02T22:41:01.195Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: a65087c8-fda1-4261-b4e3-0f6964daac9a
2025-11-02T22:41:01.197Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:41:01.197Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5ed48fd4]
2025-11-02T22:41:01.205Z DEBUG 74203 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:41:01.206Z DEBUG 74203 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@787031a]
2025-11-02T22:41:01.206Z  INFO 74203 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:41:01.206Z  INFO 74203 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2020-01-01, timeslot=Manhã, description=Data passada
2025-11-02T22:41:01.206Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-02T22:41:01.207Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:41:01.207Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:41:01.207Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:41:01.255Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:41:01.256Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:41:01.257Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:41:01.257Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:41:01.257Z  WARN 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-02T22:41:01.259Z ERROR 74203 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-02T22:41:01.260Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:41:01.261Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:41:01.270Z DEBUG 74203 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:41:01.271Z DEBUG 74203 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@433ae644]
2025-11-02T22:41:01.271Z  INFO 74203 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:41:01.271Z  INFO 74203 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Coimbra, date=2025-12-30, timeslot=Tarde, description=Teste estado inválido
2025-11-02T22:41:01.271Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-02T22:41:01.271Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:41:01.271Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:41:01.272Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:41:01.321Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:41:01.321Z DEBUG 74203 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:41:01.323Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:41:01.323Z  INFO 74203 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:41:01.325Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-02T22:41:01.329Z  INFO 74203 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: e96fc5b3-dbf8-4d63-b2d9-9f3fb1ea8b81
2025-11-02T22:41:01.330Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:41:01.330Z DEBUG 74203 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@203737fb]
2025-11-02T22:41:01.332Z DEBUG 74203 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-11-02T22:41:01.333Z DEBUG 74203 --- [main] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-11-02T22:41:01.333Z DEBUG 74203 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/bookings/e96fc5b3-dbf8-4d63-b2d9-9f3fb1ea8b81/state.]
2025-11-02T22:41:01.341Z  INFO 74203 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-02T22:41:01.344Z  INFO 74203 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-02T22:41:01.347Z  INFO 74203 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-02T22:41:01.361Z  INFO 74203 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 74203 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:41:01.361Z  INFO 74203 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:41:01.362Z DEBUG 74203 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@79b24f79
2025-11-02T22:41:01.427Z  INFO 74203 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:41:01.432Z  INFO 74203 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-02T22:41:01.480Z  INFO 74203 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:41:01.481Z  INFO 74203 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:41:01.484Z  INFO 74203 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:41:01.485Z  INFO 74203 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-02T22:41:01.486Z  INFO 74203 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:41:01.486Z  INFO 74203 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-02T22:41:01.486Z  WARN 74203 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:41:01.486Z  INFO 74203 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:41:01.508Z  INFO 74203 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:41:01.513Z  INFO 74203 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:41:01.546Z  WARN 74203 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:41:01.555Z DEBUG 74203 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:41:01.562Z DEBUG 74203 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:41:01.564Z DEBUG 74203 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:41:01.567Z DEBUG 74203 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:41:01.579Z  INFO 74203 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:41:01.587Z  INFO 74203 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.24 seconds (process running for 4.995)
2025-11-02T22:41:01.597Z DEBUG 74203 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6215366a, started on Sun Nov 02 22:40:57 WET 2025
2025-11-02T22:41:01.600Z  INFO 74203 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:41:01.603Z  INFO 74203 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:41:01.604Z  INFO 74203 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:41:01.604Z DEBUG 74203 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@79b24f79, started on Sun Nov 02 22:41:01 WET 2025
2025-11-02T22:41:01.605Z  INFO 74203 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:41:01.606Z  INFO 74203 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-02T22:41:01.617Z  INFO 74203 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-02T22:47:20.654Z  INFO 76362 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 76362 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:47:20.655Z  INFO 76362 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:47:20.664Z DEBUG 76362 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6215366a
2025-11-02T22:47:20.999Z  INFO 76362 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:47:21.030Z  INFO 76362 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-11-02T22:47:21.317Z  INFO 76362 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:47:21.341Z  INFO 76362 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:47:21.357Z  INFO 76362 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:47:21.407Z  INFO 76362 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:47:21.421Z  INFO 76362 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:47:21.513Z  INFO 76362 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:47:21.514Z  INFO 76362 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:47:21.525Z  WARN 76362 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:47:21.535Z  INFO 76362 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:47:21.893Z  INFO 76362 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:47:21.921Z  INFO 76362 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:47:22.126Z  INFO 76362 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:47:22.559Z  WARN 76362 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:47:22.604Z DEBUG 76362 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:47:22.653Z DEBUG 76362 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:47:22.676Z DEBUG 76362 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:47:22.718Z DEBUG 76362 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:47:22.785Z  INFO 76362 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:47:22.842Z  INFO 76362 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-02T22:47:22.842Z  INFO 76362 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-02T22:47:22.843Z  INFO 76362 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-02T22:47:22.862Z  INFO 76362 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.383 seconds (process running for 3.592)
2025-11-02T22:47:22.894Z DEBUG 76362 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:47:22.933Z DEBUG 76362 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2489ee11]
2025-11-02T22:47:22.936Z  INFO 76362 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:47:22.936Z  INFO 76362 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-20, timeslot=Manhã, description=Booking 1
2025-11-02T22:47:22.940Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-02T22:47:22.940Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:47:22.997Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:47:23.001Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:47:23.276Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:47:23.278Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:47:23.282Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:47:23.282Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:47:23.328Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-02T22:47:23.364Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: b9ca0e09-36ac-481e-8c04-05bf5d4fcb84
2025-11-02T22:47:23.379Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:47:23.380Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1fa51751]
2025-11-02T22:47:23.418Z DEBUG 76362 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:47:23.419Z DEBUG 76362 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@18092b96]
2025-11-02T22:47:23.419Z  INFO 76362 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:47:23.419Z  INFO 76362 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-01, timeslot=Manhã, description=Teste integração
2025-11-02T22:47:23.419Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-02T22:47:23.419Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:47:23.420Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:47:23.420Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:47:23.473Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:47:23.474Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:47:23.477Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:47:23.477Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:47:23.482Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-02T22:47:23.488Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 9daa0e57-99ca-40ef-acb1-a34ef46b9644
2025-11-02T22:47:23.489Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:47:23.490Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@521a3128]
2025-11-02T22:47:23.513Z DEBUG 76362 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-02T22:47:23.516Z  INFO 76362 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-02T22:47:23.516Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-02T22:47:23.519Z ERROR 76362 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-02T22:47:23.520Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:47:23.520Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:47:23.525Z DEBUG 76362 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:47:23.526Z DEBUG 76362 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@33ed34a9]
2025-11-02T22:47:23.526Z  INFO 76362 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:47:23.526Z  INFO 76362 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Lisboa, date=2025-12-25, timeslot=Manhã, description=Teste update estado
2025-11-02T22:47:23.526Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-02T22:47:23.526Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:47:23.527Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:47:23.527Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:47:23.580Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:47:23.582Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:47:23.583Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:47:23.584Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:47:23.587Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-02T22:47:23.594Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 3b7fbf1f-b565-4180-bc04-5963068c222d
2025-11-02T22:47:23.596Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:47:23.596Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@d9c54e6]
2025-11-02T22:47:23.600Z DEBUG 76362 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-02T22:47:23.602Z DEBUG 76362 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-02T22:47:23.605Z  WARN 76362 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-02T22:47:23.614Z DEBUG 76362 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:47:23.615Z DEBUG 76362 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@593ed55b]
2025-11-02T22:47:23.615Z  INFO 76362 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:47:23.615Z  INFO 76362 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-15, timeslot=Tarde, description=Teste GET por token
2025-11-02T22:47:23.615Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-02T22:47:23.615Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:47:23.615Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:47:23.616Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:47:23.700Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:47:23.701Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:47:23.702Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:47:23.703Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:47:23.705Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-02T22:47:23.711Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: beec6307-bc48-4ecb-b8ec-f2978b3fe007
2025-11-02T22:47:23.714Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:47:23.714Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@56d70e0d]
2025-11-02T22:47:23.717Z DEBUG 76362 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-02T22:47:23.718Z  INFO 76362 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/beec6307-bc48-4ecb-b8ec-f2978b3fe007 - Fetching booking
2025-11-02T22:47:23.718Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: beec6307-bc48-4ecb-b8ec-f2978b3fe007
2025-11-02T22:47:23.721Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:47:23.721Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3c16f821]
2025-11-02T22:47:23.730Z DEBUG 76362 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:47:23.730Z DEBUG 76362 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1c0d92e5]
2025-11-02T22:47:23.730Z  INFO 76362 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:47:23.731Z  INFO 76362 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2020-01-01, timeslot=Manhã, description=Data passada
2025-11-02T22:47:23.731Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-02T22:47:23.731Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:47:23.731Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:47:23.731Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:47:23.785Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:47:23.786Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:47:23.787Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:47:23.787Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:47:23.787Z  WARN 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-02T22:47:23.791Z ERROR 76362 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-02T22:47:23.792Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:47:23.793Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:47:23.805Z DEBUG 76362 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:47:23.806Z DEBUG 76362 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2ba8f528]
2025-11-02T22:47:23.806Z  INFO 76362 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:47:23.806Z  INFO 76362 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Coimbra, date=2025-12-30, timeslot=Tarde, description=Teste estado inválido
2025-11-02T22:47:23.806Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-02T22:47:23.806Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:47:23.807Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:47:23.807Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:47:23.860Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:47:23.861Z DEBUG 76362 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:47:23.862Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:47:23.863Z  INFO 76362 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:47:23.866Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-02T22:47:23.872Z  INFO 76362 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 71dfaf49-a8e8-408d-8818-59110f62c74a
2025-11-02T22:47:23.874Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:47:23.874Z DEBUG 76362 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@5bbda7e2]
2025-11-02T22:47:23.876Z DEBUG 76362 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-02T22:47:23.877Z DEBUG 76362 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-02T22:47:23.877Z  WARN 76362 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-02T22:47:23.886Z  INFO 76362 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-02T22:47:23.890Z  INFO 76362 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-02T22:47:23.893Z  INFO 76362 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-02T22:47:23.907Z  INFO 76362 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 76362 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:47:23.907Z  INFO 76362 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:47:23.908Z DEBUG 76362 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@39ad5a7d
2025-11-02T22:47:23.970Z  INFO 76362 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:47:23.975Z  INFO 76362 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-11-02T22:47:24.017Z  INFO 76362 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:47:24.018Z  INFO 76362 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:47:24.022Z  INFO 76362 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:47:24.023Z  INFO 76362 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-02T22:47:24.023Z  INFO 76362 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:47:24.024Z  INFO 76362 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-02T22:47:24.024Z  WARN 76362 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:47:24.024Z  INFO 76362 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:47:24.048Z  INFO 76362 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:47:24.054Z  INFO 76362 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:47:24.095Z  WARN 76362 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:47:24.117Z DEBUG 76362 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:47:24.126Z DEBUG 76362 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:47:24.131Z DEBUG 76362 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:47:24.138Z DEBUG 76362 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:47:24.155Z  INFO 76362 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:47:24.164Z  INFO 76362 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.271 seconds (process running for 4.894)
2025-11-02T22:47:24.182Z DEBUG 76362 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6215366a, started on Sun Nov 02 22:47:20 WET 2025
2025-11-02T22:47:24.184Z  INFO 76362 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:47:24.187Z  INFO 76362 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:47:24.189Z  INFO 76362 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:47:24.190Z DEBUG 76362 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@39ad5a7d, started on Sun Nov 02 22:47:23 WET 2025
2025-11-02T22:47:24.191Z  INFO 76362 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:47:24.191Z  INFO 76362 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-02T22:47:24.216Z  INFO 76362 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-02T22:50:21.032Z  INFO 77477 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 77477 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:50:21.033Z  INFO 77477 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:50:21.040Z DEBUG 77477 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6215366a
2025-11-02T22:50:21.360Z  INFO 77477 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:50:21.392Z  INFO 77477 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-11-02T22:50:21.654Z  INFO 77477 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:50:21.678Z  INFO 77477 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:50:21.699Z  INFO 77477 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:50:21.756Z  INFO 77477 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:50:21.771Z  INFO 77477 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:50:21.864Z  INFO 77477 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:50:21.865Z  INFO 77477 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:50:21.875Z  WARN 77477 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:50:21.885Z  INFO 77477 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:50:22.243Z  INFO 77477 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:50:22.269Z  INFO 77477 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:50:22.463Z  INFO 77477 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:50:22.888Z  WARN 77477 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:50:22.933Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:50:22.979Z DEBUG 77477 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:50:23.002Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:50:23.036Z DEBUG 77477 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:50:23.079Z  INFO 77477 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:50:23.135Z  INFO 77477 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-02T22:50:23.135Z  INFO 77477 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-02T22:50:23.136Z  INFO 77477 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-02T22:50:23.155Z  INFO 77477 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.313 seconds (process running for 3.575)
2025-11-02T22:50:23.182Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:50:23.216Z DEBUG 77477 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2489ee11]
2025-11-02T22:50:23.219Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:50:23.220Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-20, timeslot=Manhã, description=Booking 1
2025-11-02T22:50:23.223Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-02T22:50:23.223Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:50:23.275Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:50:23.279Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:50:23.578Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:50:23.579Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:50:23.583Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:50:23.583Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:50:23.633Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-02T22:50:23.662Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f4a4a335-4c7c-4d58-85c0-202cfaaa8423
2025-11-02T22:50:23.678Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:50:23.678Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1fa51751]
2025-11-02T22:50:23.690Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:50:23.690Z DEBUG 77477 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7d0e5fbb]
2025-11-02T22:50:23.690Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:50:23.691Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-21, timeslot=Tarde, description=Booking 2
2025-11-02T22:50:23.691Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-21
2025-11-02T22:50:23.691Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:50:23.691Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:50:23.691Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:50:23.751Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:50:23.752Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:50:23.754Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:50:23.755Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:50:23.756Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-21: 0/5
2025-11-02T22:50:23.758Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 8228d649-10c6-4124-a4c5-5fe0a9fa1fc6
2025-11-02T22:50:23.758Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:50:23.758Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2dbdd3f2]
2025-11-02T22:50:23.759Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:50:23.760Z DEBUG 77477 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@39716249]
2025-11-02T22:50:23.760Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:50:23.760Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-22, timeslot=Noite, description=Booking Porto
2025-11-02T22:50:23.761Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-22
2025-11-02T22:50:23.761Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:50:23.761Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:50:23.762Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:50:23.821Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:50:23.822Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:50:23.824Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:50:23.824Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:50:23.827Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-22: 0/5
2025-11-02T22:50:23.832Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 0cac3f6d-e62e-4cd5-8d8f-70cd9446c5ce
2025-11-02T22:50:23.834Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:50:23.834Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@33c6625c]
2025-11-02T22:50:23.837Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-02T22:50:23.842Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-02T22:50:23.843Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-02T22:50:23.860Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:50:23.860Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-02T22:50:23.901Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:50:23.902Z DEBUG 77477 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@64aa7a33]
2025-11-02T22:50:23.902Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:50:23.902Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-01, timeslot=Manhã, description=Teste integração
2025-11-02T22:50:23.902Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-02T22:50:23.902Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:50:23.903Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:50:23.903Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:50:23.960Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:50:23.961Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:50:23.962Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:50:23.962Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:50:23.965Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-02T22:50:23.971Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: dd8a902f-5fb9-4049-a6b8-c99d37fa8ae5
2025-11-02T22:50:23.973Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:50:23.974Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@e8574dd]
2025-11-02T22:50:23.984Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-02T22:50:23.984Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-02T22:50:23.984Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-02T22:50:23.987Z ERROR 77477 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-02T22:50:23.987Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:50:23.987Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:50:23.993Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:50:23.993Z DEBUG 77477 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@3fd3d49c]
2025-11-02T22:50:23.993Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:50:23.993Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Lisboa, date=2025-12-25, timeslot=Manhã, description=Teste update estado
2025-11-02T22:50:23.994Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-02T22:50:23.994Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:50:23.994Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:50:23.994Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:50:24.051Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:50:24.052Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:50:24.053Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:50:24.054Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:50:24.056Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-02T22:50:24.062Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 7970296a-1f37-4096-98ed-b10af573ff75
2025-11-02T22:50:24.063Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:50:24.064Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@309ea91f]
2025-11-02T22:50:24.066Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-02T22:50:24.068Z DEBUG 77477 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-02T22:50:24.070Z  WARN 77477 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-02T22:50:24.079Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:50:24.079Z DEBUG 77477 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@357e6334]
2025-11-02T22:50:24.080Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:50:24.080Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-15, timeslot=Tarde, description=Teste GET por token
2025-11-02T22:50:24.080Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-02T22:50:24.080Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:50:24.080Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:50:24.081Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:50:24.138Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:50:24.139Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:50:24.141Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:50:24.141Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:50:24.142Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-02T22:50:24.147Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 928157e6-82ae-42e2-bca4-b45cb7d4ae3a
2025-11-02T22:50:24.148Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:50:24.149Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1a445b5]
2025-11-02T22:50:24.152Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-02T22:50:24.153Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/928157e6-82ae-42e2-bca4-b45cb7d4ae3a - Fetching booking
2025-11-02T22:50:24.153Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 928157e6-82ae-42e2-bca4-b45cb7d4ae3a
2025-11-02T22:50:24.157Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:50:24.157Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@59f41bcf]
2025-11-02T22:50:24.168Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:50:24.169Z DEBUG 77477 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1f32fb77]
2025-11-02T22:50:24.169Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:50:24.169Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2020-01-01, timeslot=Manhã, description=Data passada
2025-11-02T22:50:24.169Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-02T22:50:24.170Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:50:24.170Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:50:24.170Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:50:24.228Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:50:24.229Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:50:24.230Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:50:24.230Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:50:24.231Z  WARN 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-02T22:50:24.234Z ERROR 77477 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-02T22:50:24.235Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:50:24.235Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:50:24.245Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:50:24.246Z DEBUG 77477 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6c88026b]
2025-11-02T22:50:24.246Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:50:24.246Z  INFO 77477 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Coimbra, date=2025-12-30, timeslot=Tarde, description=Teste estado inválido
2025-11-02T22:50:24.247Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-02T22:50:24.247Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:50:24.247Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:50:24.247Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:50:24.303Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:50:24.304Z DEBUG 77477 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:50:24.305Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:50:24.305Z  INFO 77477 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:50:24.309Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-02T22:50:24.315Z  INFO 77477 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 977725c5-4796-4d2d-933f-e0ecc4c62b95
2025-11-02T22:50:24.317Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:50:24.317Z DEBUG 77477 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@162304e3]
2025-11-02T22:50:24.320Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-02T22:50:24.321Z DEBUG 77477 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-02T22:50:24.322Z  WARN 77477 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-02T22:50:24.330Z  INFO 77477 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-02T22:50:24.334Z  INFO 77477 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-02T22:50:24.336Z  INFO 77477 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-02T22:50:24.348Z  INFO 77477 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 77477 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:50:24.348Z  INFO 77477 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:50:24.349Z DEBUG 77477 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3f36d387
2025-11-02T22:50:24.437Z  INFO 77477 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:50:24.443Z  INFO 77477 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-02T22:50:24.491Z  INFO 77477 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:50:24.493Z  INFO 77477 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:50:24.498Z  INFO 77477 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:50:24.498Z  INFO 77477 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-02T22:50:24.499Z  INFO 77477 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:50:24.499Z  INFO 77477 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-02T22:50:24.500Z  WARN 77477 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:50:24.501Z  INFO 77477 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:50:24.524Z  INFO 77477 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:50:24.528Z  INFO 77477 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:50:24.567Z  WARN 77477 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:50:24.578Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:50:24.586Z DEBUG 77477 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:50:24.590Z DEBUG 77477 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:50:24.594Z DEBUG 77477 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:50:24.612Z  INFO 77477 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:50:24.622Z  INFO 77477 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.286 seconds (process running for 5.042)
2025-11-02T22:50:24.634Z DEBUG 77477 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6215366a, started on Sun Nov 02 22:50:21 WET 2025
2025-11-02T22:50:24.636Z  INFO 77477 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:50:24.639Z  INFO 77477 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:50:24.640Z  INFO 77477 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:50:24.641Z DEBUG 77477 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3f36d387, started on Sun Nov 02 22:50:24 WET 2025
2025-11-02T22:50:24.642Z  INFO 77477 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:50:24.642Z  INFO 77477 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-02T22:50:24.661Z  INFO 77477 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-02T22:52:47.644Z  INFO 78407 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 78407 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:52:47.645Z  INFO 78407 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:52:47.652Z DEBUG 78407 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6215366a
2025-11-02T22:52:47.977Z  INFO 78407 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:52:48.009Z  INFO 78407 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-11-02T22:52:48.286Z  INFO 78407 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:52:48.311Z  INFO 78407 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:52:48.327Z  INFO 78407 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:52:48.380Z  INFO 78407 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:52:48.394Z  INFO 78407 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:52:48.486Z  INFO 78407 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:52:48.487Z  INFO 78407 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:52:48.497Z  WARN 78407 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:52:48.506Z  INFO 78407 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:52:48.864Z  INFO 78407 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:52:48.891Z  INFO 78407 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:52:49.085Z  INFO 78407 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:52:49.529Z  WARN 78407 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:52:49.573Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:52:49.626Z DEBUG 78407 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:52:49.652Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:52:49.694Z DEBUG 78407 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:52:49.753Z  INFO 78407 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:52:49.801Z  INFO 78407 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-02T22:52:49.801Z  INFO 78407 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-02T22:52:49.802Z  INFO 78407 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-02T22:52:49.822Z  INFO 78407 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.342 seconds (process running for 3.485)
2025-11-02T22:52:49.850Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:52:49.891Z DEBUG 78407 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2489ee11]
2025-11-02T22:52:49.894Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:52:49.894Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-20, timeslot=Manhã, description=Booking 1
2025-11-02T22:52:49.898Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-02T22:52:49.898Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:52:49.951Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:52:49.955Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:52:50.245Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:52:50.247Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:52:50.252Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:52:50.252Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:52:50.298Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-02T22:52:50.325Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: bd858a13-1402-4490-b483-f0ec6fdb5710
2025-11-02T22:52:50.340Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:52:50.341Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1fa51751]
2025-11-02T22:52:50.353Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:52:50.354Z DEBUG 78407 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@7d0e5fbb]
2025-11-02T22:52:50.354Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:52:50.354Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-21, timeslot=Tarde, description=Booking 2
2025-11-02T22:52:50.354Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-21
2025-11-02T22:52:50.354Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:52:50.355Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:52:50.355Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:52:50.412Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:52:50.413Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:52:50.414Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:52:50.414Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:52:50.417Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-21: 0/5
2025-11-02T22:52:50.418Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f37225ea-6879-4d69-8427-c2aad93cd8ee
2025-11-02T22:52:50.419Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:52:50.419Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2dbdd3f2]
2025-11-02T22:52:50.421Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:52:50.422Z DEBUG 78407 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@39716249]
2025-11-02T22:52:50.422Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:52:50.422Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-22, timeslot=Noite, description=Booking Porto
2025-11-02T22:52:50.422Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-22
2025-11-02T22:52:50.422Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:52:50.423Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:52:50.423Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:52:50.482Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:52:50.484Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:52:50.485Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:52:50.486Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:52:50.488Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-22: 0/5
2025-11-02T22:52:50.491Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: f4432cf6-0558-44c5-9b92-4fd28fdb7f98
2025-11-02T22:52:50.493Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:52:50.494Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@33c6625c]
2025-11-02T22:52:50.496Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-02T22:52:50.501Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-02T22:52:50.502Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-02T22:52:50.519Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:52:50.520Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-02T22:52:50.558Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:52:50.558Z DEBUG 78407 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@27b5c8d0]
2025-11-02T22:52:50.558Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:52:50.559Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-01, timeslot=Manhã, description=Teste integração
2025-11-02T22:52:50.559Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-02T22:52:50.559Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:52:50.559Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:52:50.559Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:52:50.616Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:52:50.617Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:52:50.618Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:52:50.619Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:52:50.621Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-02T22:52:50.627Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: a55471eb-2168-48bf-b016-54d9da94d906
2025-11-02T22:52:50.628Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:52:50.629Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@6b96af8d]
2025-11-02T22:52:50.638Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-02T22:52:50.639Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-02T22:52:50.639Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-02T22:52:50.641Z ERROR 78407 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-02T22:52:50.641Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:52:50.641Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:52:50.647Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:52:50.648Z DEBUG 78407 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6ec05499]
2025-11-02T22:52:50.648Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:52:50.648Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Lisboa, date=2025-12-25, timeslot=Manhã, description=Teste update estado
2025-11-02T22:52:50.648Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-02T22:52:50.648Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:52:50.648Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:52:50.649Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:52:50.705Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:52:50.706Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:52:50.706Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:52:50.706Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:52:50.707Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-02T22:52:50.709Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ec0bd763-2924-4086-9b3d-8f257c90dc79
2025-11-02T22:52:50.710Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:52:50.710Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@276038e7]
2025-11-02T22:52:50.711Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-02T22:52:50.712Z DEBUG 78407 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-02T22:52:50.715Z  WARN 78407 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-02T22:52:50.726Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:52:50.727Z DEBUG 78407 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2dfde704]
2025-11-02T22:52:50.727Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:52:50.727Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-15, timeslot=Tarde, description=Teste GET por token
2025-11-02T22:52:50.727Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-02T22:52:50.727Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:52:50.727Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:52:50.728Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:52:50.785Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:52:50.786Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:52:50.787Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:52:50.788Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:52:50.790Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-02T22:52:50.796Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: ba1150ed-093c-4d41-9e26-17a16f86743c
2025-11-02T22:52:50.798Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:52:50.798Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@43a34f02]
2025-11-02T22:52:50.800Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-02T22:52:50.800Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/ba1150ed-093c-4d41-9e26-17a16f86743c - Fetching booking
2025-11-02T22:52:50.800Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: ba1150ed-093c-4d41-9e26-17a16f86743c
2025-11-02T22:52:50.802Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:52:50.803Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@13e4a4a0]
2025-11-02T22:52:50.809Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:52:50.810Z DEBUG 78407 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@48c74c4f]
2025-11-02T22:52:50.810Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:52:50.810Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2020-01-01, timeslot=Manhã, description=Data passada
2025-11-02T22:52:50.810Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-02T22:52:50.810Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:52:50.811Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:52:50.811Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:52:50.868Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:52:50.869Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:52:50.870Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:52:50.870Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:52:50.870Z  WARN 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-02T22:52:50.874Z ERROR 78407 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-02T22:52:50.875Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:52:50.875Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:52:50.885Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:52:50.886Z DEBUG 78407 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@47fb7dbb]
2025-11-02T22:52:50.886Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:52:50.886Z  INFO 78407 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Coimbra, date=2025-12-30, timeslot=Tarde, description=Teste estado inválido
2025-11-02T22:52:50.886Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-02T22:52:50.886Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:52:50.887Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:52:50.887Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:52:50.943Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:52:50.943Z DEBUG 78407 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:52:50.944Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:52:50.944Z  INFO 78407 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:52:50.945Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-02T22:52:50.950Z  INFO 78407 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 5bfa27bd-7379-4754-8b07-02444640db1d
2025-11-02T22:52:50.952Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:52:50.952Z DEBUG 78407 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@aa9b6a8]
2025-11-02T22:52:50.955Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-02T22:52:50.956Z DEBUG 78407 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-02T22:52:50.957Z  WARN 78407 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-02T22:52:50.974Z  INFO 78407 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-02T22:52:50.987Z  INFO 78407 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-02T22:52:50.994Z  INFO 78407 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-02T22:52:51.018Z  INFO 78407 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 78407 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:52:51.018Z  INFO 78407 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:52:51.019Z DEBUG 78407 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@472d7ab0
2025-11-02T22:52:51.111Z  INFO 78407 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:52:51.117Z  INFO 78407 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 2 JPA repository interfaces.
2025-11-02T22:52:51.174Z  INFO 78407 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:52:51.175Z  INFO 78407 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:52:51.179Z  INFO 78407 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:52:51.180Z  INFO 78407 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-02T22:52:51.180Z  INFO 78407 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:52:51.181Z  INFO 78407 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-02T22:52:51.181Z  WARN 78407 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:52:51.181Z  INFO 78407 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:52:51.202Z  INFO 78407 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:52:51.206Z  INFO 78407 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:52:51.247Z  WARN 78407 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:52:51.257Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:52:51.263Z DEBUG 78407 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:52:51.267Z DEBUG 78407 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:52:51.270Z DEBUG 78407 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:52:51.284Z  INFO 78407 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:52:51.294Z  INFO 78407 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.299 seconds (process running for 4.957)
2025-11-02T22:52:51.304Z DEBUG 78407 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6215366a, started on Sun Nov 02 22:52:47 WET 2025
2025-11-02T22:52:51.306Z  INFO 78407 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:52:51.310Z  INFO 78407 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:52:51.311Z  INFO 78407 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:52:51.312Z DEBUG 78407 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@472d7ab0, started on Sun Nov 02 22:52:51 WET 2025
2025-11-02T22:52:51.313Z  INFO 78407 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:52:51.314Z  INFO 78407 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-02T22:52:51.342Z  INFO 78407 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-02T22:53:35.212Z  INFO 78833 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 78833 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:53:35.213Z  INFO 78833 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:53:35.221Z DEBUG 78833 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6215366a
2025-11-02T22:53:35.532Z  INFO 78833 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:53:35.566Z  INFO 78833 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 28 ms. Found 2 JPA repository interfaces.
2025-11-02T22:53:35.819Z  INFO 78833 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:53:35.842Z  INFO 78833 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:53:35.861Z  INFO 78833 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:53:35.915Z  INFO 78833 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:53:35.929Z  INFO 78833 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:53:36.022Z  INFO 78833 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:53:36.023Z  INFO 78833 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:53:36.034Z  WARN 78833 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:53:36.044Z  INFO 78833 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:53:36.410Z  INFO 78833 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:53:36.436Z  INFO 78833 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:53:36.611Z  INFO 78833 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:53:37.046Z  WARN 78833 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:53:37.098Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:53:37.154Z DEBUG 78833 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:53:37.176Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:53:37.229Z DEBUG 78833 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:53:37.295Z  INFO 78833 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:53:37.333Z  INFO 78833 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-02T22:53:37.334Z  INFO 78833 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-02T22:53:37.334Z  INFO 78833 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-02T22:53:37.352Z  INFO 78833 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.341 seconds (process running for 3.511)
2025-11-02T22:53:37.382Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:53:37.422Z DEBUG 78833 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6dd8dfe5]
2025-11-02T22:53:37.425Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:53:37.425Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-20, timeslot=Manhã, description=Booking 1
2025-11-02T22:53:37.429Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-02T22:53:37.429Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:53:37.487Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:53:37.490Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:53:37.761Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:53:37.762Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:53:37.764Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:53:37.764Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:53:37.812Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-02T22:53:37.842Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: caef1150-dbd2-4ef2-9bdd-1998ac91d507
2025-11-02T22:53:37.858Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:53:37.859Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@24c00206]
2025-11-02T22:53:37.870Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:53:37.871Z DEBUG 78833 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2de08488]
2025-11-02T22:53:37.871Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:53:37.871Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-21, timeslot=Tarde, description=Booking 2
2025-11-02T22:53:37.872Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-21
2025-11-02T22:53:37.872Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:53:37.872Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:53:37.872Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:53:37.922Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:53:37.923Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:53:37.925Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:53:37.925Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:53:37.927Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-21: 0/5
2025-11-02T22:53:37.930Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 6ff684e0-c76f-4f38-822f-f18f49727017
2025-11-02T22:53:37.932Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:53:37.933Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@cce5ae3]
2025-11-02T22:53:37.936Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:53:37.937Z DEBUG 78833 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1172d47]
2025-11-02T22:53:37.937Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:53:37.937Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-22, timeslot=Noite, description=Booking Porto
2025-11-02T22:53:37.938Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-22
2025-11-02T22:53:37.938Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:53:37.938Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:53:37.939Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:53:37.990Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:53:37.992Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:53:37.994Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:53:37.995Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:53:37.997Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-22: 0/5
2025-11-02T22:53:38.000Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 007de84a-7847-4760-874d-00b4df810001
2025-11-02T22:53:38.001Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:53:38.001Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7f74ae13]
2025-11-02T22:53:38.002Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-02T22:53:38.006Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-02T22:53:38.006Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-02T22:53:38.025Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:53:38.026Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-02T22:53:38.070Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:53:38.070Z DEBUG 78833 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@62ec0967]
2025-11-02T22:53:38.070Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:53:38.071Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-01, timeslot=Manhã, description=Teste integração
2025-11-02T22:53:38.071Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-02T22:53:38.071Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:53:38.071Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:53:38.071Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:53:38.119Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:53:38.120Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:53:38.121Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:53:38.122Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:53:38.126Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-02T22:53:38.136Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: bf4d7538-e9d1-45a7-977c-e5e5937b2295
2025-11-02T22:53:38.139Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:53:38.139Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1613b471]
2025-11-02T22:53:38.157Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-02T22:53:38.158Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-02T22:53:38.159Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-02T22:53:38.164Z ERROR 78833 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-02T22:53:38.165Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:53:38.165Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:53:38.170Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:53:38.171Z DEBUG 78833 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4be8d40e]
2025-11-02T22:53:38.171Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:53:38.171Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Lisboa, date=2025-12-25, timeslot=Manhã, description=Teste update estado
2025-11-02T22:53:38.172Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-02T22:53:38.172Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:53:38.172Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:53:38.172Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:53:38.221Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:53:38.222Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:53:38.223Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:53:38.223Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:53:38.226Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-02T22:53:38.232Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 74cdd32d-cb46-4bbb-a5d5-6f7971dabf6b
2025-11-02T22:53:38.233Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:53:38.234Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@653b49c4]
2025-11-02T22:53:38.236Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-02T22:53:38.238Z DEBUG 78833 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-02T22:53:38.241Z  WARN 78833 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-02T22:53:38.251Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:53:38.252Z DEBUG 78833 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1a445b5]
2025-11-02T22:53:38.252Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:53:38.252Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-15, timeslot=Tarde, description=Teste GET por token
2025-11-02T22:53:38.253Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-02T22:53:38.253Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:53:38.253Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:53:38.253Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:53:38.301Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:53:38.302Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:53:38.304Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:53:38.304Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:53:38.307Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-02T22:53:38.313Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 5a8980d4-b2a8-4fff-adb4-9e5575a53b1c
2025-11-02T22:53:38.315Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:53:38.315Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@2b4bcd6e]
2025-11-02T22:53:38.317Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-02T22:53:38.317Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/5a8980d4-b2a8-4fff-adb4-9e5575a53b1c - Fetching booking
2025-11-02T22:53:38.317Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 5a8980d4-b2a8-4fff-adb4-9e5575a53b1c
2025-11-02T22:53:38.319Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:53:38.319Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1ad27a73]
2025-11-02T22:53:38.327Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:53:38.328Z DEBUG 78833 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4022a256]
2025-11-02T22:53:38.328Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:53:38.328Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2020-01-01, timeslot=Manhã, description=Data passada
2025-11-02T22:53:38.328Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-02T22:53:38.328Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:53:38.329Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:53:38.329Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:53:38.377Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:53:38.378Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:53:38.379Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:53:38.379Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:53:38.379Z  WARN 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-02T22:53:38.382Z ERROR 78833 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-02T22:53:38.383Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:53:38.383Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:53:38.394Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:53:38.394Z DEBUG 78833 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@162304e3]
2025-11-02T22:53:38.394Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:53:38.394Z  INFO 78833 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Coimbra, date=2025-12-30, timeslot=Tarde, description=Teste estado inválido
2025-11-02T22:53:38.395Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-02T22:53:38.395Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:53:38.395Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:53:38.395Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:53:38.443Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:53:38.444Z DEBUG 78833 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:53:38.446Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:53:38.447Z  INFO 78833 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:53:38.450Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-02T22:53:38.453Z  INFO 78833 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 1ee814f1-eb75-4a8a-aec8-ec0e15e1aea6
2025-11-02T22:53:38.454Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:53:38.454Z DEBUG 78833 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@78e547aa]
2025-11-02T22:53:38.458Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-02T22:53:38.460Z DEBUG 78833 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-02T22:53:38.461Z  WARN 78833 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-02T22:53:38.474Z  INFO 78833 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-02T22:53:38.480Z  INFO 78833 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-02T22:53:38.485Z  INFO 78833 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-02T22:53:38.510Z  INFO 78833 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 78833 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:53:38.510Z  INFO 78833 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:53:38.511Z DEBUG 78833 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@d4a1d38
2025-11-02T22:53:38.594Z  INFO 78833 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:53:38.598Z  INFO 78833 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-02T22:53:38.640Z  INFO 78833 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:53:38.641Z  INFO 78833 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:53:38.645Z  INFO 78833 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:53:38.646Z  INFO 78833 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-02T22:53:38.647Z  INFO 78833 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:53:38.647Z  INFO 78833 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-02T22:53:38.647Z  WARN 78833 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:53:38.648Z  INFO 78833 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:53:38.673Z  INFO 78833 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:53:38.677Z  INFO 78833 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:53:38.717Z  WARN 78833 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:53:38.727Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:53:38.735Z DEBUG 78833 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:53:38.739Z DEBUG 78833 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:53:38.742Z DEBUG 78833 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:53:38.758Z  INFO 78833 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:53:38.770Z  INFO 78833 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.284 seconds (process running for 4.928)
2025-11-02T22:53:38.781Z DEBUG 78833 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6215366a, started on Sun Nov 02 22:53:35 WET 2025
2025-11-02T22:53:38.783Z  INFO 78833 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:53:38.787Z  INFO 78833 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:53:38.789Z  INFO 78833 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:53:38.790Z DEBUG 78833 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@d4a1d38, started on Sun Nov 02 22:53:38 WET 2025
2025-11-02T22:53:38.791Z  INFO 78833 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:53:38.792Z  INFO 78833 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-02T22:53:38.809Z  INFO 78833 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-11-02T22:57:13.004Z  INFO 80133 --- [main] p.r.h.i.BookingControllerITTest          : Starting BookingControllerITTest using Java 21.0.9-ea with PID 80133 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:57:13.005Z  INFO 80133 --- [main] p.r.h.i.BookingControllerITTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:57:13.012Z DEBUG 80133 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6215366a
2025-11-02T22:57:13.317Z  INFO 80133 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:57:13.348Z  INFO 80133 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-11-02T22:57:13.592Z  INFO 80133 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:57:13.616Z  INFO 80133 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-02T22:57:13.634Z  INFO 80133 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:57:13.698Z  INFO 80133 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:57:13.713Z  INFO 80133 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-02T22:57:13.808Z  INFO 80133 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:57:13.809Z  INFO 80133 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-02T22:57:13.819Z  WARN 80133 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:57:13.828Z  INFO 80133 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:57:14.185Z  INFO 80133 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:57:14.212Z  INFO 80133 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:57:14.390Z  INFO 80133 --- [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-02T22:57:14.832Z  WARN 80133 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:57:14.886Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:57:14.971Z DEBUG 80133 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:57:15.011Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:57:15.057Z DEBUG 80133 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:57:15.111Z  INFO 80133 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:57:15.164Z  INFO 80133 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-02T22:57:15.164Z  INFO 80133 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-02T22:57:15.165Z  INFO 80133 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-11-02T22:57:15.182Z  INFO 80133 --- [main] p.r.h.i.BookingControllerITTest          : Started BookingControllerITTest in 2.354 seconds (process running for 3.517)
2025-11-02T22:57:15.209Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:57:15.243Z DEBUG 80133 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@6dd8dfe5]
2025-11-02T22:57:15.246Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:57:15.246Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-20, timeslot=Manhã, description=Booking 1
2025-11-02T22:57:15.250Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-20
2025-11-02T22:57:15.250Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:57:15.306Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:57:15.310Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:57:15.586Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:57:15.586Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:57:15.589Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:57:15.589Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:57:15.642Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-20: 0/5
2025-11-02T22:57:15.672Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 2857700e-7091-41f7-8640-c55f08487d51
2025-11-02T22:57:15.688Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:57:15.689Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@24c00206]
2025-11-02T22:57:15.700Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:57:15.701Z DEBUG 80133 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@2de08488]
2025-11-02T22:57:15.701Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:57:15.701Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-21, timeslot=Tarde, description=Booking 2
2025-11-02T22:57:15.701Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-21
2025-11-02T22:57:15.701Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:57:15.701Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:57:15.701Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:57:15.756Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:57:15.757Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:57:15.760Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:57:15.760Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:57:15.761Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-21: 0/5
2025-11-02T22:57:15.763Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 8eb6eec5-d709-498c-8839-bf7839f49492
2025-11-02T22:57:15.764Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:57:15.764Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@cce5ae3]
2025-11-02T22:57:15.766Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:57:15.767Z DEBUG 80133 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@1172d47]
2025-11-02T22:57:15.768Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:57:15.768Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-22, timeslot=Noite, description=Booking Porto
2025-11-02T22:57:15.768Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-22
2025-11-02T22:57:15.768Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:57:15.768Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:57:15.769Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:57:15.823Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:57:15.824Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:57:15.826Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:57:15.826Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:57:15.827Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-22: 0/5
2025-11-02T22:57:15.829Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: d0296627-aa30-495f-9489-d8f0dcbee9a1
2025-11-02T22:57:15.829Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:57:15.829Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@7f74ae13]
2025-11-02T22:57:15.832Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#searchBookings(String, LocalDate, BookingStatus, int, int)
2025-11-02T22:57:15.839Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings - Searching bookings
2025-11-02T22:57:15.839Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Searching bookings - municipality: Braga, date: null, status: null
2025-11-02T22:57:15.858Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:57:15.859Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing pt.rodrigo.hw1_tqs.entities.Booking instances]
2025-11-02T22:57:15.899Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:57:15.899Z DEBUG 80133 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@62ec0967]
2025-11-02T22:57:15.899Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:57:15.899Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2025-12-01, timeslot=Manhã, description=Teste integração
2025-11-02T22:57:15.900Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2025-12-01
2025-11-02T22:57:15.900Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:57:15.900Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:57:15.900Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:57:15.953Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:57:15.955Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:57:15.956Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:57:15.956Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:57:15.958Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Braga on 2025-12-01: 0/5
2025-11-02T22:57:15.962Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 8c5ffdb1-c31a-4355-8c79-637fe9e41d19
2025-11-02T22:57:15.964Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:57:15.965Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@1613b471]
2025-11-02T22:57:15.978Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-02T22:57:15.980Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/token-inexistente - Fetching booking
2025-11-02T22:57:15.980Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: token-inexistente
2025-11-02T22:57:15.986Z ERROR 80133 --- [main] p.r.h.controllers.BookingController      : Booking not found: Booking not found with token: token-inexistente
2025-11-02T22:57:15.987Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:57:15.987Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:57:16.005Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:57:16.007Z DEBUG 80133 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4be8d40e]
2025-11-02T22:57:16.007Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:57:16.007Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Lisboa, date=2025-12-25, timeslot=Manhã, description=Teste update estado
2025-11-02T22:57:16.008Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Lisboa, date: 2025-12-25
2025-11-02T22:57:16.008Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:57:16.009Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:57:16.009Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:57:16.060Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:57:16.061Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:57:16.061Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:57:16.061Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:57:16.062Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Lisboa on 2025-12-25: 0/5
2025-11-02T22:57:16.065Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 64ac146d-6ce0-4aa4-84ae-8388fb7fe13e
2025-11-02T22:57:16.066Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:57:16.066Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@653b49c4]
2025-11-02T22:57:16.068Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-02T22:57:16.070Z DEBUG 80133 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [{newStatus=IN_PROGRESS}]
2025-11-02T22:57:16.071Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : PUT /api/bookings/64ac146d-6ce0-4aa4-84ae-8388fb7fe13e/status - Updating status
2025-11-02T22:57:16.071Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Updating booking status - token: 64ac146d-6ce0-4aa4-84ae-8388fb7fe13e, newStatus: IN_PROGRESS
2025-11-02T22:57:16.071Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 64ac146d-6ce0-4aa4-84ae-8388fb7fe13e
2025-11-02T22:57:16.076Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking status updated successfully
2025-11-02T22:57:16.083Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:57:16.083Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@19f03a01]
2025-11-02T22:57:16.092Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:57:16.093Z DEBUG 80133 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@aa9b6a8]
2025-11-02T22:57:16.093Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:57:16.093Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Porto, date=2025-12-15, timeslot=Tarde, description=Teste GET por token
2025-11-02T22:57:16.093Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Porto, date: 2025-12-15
2025-11-02T22:57:16.093Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:57:16.094Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:57:16.094Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:57:16.148Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:57:16.149Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:57:16.150Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:57:16.150Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:57:16.154Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Porto on 2025-12-15: 0/5
2025-11-02T22:57:16.160Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 15048e0c-082f-4626-9c3e-9e97427de85f
2025-11-02T22:57:16.161Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:57:16.162Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@3fbeaa03]
2025-11-02T22:57:16.164Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#getBookingByToken(String)
2025-11-02T22:57:16.164Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : GET /api/bookings/15048e0c-082f-4626-9c3e-9e97427de85f - Fetching booking
2025-11-02T22:57:16.164Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Fetching booking by token: 15048e0c-082f-4626-9c3e-9e97427de85f
2025-11-02T22:57:16.167Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:57:16.167Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@373636f3]
2025-11-02T22:57:16.176Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:57:16.177Z DEBUG 80133 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@4fde13d0]
2025-11-02T22:57:16.177Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:57:16.177Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Braga, date=2020-01-01, timeslot=Manhã, description=Data passada
2025-11-02T22:57:16.177Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Braga, date: 2020-01-01
2025-11-02T22:57:16.177Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:57:16.178Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:57:16.178Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:57:16.231Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:57:16.232Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:57:16.233Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:57:16.233Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:57:16.233Z  WARN 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Attempted to create booking with past date: 2020-01-01
2025-11-02T22:57:16.236Z ERROR 80133 --- [main] p.r.h.controllers.BookingController      : Validation error: Date cannot be in the past
2025-11-02T22:57:16.237Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:57:16.237Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-11-02T22:57:16.244Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#createBooking(BookingDTO)
2025-11-02T22:57:16.244Z DEBUG 80133 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [pt.rodrigo.hw1_tqs.dto.BookingDTO@51645204]
2025-11-02T22:57:16.244Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : POST /api/bookings - Creating booking
2025-11-02T22:57:16.245Z  INFO 80133 --- [main] p.r.h.controllers.BookingController      : Received DTO: municipality=Coimbra, date=2025-12-30, timeslot=Tarde, description=Teste estado inválido
2025-11-02T22:57:16.245Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Creating new booking for municipality: Coimbra, date: 2025-12-30
2025-11-02T22:57:16.245Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Fetching municipalities from: https://geoapi.pt/municipios?json=true
2025-11-02T22:57:16.245Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : HTTP GET https://geoapi.pt/municipios?json=true
2025-11-02T22:57:16.245Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2025-11-02T22:57:16.299Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Response 200 OK
2025-11-02T22:57:16.300Z DEBUG 80133 --- [main] o.s.web.client.RestTemplate              : Reading to [java.util.List<java.lang.String>]
2025-11-02T22:57:16.301Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Received 308 municipalities
2025-11-02T22:57:16.302Z  INFO 80133 --- [main] p.r.h.services.MunicipalityServiceImpl   : Returning 308 municipality names
2025-11-02T22:57:16.304Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Current bookings for Coimbra on 2025-12-30: 0/5
2025-11-02T22:57:16.309Z  INFO 80133 --- [main] p.r.hw1_tqs.services.BookingServiceImpl  : Booking created successfully with token: 6421ec22-1f61-4f57-a962-52524b966b8d
2025-11-02T22:57:16.311Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-11-02T22:57:16.311Z DEBUG 80133 --- [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [pt.rodrigo.hw1_tqs.entities.Booking@52999774]
2025-11-02T22:57:16.313Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to pt.rodrigo.hw1_tqs.controllers.BookingController#updateBookingStatus(String, Map)
2025-11-02T22:57:16.314Z DEBUG 80133 --- [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to []
2025-11-02T22:57:16.316Z  WARN 80133 --- [main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<pt.rodrigo.hw1_tqs.entities.Booking> pt.rodrigo.hw1_tqs.controllers.BookingController.updateBookingStatus(java.lang.String,java.util.Map<java.lang.String, java.lang.String>)]
2025-11-02T22:57:16.324Z  INFO 80133 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests]: Hw1TqsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-02T22:57:16.329Z  INFO 80133 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration pt.rodrigo.hw1_tqs.Hw1TqsApplication for test class pt.rodrigo.hw1_tqs.Hw1TqsApplicationTests
2025-11-02T22:57:16.332Z  INFO 80133 --- [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-11-02T22:57:16.344Z  INFO 80133 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Starting Hw1TqsApplicationTests using Java 21.0.9-ea with PID 80133 (started by rodrigo-costa in /home/rodrigo-costa/Documentos/projtqs/api)
2025-11-02T22:57:16.344Z  INFO 80133 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2025-11-02T22:57:16.344Z DEBUG 80133 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@d5f3118
2025-11-02T22:57:16.419Z  INFO 80133 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-02T22:57:16.423Z  INFO 80133 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 2 JPA repository interfaces.
2025-11-02T22:57:16.469Z  INFO 80133 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-02T22:57:16.470Z  INFO 80133 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-02T22:57:16.474Z  INFO 80133 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-02T22:57:16.475Z  INFO 80133 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-11-02T22:57:16.476Z  INFO 80133 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:hw1db user=SA
2025-11-02T22:57:16.476Z  INFO 80133 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-11-02T22:57:16.476Z  WARN 80133 --- [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-02T22:57:16.476Z  INFO 80133 --- [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-02T22:57:16.497Z  INFO 80133 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-02T22:57:16.502Z  INFO 80133 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:57:16.538Z  WARN 80133 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-02T22:57:16.548Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-11-02T22:57:16.555Z DEBUG 80133 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-11-02T22:57:16.560Z DEBUG 80133 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-02T22:57:16.563Z DEBUG 80133 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-02T22:57:16.581Z  INFO 80133 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:hw1db'
2025-11-02T22:57:16.591Z  INFO 80133 --- [main] p.r.hw1_tqs.Hw1TqsApplicationTests       : Started Hw1TqsApplicationTests in 0.258 seconds (process running for 4.926)
2025-11-02T22:57:16.600Z DEBUG 80133 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6215366a, started on Sun Nov 02 22:57:13 WET 2025
2025-11-02T22:57:16.602Z  INFO 80133 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:57:16.604Z  INFO 80133 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-11-02T22:57:16.606Z  INFO 80133 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-11-02T22:57:16.606Z DEBUG 80133 --- [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@d5f3118, started on Sun Nov 02 22:57:16 WET 2025
2025-11-02T22:57:16.607Z  INFO 80133 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-02T22:57:16.608Z  INFO 80133 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-11-02T22:57:16.638Z  INFO 80133 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
